!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,i){!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=!!e&&"length"in e&&e.length,i=se.type(e);return"function"!==i&&!se.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e,t,i){if(se.isFunction(t))return se.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return se.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ge.test(t))return se.filter(t,e,i);t=se.filter(t,e)}return se.grep(e,function(e){return K.call(t,e)>-1!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return se.each(e.match(we)||[],function(e,i){t[i]=!0}),t}function o(){X.removeEventListener("DOMContentLoaded",o),e.removeEventListener("load",o),se.ready()}function a(){this.expando=se.expando+a.uid++}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Fe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Se.test(i)?se.parseJSON(i):i)}catch(e){}Ce.set(e,t,i)}else i=void 0;return i}function h(e,t,i,n){var r,s=1,o=20,a=n?function(){return n.cur()}:function(){return se.css(e,t,"")},l=a(),h=i&&i[3]||(se.cssNumber[t]?"":"px"),c=(se.cssNumber[t]||"px"!==h&&+l)&&Ae.exec(se.css(e,t));if(c&&c[3]!==h){h=h||c[3],i=i||[],c=+l||1;do{s=s||".5",c/=s,se.style(e,t,c+h)}while(s!==(s=a()/l)&&1!==s&&--o)}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=r)),r}function c(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&se.nodeName(e,t)?se.merge([e],i):i}function u(e,t){for(var i=0,n=e.length;n>i;i++)Te.set(e[i],"globalEval",!t||Te.get(t[i],"globalEval"))}function f(e,t,i,n,r){for(var s,o,a,l,h,f,d=t.createDocumentFragment(),p=[],g=0,v=e.length;v>g;g++)if((s=e[g])||0===s)if("object"===se.type(s))se.merge(p,s.nodeType?[s]:s);else if(Be.test(s)){for(o=o||d.appendChild(t.createElement("div")),a=(He.exec(s)||["",""])[1].toLowerCase(),l=Ee[a]||Ee._default,o.innerHTML=l[1]+se.htmlPrefilter(s)+l[2],f=l[0];f--;)o=o.lastChild;se.merge(p,o.childNodes),o=d.firstChild,o.textContent=""}else p.push(t.createTextNode(s));for(d.textContent="",g=0;s=p[g++];)if(n&&se.inArray(s,n)>-1)r&&r.push(s);else if(h=se.contains(s.ownerDocument,s),o=c(d.appendChild(s),"script"),h&&u(o),i)for(f=0;s=o[f++];)De.test(s.type||"")&&i.push(s);return d}function d(){return!0}function p(){return!1}function g(){try{return X.activeElement}catch(e){}}function v(e,t,i,n,r,s){var o,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(a in t)v(e,a,i,n,t[a],s);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=p;else if(!r)return e;return 1===s&&(o=r,r=function(e){return se().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=se.guid++)),e.each(function(){se.event.add(this,t,r,n,i)})}function m(e,t){return se.nodeName(e,"table")&&se.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){var i,n,r,s,o,a,l,h;if(1===t.nodeType){if(Te.hasData(e)&&(s=Te.access(e),o=Te.set(t,s),h=s.events)){delete o.handle,o.events={};for(r in h)for(i=0,n=h[r].length;n>i;i++)se.event.add(t,r,h[r][i])}Ce.hasData(e)&&(a=Ce.access(e),l=se.extend({},a),Ce.set(t,l))}}function x(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Re.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function k(e,t,i,n){t=Z.apply([],t);var r,s,o,a,l,h,u=0,d=e.length,p=d-1,g=t[0],v=se.isFunction(g);if(v||d>1&&"string"==typeof g&&!ne.checkClone&&qe.test(g))return e.each(function(r){var s=e.eq(r);v&&(t[0]=g.call(this,r,s.html())),k(s,t,i,n)});if(d&&(r=f(t,e[0].ownerDocument,!1,e,n),s=r.firstChild,1===r.childNodes.length&&(r=s),s||n)){for(o=se.map(c(r,"script"),b),a=o.length;d>u;u++)l=r,u!==p&&(l=se.clone(l,!0,!0),a&&se.merge(o,c(l,"script"))),i.call(e[u],l,u);if(a)for(h=o[o.length-1].ownerDocument,se.map(o,y),u=0;a>u;u++)l=o[u],De.test(l.type||"")&&!Te.access(l,"globalEval")&&se.contains(h,l)&&(l.src?se._evalUrl&&se._evalUrl(l.src):se.globalEval(l.textContent.replace(We,"")))}return e}function _(e,t,i){for(var n,r=t?se.filter(t,e):e,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||se.cleanData(c(n)),n.parentNode&&(i&&se.contains(n.ownerDocument,n)&&u(c(n,"script")),n.parentNode.removeChild(n));return e}function T(e,t){var i=se(t.createElement(e)).appendTo(t.body),n=se.css(i[0],"display");return i.detach(),n}function C(e){var t=X,i=Ue[e];return i||(i=T(e,t),"none"!==i&&i||(Ve=(Ve||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ve[0].contentDocument,t.write(),t.close(),i=T(e,t),Ve.detach()),Ue[e]=i),i}function S(e,t,i){var n,r,s,o,a=e.style;return i=i||Xe(e),o=i?i.getPropertyValue(t)||i[t]:void 0,""!==o&&void 0!==o||se.contains(e.ownerDocument,e)||(o=se.style(e,t)),i&&!ne.pixelMarginRight()&&Ye.test(o)&&$e.test(t)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s),void 0!==o?o+"":o}function F(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function M(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=tt.length;i--;)if((e=tt[i]+t)in it)return e}function A(e,t,i){var n=Ae.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function G(e,t,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=se.css(e,i+Ge[s],!0,r)),n?("content"===i&&(o-=se.css(e,"padding"+Ge[s],!0,r)),"margin"!==i&&(o-=se.css(e,"border"+Ge[s]+"Width",!0,r))):(o+=se.css(e,"padding"+Ge[s],!0,r),"padding"!==i&&(o+=se.css(e,"border"+Ge[s]+"Width",!0,r)));return o}function L(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=Xe(e),o="border-box"===se.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=S(e,t,s),(0>r||null==r)&&(r=e.style[t]),Ye.test(r))return r;n=o&&(ne.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+G(e,t,i||(o?"border":"content"),n,s)+"px"}function R(e,t){for(var i,n,r,s=[],o=0,a=e.length;a>o;o++)n=e[o],n.style&&(s[o]=Te.get(n,"olddisplay"),i=n.style.display,t?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Le(n)&&(s[o]=Te.access(n,"olddisplay",C(n.nodeName)))):(r=Le(n),"none"===i&&r||Te.set(n,"olddisplay",r?i:se.css(n,"display"))));for(o=0;a>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[o]||"":"none"));return e}function H(e,t,i,n,r){return new H.prototype.init(e,t,i,n,r)}function D(){return e.setTimeout(function(){nt=void 0}),nt=se.now()}function E(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=Ge[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function B(e,t,i){for(var n,r=(P.tweeners[t]||[]).concat(P.tweeners["*"]),s=0,o=r.length;o>s;s++)if(n=r[s].call(i,t,e))return n}function I(e,t,i){var n,r,s,o,a,l,h,c=this,u={},f=e.style,d=e.nodeType&&Le(e),p=Te.get(e,"fxshow");i.queue||(a=se._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,se.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],h=se.css(e,"display"),"inline"===("none"===h?Te.get(e,"olddisplay")||C(e.nodeName):h)&&"none"===se.css(e,"float")&&(f.display="inline-block")),i.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],st.exec(r)){if(delete t[n],s=s||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!p||void 0===p[n])continue;d=!0}u[n]=p&&p[n]||se.style(e,n)}else h=void 0;if(se.isEmptyObject(u))"inline"===("none"===h?C(e.nodeName):h)&&(f.display=h);else{p?"hidden"in p&&(d=p.hidden):p=Te.access(e,"fxshow",{}),s&&(p.hidden=!d),d?se(e).show():c.done(function(){se(e).hide()}),c.done(function(){var t;Te.remove(e,"fxshow");for(t in u)se.style(e,t,u[t])});for(n in u)o=B(d?p[n]:0,n,c),n in p||(p[n]=o.start,d&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function N(e,t){var i,n,r,s,o;for(i in e)if(n=se.camelCase(i),r=t[n],s=e[i],se.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(o=se.cssHooks[n])&&"expand"in o){s=o.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[n]=r}function P(e,t,i){var n,r,s=0,o=P.prefilters.length,a=se.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=nt||D(),i=Math.max(0,h.startTime+h.duration-t),n=i/h.duration||0,s=1-n,o=0,l=h.tweens.length;l>o;o++)h.tweens[o].run(s);return a.notifyWith(e,[h,s,i]),1>s&&l?i:(a.resolveWith(e,[h]),!1)},h=a.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{},easing:se.easing._default},i),originalProperties:t,originalOptions:i,startTime:nt||D(),duration:i.duration,tweens:[],createTween:function(t,i){var n=se.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(n),n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)h.tweens[i].run(1);return t?(a.notifyWith(e,[h,1,0]),a.resolveWith(e,[h,t])):a.rejectWith(e,[h,t]),this}}),c=h.props;for(N(c,h.opts.specialEasing);o>s;s++)if(n=P.prefilters[s].call(h,e,c,h.opts))return se.isFunction(n.stop)&&(se._queueHooks(h.elem,h.opts.queue).stop=se.proxy(n.stop,n)),n;return se.map(c,B,h),se.isFunction(h.opts.start)&&h.opts.start.call(e,h),se.fx.timer(se.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function j(e){return e.getAttribute&&e.getAttribute("class")||""}function O(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,s=t.toLowerCase().match(we)||[];if(se.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function q(e,t,i,n){function r(a){var l;return s[a]=!0,se.each(e[a]||[],function(e,a){var h=a(t,i,n);return"string"!=typeof h||o||s[h]?o?!(l=h):void 0:(t.dataTypes.unshift(h),r(h),!1)}),l}var s={},o=e===Ct;return r(t.dataTypes[0])||!s["*"]&&r("*")}function z(e,t){var i,n,r=se.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&se.extend(!0,e,n),e}function W(e,t,i){for(var n,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function V(e,t,i,n){var r,s,o,a,l,h={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)h[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=h[l+" "+s]||h["* "+s]))for(r in h)if(a=r.split(" "),a[1]===s&&(o=h[l+" "+a[0]]||h["* "+a[0]])){!0===o?o=h[r]:!0!==h[r]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function U(e,t,i,n){var r;if(se.isArray(t))se.each(t,function(t,r){i||At.test(e)?n(e,r):U(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==se.type(t))n(e,t);else for(r in t)U(e+"["+r+"]",t[r],i,n)}function $(e){return se.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],X=e.document,J=Y.slice,Z=Y.concat,Q=Y.push,K=Y.indexOf,ee={},te=ee.toString,ie=ee.hasOwnProperty,ne={},re="2.2.4",se=function(e,t){return new se.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,le=/-([\da-z])/gi,he=function(e,t){return t.toUpperCase()};se.fn=se.prototype={jquery:re,constructor:se,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return se.each(this,e)},map:function(e){return this.pushStack(se.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:Y.sort,splice:Y.splice},se.extend=se.fn.extend=function(){var e,t,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[a]||{},a++),"object"==typeof o||se.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=o[t],n=e[t],o!==n&&(h&&n&&(se.isPlainObject(n)||(r=se.isArray(n)))?(r?(r=!1,s=i&&se.isArray(i)?i:[]):s=i&&se.isPlainObject(i)?i:{},o[t]=se.extend(h,s,n)):void 0!==n&&(o[t]=n));return o},se.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!se.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;if(e.constructor&&!ie.call(e,"constructor")&&!ie.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ie.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;(e=se.trim(e))&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(le,he)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;n>r&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?se.merge(n,"string"==typeof e?[e]:e):Q.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:K.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,s=e.length,o=!i;s>r;r++)!t(e[r],r)!==o&&n.push(e[r]);return n},map:function(e,t,n){var r,s,o=0,a=[];if(i(e))for(r=e.length;r>o;o++)null!=(s=t(e[o],o,n))&&a.push(s);else for(o in e)null!=(s=t(e[o],o,n))&&a.push(s);return Z.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),se.isFunction(e)?(n=J.call(arguments,2),r=function(){return e.apply(t||this,n.concat(J.call(arguments)))},r.guid=e.guid=e.guid||se.guid++,r):void 0},now:Date.now,support:ne}),"function"==typeof Symbol&&(se.fn[Symbol.iterator]=Y[Symbol.iterator]),se.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,i,n){var r,s,o,a,h,u,f,d,p=t&&t.ownerDocument,g=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return i;if(!n&&((t?t.ownerDocument||t:N)!==G&&A(t),t=t||G,R)){if(11!==g&&(u=ge.exec(e)))if(r=u[1]){if(9===g){if(!(o=t.getElementById(r)))return i;if(o.id===r)return i.push(o),i}else if(p&&(o=p.getElementById(r))&&B(t,o)&&o.id===r)return i.push(o),i}else{if(u[2])return J.apply(i,t.getElementsByTagName(e)),i;if((r=u[3])&&y.getElementsByClassName&&t.getElementsByClassName)return J.apply(i,t.getElementsByClassName(r)),i}if(y.qsa&&!z[e+" "]&&(!H||!H.test(e))){if(1!==g)p=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(me,"\\$&"):t.setAttribute("id",a=I),f=_(e),s=f.length,h=ce.test(a)?"#"+a:"[id='"+a+"']";s--;)f[s]=h+" "+c(f[s]);d=f.join(","),p=ve.test(e)&&l(t.parentNode)||t}if(d)try{return J.apply(i,p.querySelectorAll(d)),i}catch(e){}finally{a===I&&t.removeAttribute("id")}}}return C(e.replace(se,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[I]=!0,e}function r(e){var t=G.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return n(function(t){return t=+t,n(function(i,n){for(var r,s=e([],i.length,t),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function h(){}function c(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function u(e,t,i){var n=t.dir,r=i&&"parentNode"===n,s=j++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,s)}:function(t,i,o){var a,l,h,c=[P,s];if(o){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(h=t[I]||(t[I]={}),l=h[t.uniqueID]||(h[t.uniqueID]={}),(a=l[n])&&a[0]===P&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,o))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function d(e,i,n){for(var r=0,s=i.length;s>r;r++)t(e,i[r],n);return n}function p(e,t,i,n,r){for(var s,o=[],a=0,l=e.length,h=null!=t;l>a;a++)(s=e[a])&&(i&&!i(s,n,r)||(o.push(s),h&&t.push(a)));return o}function g(e,t,i,r,s,o){return r&&!r[I]&&(r=g(r)),s&&!s[I]&&(s=g(s,o)),n(function(n,o,a,l){var h,c,u,f=[],g=[],v=o.length,m=n||d(t||"*",a.nodeType?[a]:a,[]),b=!e||!n&&t?m:p(m,f,e,a,l),y=i?s||(n?e:v||r)?[]:o:b;if(i&&i(b,y,a,l),r)for(h=p(y,g),r(h,[],a,l),c=h.length;c--;)(u=h[c])&&(y[g[c]]=!(b[g[c]]=u));if(n){if(s||e){if(s){for(h=[],c=y.length;c--;)(u=y[c])&&h.push(b[c]=u);s(null,y=[],h,l)}for(c=y.length;c--;)(u=y[c])&&(h=s?Q(n,u):f[c])>-1&&(n[h]=!(o[h]=u))}}else y=p(y===o?y.splice(v,y.length):y),s?s(null,o,y,l):J.apply(o,y)})}function v(e){for(var t,i,n,r=e.length,s=w.relative[e[0].type],o=s||w.relative[" "],a=s?1:0,l=u(function(e){return e===t},o,!0),h=u(function(e){return Q(t,e)>-1},o,!0),d=[function(e,i,n){var r=!s&&(n||i!==S)||((t=i).nodeType?l(e,i,n):h(e,i,n));return t=null,r}];r>a;a++)if(i=w.relative[e[a].type])d=[u(f(d),i)];else{if(i=w.filter[e[a].type].apply(null,e[a].matches),i[I]){for(n=++a;r>n&&!w.relative[e[n].type];n++);return g(a>1&&f(d),a>1&&c(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(se,"$1"),i,n>a&&v(e.slice(a,n)),r>n&&v(e=e.slice(n)),r>n&&c(e))}d.push(i)}return f(d)}function m(e,i){var r=i.length>0,s=e.length>0,o=function(n,o,a,l,h){var c,u,f,d=0,g="0",v=n&&[],m=[],b=S,y=n||s&&w.find.TAG("*",h),x=P+=null==b?1:Math.random()||.1,k=y.length;for(h&&(S=o===G||o||h);g!==k&&null!=(c=y[g]);g++){if(s&&c){for(u=0,o||c.ownerDocument===G||(A(c),a=!R);f=e[u++];)if(f(c,o||G,a)){l.push(c);break}h&&(P=x)}r&&((c=!f&&c)&&d--,n&&v.push(c))}if(d+=g,r&&g!==d){for(u=0;f=i[u++];)f(v,m,o,a);if(n){if(d>0)for(;g--;)v[g]||m[g]||(m[g]=Y.call(l));m=p(m)}J.apply(l,m),h&&!n&&m.length>0&&d+i.length>1&&t.uniqueSort(l)}return h&&(P=x,S=b),v};return r?n(o):o}var b,y,w,x,k,_,T,C,S,F,M,A,G,L,R,H,D,E,B,I="sizzle"+1*new Date,N=e.document,P=0,j=0,O=i(),q=i(),z=i(),W=function(e,t){return e===t&&(M=!0),0},V=1<<31,U={}.hasOwnProperty,$=[],Y=$.pop,X=$.push,J=$.push,Z=$.slice,Q=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",re=new RegExp(ee+"+","g"),se=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),oe=new RegExp("^"+ee+"*,"+ee+"*"),ae=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),he=new RegExp(ne),ce=new RegExp("^"+te+"$"),ue={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,de=/^h\d$/i,pe=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,me=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},we=function(){A()};try{J.apply($=Z.call(N.childNodes),N.childNodes),$[N.childNodes.length].nodeType}catch(e){J={apply:$.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}y=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:N;return n!==G&&9===n.nodeType&&n.documentElement?(G=n,L=G.documentElement,R=!k(G),(i=G.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",we,!1):i.attachEvent&&i.attachEvent("onunload",we)),y.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=r(function(e){return e.appendChild(G.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=pe.test(G.getElementsByClassName),y.getById=r(function(e){return L.appendChild(e).id=I,!G.getElementsByName||!G.getElementsByName(I).length}),y.getById?(w.find.ID=function(e,t){if(void 0!==t.getElementById&&R){var i=t.getElementById(e);return i?[i]:[]}},w.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),w.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},w.find.CLASS=y.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&R?t.getElementsByClassName(e):void 0},D=[],H=[],(y.qsa=pe.test(G.querySelectorAll))&&(r(function(e){L.appendChild(e).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&H.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||H.push("\\["+ee+"*(?:value|"+K+")"),e.querySelectorAll("[id~="+I+"-]").length||H.push("~="),e.querySelectorAll(":checked").length||H.push(":checked"),e.querySelectorAll("a#"+I+"+*").length||H.push(".#.+[+~]")}),r(function(e){var t=G.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&H.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(y.matchesSelector=pe.test(E=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(e){y.disconnectedMatch=E.call(e,"div"),E.call(e,"[s!='']:x"),D.push("!=",ne)}),H=H.length&&new RegExp(H.join("|")),D=D.length&&new RegExp(D.join("|")),t=pe.test(L.compareDocumentPosition),B=t||pe.test(L.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return M=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!y.sortDetached&&t.compareDocumentPosition(e)===i?e===G||e.ownerDocument===N&&B(N,e)?-1:t===G||t.ownerDocument===N&&B(N,t)?1:F?Q(F,e)-Q(F,t):0:4&i?-1:1)}:function(e,t){if(e===t)return M=!0,0;var i,n=0,r=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!r||!s)return e===G?-1:t===G?1:r?-1:s?1:F?Q(F,e)-Q(F,t):0;if(r===s)return o(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?o(a[n],l[n]):a[n]===N?-1:l[n]===N?1:0},G):G},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==G&&A(e),i=i.replace(le,"='$1']"),y.matchesSelector&&R&&!z[i+" "]&&(!D||!D.test(i))&&(!H||!H.test(i)))try{var n=E.call(e,i);if(n||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,G,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==G&&A(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==G&&A(e);var i=w.attrHandle[t.toLowerCase()],n=i&&U.call(w.attrHandle,t.toLowerCase())?i(e,t,!R):void 0;return void 0!==n?n:y.attributes||!R?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(M=!y.detectDuplicates,F=!y.sortStable&&e.slice(0),e.sort(W),M){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return F=null,e},x=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=x(t);return i},w=t.selectors={cacheLength:50,createPseudo:n,match:ue,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ue.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&he.test(i)&&(t=_(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=O[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&O(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var s=t.attr(r,e);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(re," ")+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var h,c,u,f,d,p,g=s!==o?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(v){if(s){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?v.firstChild:v.lastChild],o&&b){for(f=v,u=f[I]||(f[I]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),h=c[e]||[],d=h[0]===P&&h[1],y=d&&h[2],f=d&&v.childNodes[d];f=++d&&f&&f[g]||(y=d=0)||p.pop();)if(1===f.nodeType&&++y&&f===t){c[e]=[P,d,y];break}}else if(b&&(f=t,u=f[I]||(f[I]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),h=c[e]||[],d=h[0]===P&&h[1],y=d),!1===y)for(;(f=++d&&f&&f[g]||(y=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++y||(b&&(u=f[I]||(f[I]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),c[e]=[P,y]),f!==t)););return(y-=r)===n||y%n==0&&y/n>=0}}},PSEUDO:function(e,i){var r,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[I]?s(i):s.length>1?(r=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=s(e,i),o=r.length;o--;)n=Q(e,r[o]),e[n]=!(t[n]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:n(function(e){var t=[],i=[],r=T(e.replace(se,"$1"));return r[I]?n(function(e,t,i,n){for(var s,o=r(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,n,s){return t[0]=e,r(t,null,s,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(be,ye),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var i;do{if(i=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return de.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,i){return[0>i?i+t:i]}),even:a(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:a(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:a(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:a(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(b);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,_=t.tokenize=function(e,i){var n,r,s,o,a,l,h,c=q[e+" "];if(c)return i?0:c.slice(0);for(a=e,l=[],h=w.preFilter;a;){n&&!(r=oe.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=ae.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(se," ")}),a=a.slice(n.length));for(o in w.filter)!(r=ue[o].exec(a))||h[o]&&!(r=h[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):q(e,l).slice(0)},T=t.compile=function(e,t){var i,n=[],r=[],s=z[e+" "];if(!s){for(t||(t=_(e)),i=t.length;i--;)s=v(t[i]),s[I]?n.push(s):r.push(s);s=z(e,m(r,n)),s.selector=e}return s},C=t.select=function(e,t,i,n){var r,s,o,a,h,u="function"==typeof e&&e,f=!n&&_(e=u.selector||e);if(i=i||[],1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&y.getById&&9===t.nodeType&&R&&w.relative[s[1].type]){if(!(t=(w.find.ID(o.matches[0].replace(be,ye),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=ue.needsContext.test(e)?0:s.length;r--&&(o=s[r],!w.relative[a=o.type]);)if((h=w.find[a])&&(n=h(o.matches[0].replace(be,ye),ve.test(s[0].type)&&l(t.parentNode)||t))){if(s.splice(r,1),!(e=n.length&&c(s)))return J.apply(i,n),i;break}}return(u||T(e,f))(n,t,!R,i,!t||ve.test(e)&&l(t.parentNode)||t),i},y.sortStable=I.split("").sort(W).join("")===I,y.detectDuplicates=!!M,A(),y.sortDetached=r(function(e){return 1&e.compareDocumentPosition(G.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(K,function(e,t,i){var n;return i?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);se.find=ce,se.expr=ce.selectors,se.expr[":"]=se.expr.pseudos,se.uniqueSort=se.unique=ce.uniqueSort,se.text=ce.getText,se.isXMLDoc=ce.isXML,se.contains=ce.contains;var ue=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&se(e).is(i))break;n.push(e)}return n},fe=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},de=se.expr.match.needsContext,pe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ge=/^.[^:#\[\.,]*$/;se.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?se.find.matchesSelector(n,e)?[n]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},se.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;i>t;t++)if(se.contains(r[t],this))return!0}));for(t=0;i>t;t++)se.find(e,r[t],n);return n=this.pushStack(i>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&de.test(e)?se(e):e||[],!1).length}});var ve,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(se.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||ve,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:me.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof se?t[0]:t,se.merge(this,se.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),pe.test(n[1])&&se.isPlainObject(t))for(n in t)se.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=X.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?void 0!==i.ready?i.ready(e):e(se):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))}).prototype=se.fn,ve=se(X);var be=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};se.fn.extend({has:function(e){var t=se(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(se.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,s=[],o=de.test(e)||"string"!=typeof e?se(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?se.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?K.call(se(e),this[0]):K.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(se.uniqueSort(se.merge(this.get(),se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,i){return ue(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,i){return ue(e,"nextSibling",i)},prevUntil:function(e,t,i){return ue(e,"previousSibling",i)},siblings:function(e){return fe((e.parentNode||{}).firstChild,e)},children:function(e){return fe(e.firstChild)},contents:function(e){return e.contentDocument||se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(i,n){var r=se.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=se.filter(n,r)),this.length>1&&(ye[e]||se.uniqueSort(r),be.test(e)&&r.reverse()),this.pushStack(r)}});var we=/\S+/g;se.Callbacks=function(e){e="string"==typeof e?s(e):se.extend({},e);var t,i,n,r,o=[],a=[],l=-1,h=function(){for(r=e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(l=o.length-1,a.push(i)),function t(i){se.each(i,function(i,n){se.isFunction(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==se.type(n)&&t(n)})}(arguments),i&&!t&&h()),this},remove:function(){return se.each(arguments,function(e,t){for(var i;(i=se.inArray(t,o,i))>-1;)o.splice(i,1),l>=i&&l--}),this},has:function(e){return e?se.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||(o=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(i){se.each(t,function(t,s){var o=se.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[s[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,n):n}},r={};return n.pipe=n.then,se.each(t,function(e,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,s=J.call(arguments),o=s.length,a=1!==o||e&&se.isFunction(e.promise)?o:0,l=1===a?e:se.Deferred(),h=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?J.call(arguments):r,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)s[r]&&se.isFunction(s[r].promise)?s[r].promise().progress(h(r,i,t)).done(h(r,n,s)).fail(l.reject):--a;return a||l.resolveWith(n,s),l.promise()}});var xe;se.fn.ready=function(e){return se.ready.promise().done(e),this},se.extend({isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){(!0===e?--se.readyWait:se.isReady)||(se.isReady=!0,!0!==e&&--se.readyWait>0||(xe.resolveWith(X,[se]),se.fn.triggerHandler&&(se(X).triggerHandler("ready"),se(X).off("ready"))))}}),se.ready.promise=function(t){return xe||(xe=se.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(se.ready):(X.addEventListener("DOMContentLoaded",o),e.addEventListener("load",o))),xe.promise(t)},se.ready.promise();var ke=function(e,t,i,n,r,s,o){var a=0,l=e.length,h=null==i;if("object"===se.type(i)){r=!0;for(a in i)ke(e,t,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,se.isFunction(n)||(o=!0),h&&(o?(t.call(e,n),t=null):(h=t,t=function(e,t,i){return h.call(se(e),i)})),t))for(;l>a;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return r?e:h?t.call(e):l?t(e[0],i):s},_e=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!_e(e))return{};var t=e[this.expando];return t||(t={},_e(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[t]=i;else for(n in t)r[n]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,se.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,s=e[this.expando];if(void 0!==s){if(void 0===t)this.register(e);else{se.isArray(t)?n=t.concat(t.map(se.camelCase)):(r=se.camelCase(t),t in s?n=[t,r]:(n=r,n=n in s?[n]:n.match(we)||[])),i=n.length;for(;i--;)delete s[n[i]]}(void 0===t||se.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!se.isEmptyObject(t)}};var Te=new a,Ce=new a,Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fe=/[A-Z]/g;se.extend({hasData:function(e){return Ce.hasData(e)||Te.hasData(e)},data:function(e,t,i){return Ce.access(e,t,i)},removeData:function(e,t){Ce.remove(e,t)},_data:function(e,t,i){return Te.access(e,t,i)},_removeData:function(e,t){Te.remove(e,t)}}),se.fn.extend({data:function(e,t){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=Ce.get(s),1===s.nodeType&&!Te.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),l(s,n,r[n])));Te.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Ce.set(this,e)}):ke(this,function(t){var i,n;if(s&&void 0===t){if(void 0!==(i=Ce.get(s,e)||Ce.get(s,e.replace(Fe,"-$&").toLowerCase())))return i;if(n=se.camelCase(e),void 0!==(i=Ce.get(s,n)))return i;if(void 0!==(i=l(s,n,void 0)))return i}else n=se.camelCase(e),this.each(function(){var i=Ce.get(this,n);Ce.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&Ce.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ce.remove(this,e)})}}),se.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=Te.get(e,t),i&&(!n||se.isArray(i)?n=Te.access(e,t,se.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=se.queue(e,t),n=i.length,r=i.shift(),s=se._queueHooks(e,t),o=function(){se.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Te.get(e,i)||Te.access(e,i,{empty:se.Callbacks("once memory").add(function(){Te.remove(e,[t+"queue",i])})})}}),se.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?se.queue(this[0],e):void 0===t?this:this.each(function(){var i=se.queue(this,e,t);se._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=se.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=Te.get(s[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var Me=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=new RegExp("^(?:([+-])=|)("+Me+")([a-z%]*)$","i"),Ge=["Top","Right","Bottom","Left"],Le=function(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)},Re=/^(?:checkbox|radio)$/i,He=/<([\w:-]+)/,De=/^$|\/(?:java|ecma)script/i,Ee={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ee.optgroup=Ee.option,Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td;var Be=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),i=X.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ie=/^key/,Ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Pe=/^([^.]*)(?:\.(.+)|)/;se.event={global:{},add:function(e,t,i,n,r){var s,o,a,l,h,c,u,f,d,p,g,v=Te.get(e);if(v)for(i.handler&&(s=i,i=s.handler,r=s.selector),i.guid||(i.guid=se.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(t){return void 0!==se&&se.event.triggered!==t.type?se.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],h=t.length;h--;)a=Pe.exec(t[h])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(u=se.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=se.event.special[d]||{},c=se.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&se.expr.match.needsContext.test(r),namespace:p.join(".")},s),(f=l[d])||(f=l[d]=[],f.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,p,o)||e.addEventListener&&e.addEventListener(d,o)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),se.event.global[d]=!0)},remove:function(e,t,i,n,r){var s,o,a,l,h,c,u,f,d,p,g,v=Te.hasData(e)&&Te.get(e);if(v&&(l=v.events)){for(t=(t||"").match(we)||[""],h=t.length;h--;)if(a=Pe.exec(t[h])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(u=se.event.special[d]||{},d=(n?u.delegateType:u.bindType)||d,f=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=f.length;s--;)c=f[s],!r&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(f.splice(s,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(e,c));o&&!f.length&&(u.teardown&&!1!==u.teardown.call(e,p,v.handle)||se.removeEvent(e,d,v.handle),delete l[d])}else for(d in l)se.event.remove(e,d+t[h],i,n,!0);se.isEmptyObject(l)&&Te.remove(e,"handle events")}},dispatch:function(e){e=se.event.fix(e);var t,i,n,r,s,o=[],a=J.call(arguments),l=(Te.get(this,"events")||{})[e.type]||[],h=se.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,e)){for(o=se.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(s.namespace)||(e.handleObj=s,e.data=s.data,void 0!==(n=((se.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(n=[],i=0;a>i;i++)s=t[i],r=s.selector+" ",void 0===n[r]&&(n[r]=s.needsContext?se(r,this).index(l)>-1:se.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||X,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[se.expando])return e;var t,i,n,r=e.type,s=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Ne.test(r)?this.mouseHooks:Ie.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new se.Event(s),t=n.length;t--;)i=n[t],e[i]=s[i];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&se.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},se.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},se.Event=function(e,t){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?d:p):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(e,t)},se.Event.prototype={constructor:se.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===n||se.contains(n,r))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),se.fn.extend({on:function(e,t,i,n){return v(this,e,t,i,n)},one:function(e,t,i,n){return v(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,se(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=p),this.each(function(){se.event.remove(this,e,i,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Oe=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;se.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,i){var n,r,s,o,a=e.cloneNode(!0),l=se.contains(e.ownerDocument,e);if(!(ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(o=c(a),s=c(e),n=0,r=s.length;r>n;n++)x(s[n],o[n]);if(t)if(i)for(s=s||c(e),o=o||c(a),n=0,r=s.length;r>n;n++)w(s[n],o[n]);else w(e,a);return o=c(a,"script"),o.length>0&&u(o,!l&&c(e,"script")),a},cleanData:function(e){for(var t,i,n,r=se.event.special,s=0;void 0!==(i=e[s]);s++)if(_e(i)){if(t=i[Te.expando]){if(t.events)for(n in t.events)r[n]?se.event.remove(i,n):se.removeEvent(i,n,t.handle);i[Te.expando]=void 0}i[Ce.expando]&&(i[Ce.expando]=void 0)}}}),se.fn.extend({domManip:k,detach:function(e){return _(this,e,!0)},remove:function(e){return _(this,e)},text:function(e){return ke(this,function(e){return void 0===e?se.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){m(this,e).appendChild(e)}})},prepend:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(se.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return ke(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Ee[(He.exec(e)||["",""])[1].toLowerCase()]){e=se.htmlPrefilter(e);try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(se.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return k(this,arguments,function(t){var i=this.parentNode;se.inArray(this,e)<0&&(se.cleanData(c(this)),i&&i.replaceChild(t,this))},e)}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var i,n=[],r=se(e),s=r.length-1,o=0;s>=o;o++)i=o===s?this:this.clone(!0),se(r[o])[t](i),Q.apply(n,i.get());return this.pushStack(n)}});var Ve,Ue={HTML:"block",BODY:"block"},$e=/^margin/,Ye=new RegExp("^("+Me+")(?!px)[a-z%]+$","i"),Xe=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Je=function(e,t,i,n){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,n||[]);for(s in t)e.style[s]=o[s];return r},Ze=X.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ze.appendChild(o);var t=e.getComputedStyle(a);i="1%"!==t.top,s="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,Ze.removeChild(o)}var i,n,r,s,o=X.createElement("div"),a=X.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),se.extend(ne,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},pixelMarginRight:function(){return null==n&&t(),r},reliableMarginLeft:function(){return null==n&&t(),s},reliableMarginRight:function(){var t,i=a.appendChild(X.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",Ze.appendChild(o),t=!parseFloat(e.getComputedStyle(i).marginRight),Ze.removeChild(o),a.removeChild(i),t}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,Ke={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"},tt=["Webkit","O","Moz","ms"],it=X.createElement("div").style;se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=S(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=se.camelCase(t),l=e.style;return t=se.cssProps[a]||(se.cssProps[a]=M(a)||a),o=se.cssHooks[t]||se.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:l[t]:(s=typeof i,"string"===s&&(r=Ae.exec(i))&&r[1]&&(i=h(e,t,r),s="number"),void(null!=i&&i===i&&("number"===s&&(i+=r&&r[3]||(se.cssNumber[a]?"":"px")),ne.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l[t]=i))))}},css:function(e,t,i,n){var r,s,o,a=se.camelCase(t);return t=se.cssProps[a]||(se.cssProps[a]=M(a)||a),o=se.cssHooks[t]||se.cssHooks[a],o&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=S(e,t,n)),"normal"===r&&t in et&&(r=et[t]),""===i||i?(s=parseFloat(r),!0===i||isFinite(s)?s||0:r):r}}),se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,i,n){return i?Qe.test(se.css(e,"display"))&&0===e.offsetWidth?Je(e,Ke,function(){return L(e,t,n)}):L(e,t,n):void 0},set:function(e,i,n){var r,s=n&&Xe(e),o=n&&G(e,t,n,"border-box"===se.css(e,"boxSizing",!1,s),s);return o&&(r=Ae.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=se.css(e,t)),A(e,i,o)}}}),se.cssHooks.marginLeft=F(ne.reliableMarginLeft,function(e,t){return t?(parseFloat(S(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),se.cssHooks.marginRight=F(ne.reliableMarginRight,function(e,t){return t?Je(e,{display:"inline-block"},S,[e,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+Ge[n]+t]=s[n]||s[n-2]||s[0];return r}},$e.test(e)||(se.cssHooks[e+t].set=A)}),se.fn.extend({css:function(e,t){return ke(this,function(e,t,i){var n,r,s={},o=0;if(se.isArray(t)){for(n=Xe(e),r=t.length;r>o;o++)s[t[o]]=se.css(e,t[o],!1,n);return s}return void 0!==i?se.style(e,t,i):se.css(e,t)},e,t,arguments.length>1)},show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Le(this)?se(this).show():se(this).hide()})}}),se.Tween=H,H.prototype={constructor:H,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||se.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(se.cssNumber[i]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,i=H.propHooks[this.prop];return this.options.duration?this.pos=t=se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[se.cssProps[e.prop]]&&!se.cssHooks[e.prop]?e.elem[e.prop]=e.now:se.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},se.fx=H.prototype.init,se.fx.step={};var nt,rt,st=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;se.Animation=se.extend(P,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return h(i.elem,e,Ae.exec(t),i),i}]},tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var i,n=0,r=e.length;r>n;n++)i=e[n],P.tweeners[i]=P.tweeners[i]||[],P.tweeners[i].unshift(t)},prefilters:[I],prefilter:function(e,t){t?P.prefilters.unshift(e):P.prefilters.push(e)}}),se.speed=function(e,t,i){var n=e&&"object"==typeof e?se.extend({},e):{complete:i||!i&&t||se.isFunction(e)&&e,duration:e,easing:i&&t||t&&!se.isFunction(t)&&t};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Le).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=se.isEmptyObject(e),s=se.speed(t,i,n),o=function(){var t=P(this,se.extend({},e),s);(r||Te.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=se.timers,o=Te.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&ot.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(i),t=!1,s.splice(r,1));!t&&i||se.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Te.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],s=se.timers,o=n?n.length:0;for(i.finish=!0,se.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(e,t){var i=se.fn[t];se.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(E(t,!0),e,n,r)}}),se.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),se.timers=[],se.fx.tick=function(){var e,t=0,i=se.timers;for(nt=se.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||se.fx.stop(),nt=void 0},se.fx.timer=function(e){se.timers.push(e),e()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){rt||(rt=e.setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){e.clearInterval(rt),rt=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,i){return t=se.fx?se.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),i=t.appendChild(X.createElement("option"));e.type="checkbox",ne.checkOn=""!==e.value,ne.optSelected=i.selected,t.disabled=!0,ne.optDisabled=!i.disabled,e=X.createElement("input"),e.value="t",e.type="radio",ne.radioValue="t"===e.value}();var at,lt=se.expr.attrHandle;se.fn.extend({attr:function(e,t){return ke(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})}}),se.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?se.prop(e,t,i):(1===s&&se.isXMLDoc(e)||(t=t.toLowerCase(),r=se.attrHooks[t]||(se.expr.match.bool.test(t)?at:void 0)),void 0!==i?null===i?void se.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=se.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&se.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,r=0,s=t&&t.match(we);if(s&&1===e.nodeType)for(;i=s[r++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),at={set:function(e,t,i){return!1===t?se.removeAttr(e,i):e.setAttribute(i,i),i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,t){var i=lt[t]||se.find.attr;lt[t]=function(e,t,n){var r,s;return n||(s=lt[t],lt[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,lt[t]=s),r}});var ht=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;se.fn.extend({prop:function(e,t){return ke(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[se.propFix[e]||e]})}}),se.extend({prop:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&se.isXMLDoc(e)||(t=se.propFix[t]||t,r=se.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=se.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ne.optSelected||(se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this});var ut=/[\t\r\n\f]/g;se.fn.extend({addClass:function(e){var t,i,n,r,s,o,a,l=0;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,j(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];i=this[l++];)if(r=j(i),n=1===i.nodeType&&(" "+r+" ").replace(ut," ")){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=se.trim(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,s,o,a,l=0;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,j(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];i=this[l++];)if(r=j(i),n=1===i.nodeType&&(" "+r+" ").replace(ut," ")){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");a=se.trim(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):se.isFunction(e)?this.each(function(i){se(this).toggleClass(e.call(this,i,j(this),t),t)}):this.each(function(){var t,n,r,s;if("string"===i)for(n=0,r=se(this),s=e.match(we)||[];t=s[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||(t=j(this),t&&Te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Te.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+j(i)+" ").replace(ut," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,dt=/[\x20\t\r\n\f]+/g;se.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=se.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,se(this).val()):e,null==r?r="":"number"==typeof r?r+="":se.isArray(r)&&(r=se.map(r,function(e){return null==e?"":e+""})),(t=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=se.valHooks[r.type]||se.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(ft,""):null==i?"":i)):void 0}}),se.extend({valHooks:{option:{get:function(e){var t=se.find.attr(e,"value");return null!=t?t:se.trim(se.text(e)).replace(dt," ")}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,o=s?null:[],a=s?r+1:n.length,l=0>r?a:s?r:0;a>l;l++)if(i=n[l],(i.selected||l===r)&&(ne.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!se.nodeName(i.parentNode,"optgroup"))){if(t=se(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,s=se.makeArray(t),o=r.length;o--;)n=r[o],(n.selected=se.inArray(se.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){return se.isArray(t)?e.checked=se.inArray(se(e).val(),t)>-1:void 0}},ne.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var pt=/^(?:focusinfocus|focusoutblur)$/;se.extend(se.event,{trigger:function(t,i,n,r){var s,o,a,l,h,c,u,f=[n||X],d=ie.call(t,"type")?t.type:t,p=ie.call(t,"namespace")?t.namespace.split("."):[];if(o=a=n=n||X,3!==n.nodeType&&8!==n.nodeType&&!pt.test(d+se.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),h=d.indexOf(":")<0&&"on"+d,t=t[se.expando]?t:new se.Event(d,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:se.makeArray(i,[t]),u=se.event.special[d]||{},r||!u.trigger||!1!==u.trigger.apply(n,i))){if(!r&&!u.noBubble&&!se.isWindow(n)){for(l=u.delegateType||d,pt.test(l+d)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(n.ownerDocument||X)&&f.push(a.defaultView||a.parentWindow||e)}for(s=0;(o=f[s++])&&!t.isPropagationStopped();)t.type=s>1?l:u.bindType||d,c=(Te.get(o,"events")||{})[t.type]&&Te.get(o,"handle"),c&&c.apply(o,i),(c=h&&o[h])&&c.apply&&_e(o)&&(t.result=c.apply(o,i),!1===t.result&&t.preventDefault());return t.type=d,r||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),i)||!_e(n)||h&&se.isFunction(n[d])&&!se.isWindow(n)&&(a=n[h],a&&(n[h]=null),se.event.triggered=d,n[d](),se.event.triggered=void 0,a&&(n[h]=a)),t.result}},simulate:function(e,t,i){var n=se.extend(new se.Event,i,{type:e,isSimulated:!0});se.event.trigger(n,null,t)}}),se.fn.extend({trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?se.event.trigger(e,t,i,!0):void 0}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ne.focusin="onfocusin"in e,ne.focusin||se.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){se.event.simulate(t,e.target,se.event.fix(e))};se.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=Te.access(n,t);r||n.addEventListener(e,i,!0),Te.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Te.access(n,t)-1;r?Te.access(n,t,r):(n.removeEventListener(e,i,!0),Te.remove(n,t))}}});var gt=e.location,vt=se.now(),mt=/\?/;se.parseJSON=function(e){return JSON.parse(e+"")},se.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+t),i};var bt=/#.*$/,yt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kt=/^(?:GET|HEAD)$/,_t=/^\/\//,Tt={},Ct={},St="*/".concat("*"),Ft=X.createElement("a");Ft.href=gt.href,se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:xt.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":St,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,se.ajaxSettings),t):z(se.ajaxSettings,e)},ajaxPrefilter:O(Tt),ajaxTransport:O(Ct),ajax:function(t,i){function n(t,i,n,a){var h,u,b,y,x,_=i;2!==w&&(w=2,l&&e.clearTimeout(l),r=void 0,o=a||"",k.readyState=t>0?4:0,h=t>=200&&300>t||304===t,n&&(y=W(f,k,n)),y=V(f,y,k,h),h?(f.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(se.lastModified[s]=x),(x=k.getResponseHeader("etag"))&&(se.etag[s]=x)),204===t||"HEAD"===f.type?_="nocontent":304===t?_="notmodified":(_=y.state,u=y.data,b=y.error,h=!b)):(b=_,!t&&_||(_="error",0>t&&(t=0))),k.status=t,k.statusText=(i||_)+"",h?g.resolveWith(d,[u,_,k]):g.rejectWith(d,[k,_,b]),k.statusCode(m),m=void 0,c&&p.trigger(h?"ajaxSuccess":"ajaxError",[k,f,h?u:b]),v.fireWith(d,[k,_]),c&&(p.trigger("ajaxComplete",[k,f]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,s,o,a,l,h,c,u,f=se.ajaxSetup({},i),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?se(d):se.event,g=se.Deferred(),v=se.Callbacks("once memory"),m=f.statusCode||{},b={},y={},w=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!a)for(a={};t=wt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return w||(e=y[i]=y[i]||e,b[e]=t),this},overrideMimeType:function(e){return w||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return r&&r.abort(t),n(0,t),this}};if(g.promise(k).complete=v.add,k.success=k.done,k.error=k.fail,f.url=((t||f.url||gt.href)+"").replace(bt,"").replace(_t,gt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=se.trim(f.dataType||"*").toLowerCase().match(we)||[""],null==f.crossDomain){h=X.createElement("a");try{h.href=f.url,h.href=h.href,f.crossDomain=Ft.protocol+"//"+Ft.host!=h.protocol+"//"+h.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=se.param(f.data,f.traditional)),q(Tt,f,i,k),2===w)return k;c=se.event&&f.global,c&&0==se.active++&&se.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!kt.test(f.type),s=f.url,f.hasContent||(f.data&&(s=f.url+=(mt.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=yt.test(s)?s.replace(yt,"$1_="+vt++):s+(mt.test(s)?"&":"?")+"_="+vt++)),f.ifModified&&(se.lastModified[s]&&k.setRequestHeader("If-Modified-Since",se.lastModified[s]),se.etag[s]&&k.setRequestHeader("If-None-Match",se.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+St+"; q=0.01":""):f.accepts["*"]);for(u in f.headers)k.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(!1===f.beforeSend.call(d,k,f)||2===w))return k.abort();x="abort";for(u in{success:1,error:1,complete:1})k[u](f[u]);if(r=q(Ct,f,i,k)){if(k.readyState=1,c&&p.trigger("ajaxSend",[k,f]),2===w)return k;f.async&&f.timeout>0&&(l=e.setTimeout(function(){k.abort("timeout")},f.timeout));try{w=1,r.send(b,n)}catch(e){if(!(2>w))throw e;n(-1,e)}}else n(-1,"No Transport");return k},getJSON:function(e,t,i){return se.get(e,t,i,"json")},getScript:function(e,t){return se.get(e,void 0,t,"script")}}),se.each(["get","post"],function(e,t){se[t]=function(e,i,n,r){return se.isFunction(i)&&(r=r||n,n=i,i=void 0),se.ajax(se.extend({url:e,type:t,dataType:r,data:i,success:n},se.isPlainObject(e)&&e))}}),se._evalUrl=function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},se.fn.extend({wrapAll:function(e){var t;return se.isFunction(e)?this.each(function(t){se(this).wrapAll(e.call(this,t))}):(this[0]&&(t=se(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return se.isFunction(e)?this.each(function(t){se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=se(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(i){se(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(e){return!se.expr.filters.visible(e)},se.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Mt=/%20/g,At=/\[\]$/,Gt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;se.param=function(e,t){var i,n=[],r=function(e,t){t=se.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){r(this.name,this.value)});else for(i in e)U(i,e[i],t,r);return n.join("&").replace(Mt,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&Rt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!Re.test(e))}).map(function(e,t){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(e){return{name:t.name,value:e.replace(Gt,"\r\n")}}):{name:t.name,value:i.replace(Gt,"\r\n")}}).get()}}),se.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Dt=se.ajaxSettings.xhr();ne.cors=!!Dt&&"withCredentials"in Dt,ne.ajax=Dt=!!Dt,se.ajaxTransport(function(t){var i,n;return ne.cors||Dt&&!t.crossDomain?{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);i=function(e){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Ht[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}:void 0}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=se("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Et=[],Bt=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Et.pop()||se.expando+"_"+vt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(t,i,n){var r,s,o,a=!1!==t.jsonp&&(Bt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=se.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Bt,"$1"+r):!1!==t.jsonp&&(t.url+=(mt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||se.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){o=arguments},n.always(function(){void 0===s?se(e).removeProp(r):e[r]=s,t[r]&&(t.jsonpCallback=i.jsonpCallback,Et.push(r)),o&&se.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),se.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||X;var n=pe.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=f([e],t,r),r&&r.length&&se(r).remove(),se.merge([],n.childNodes))};var It=se.fn.load;se.fn.load=function(e,t,i){if("string"!=typeof e&&It)return It.apply(this,arguments);var n,r,s,o=this,a=e.indexOf(" ");return a>-1&&(n=se.trim(e.slice(a)),e=e.slice(0,a)),se.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&se.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?se("<div>").append(se.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,s||[e.responseText,t,e])})}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length},se.offset={setOffset:function(e,t,i){var n,r,s,o,a,l,h,c=se.css(e,"position"),u=se(e),f={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=se.css(e,"top"),l=se.css(e,"left"),h=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,h?(n=u.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),se.isFunction(t)&&(t=t.call(e,i,se.extend({},a))),null!=t.top&&(f.top=t.top-a.top+o),null!=t.left&&(f.left=t.left-a.left+r),"using"in t?t.using.call(e,f):u.css(f)}},se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){se.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;return s?(t=s.documentElement,se.contains(t,n)?(r=n.getBoundingClientRect(),i=$(s),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===se.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(n=e.offset()),n.top+=se.css(e[0],"borderTopWidth",!0),n.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-se.css(i,"marginTop",!0),left:t.left-n.left-se.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===se.css(e,"position");)e=e.offsetParent;return e||Ze})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;se.fn[e]=function(n){return ke(this,function(e,n,r){var s=$(e);return void 0===r?s?s[t]:e[n]:void(s?s.scrollTo(i?s.pageXOffset:r,i?r:s.pageYOffset):e[n]=r)},e,n,arguments.length)}}),se.each(["top","left"],function(e,t){se.cssHooks[t]=F(ne.pixelPosition,function(e,i){return i?(i=S(e,t),Ye.test(i)?se(e).position()[t]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(e,t){se.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){se.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===r?"margin":"border");return ke(this,function(t,i,n){var r;return se.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?se.css(t,i,o):se.style(t,i,n,o)},t,s?n:void 0,s,null)}})}),se.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),se.fn.andSelf=se.fn.addBack;var Nt=e.jQuery,Pt=e.$;return se.noConflict=function(t){return e.$===se&&(e.$=Pt),t&&e.jQuery===se&&(e.jQuery=Nt),se},t||(e.jQuery=e.$=se),se})},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){!function(t){var i=this;e.exports=t(i)}(function(e){"use strict";function t(e,t){return"object"==typeof e&&null!==e&&(e.constructor===t||Object.prototype.toString.call(e)==="[object "+t.name+"]")}function i(e,i){return!i&&t(e,Array)?e:Array.prototype.slice.call(e)}function n(e,t){return void 0!==e?e:t}function r(e,i,s,o){if(r.is(e)){var a=e.slice(i,i+s);return a._littleEndian=n(o,a._littleEndian),a}if(!r.is(this))return new r(e,i,s,o);if(this.buffer=e=r.wrapBuffer(e),this._isArrayBuffer=h.ArrayBuffer&&t(e,ArrayBuffer),this._isPixelData=h.PixelData&&t(e,CanvasPixelArray),this._isDataView=h.DataView&&this._isArrayBuffer,this._isNodeBuffer=!1,!this._isArrayBuffer&&!this._isPixelData&&!t(e,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!o;var l="byteLength"in e?e.byteLength:e.length;this.byteOffset=i=n(i,0),this.byteLength=s=n(s,l-i),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(e,i,s):this._checkBounds(i,s,l),this._engineAction=this._isDataView?this._dataViewAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function s(e){for(var t=h.ArrayBuffer?Uint8Array:Array,i=new t(e.length),n=0,r=e.length;r>n;n++)i[n]=255&e.charCodeAt(n);return i}function o(e){return e>=0&&31>e?1<<e:o[e]||(o[e]=Math.pow(2,e))}function a(e,t){this.lo=e,this.hi=t}function l(){a.apply(this,arguments)}var h={NodeBuffer:!1,DataView:"DataView"in e,ArrayBuffer:"ArrayBuffer"in e,PixelData:"CanvasPixelArray"in e&&!("Uint8ClampedArray"in e)&&"document"in e},c=e.TextEncoder,u=e.TextDecoder;if(h.PixelData)var f=document.createElement("canvas").getContext("2d"),d=function(e,t){var i=f.createImageData((e+3)/4,1).data;if(i.byteLength=e,void 0!==t)for(var n=0;e>n;n++)i[n]=t[n];return i};var p={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};r.wrapBuffer=function(e){switch(typeof e){case"number":if(h.ArrayBuffer)e=new Uint8Array(e).buffer;else if(h.PixelData)e=d(e);else{e=new Array(e);for(var n=0;n<e.length;n++)e[n]=0}return e;case"string":e=s(e);default:return"length"in e&&!(h.ArrayBuffer&&t(e,ArrayBuffer)||h.PixelData&&t(e,CanvasPixelArray))&&(h.ArrayBuffer?t(e,ArrayBuffer)||(e=new Uint8Array(e).buffer,t(e,ArrayBuffer)||(e=new Uint8Array(i(e,!0)).buffer)):e=h.PixelData?d(e.length,e):i(e)),e}},r.is=function(e){return e&&e.jDataView},r.from=function(){return new r(arguments)},r.Uint64=a,a.prototype={valueOf:function(){return this.lo+o(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},a.fromNumber=function(e){var t=Math.floor(e/o(32));return new a(e-t*o(32),t)},r.Int64=l,l.prototype="create"in Object?Object.create(a.prototype):new a,l.prototype.valueOf=function(){return this.hi<o(31)?a.prototype.valueOf.apply(this,arguments):-(o(32)-this.lo+o(32)*(o(32)-1-this.hi))},l.fromNumber=function(e){var t,i;if(e>=0){var n=a.fromNumber(e);t=n.lo,i=n.hi}else i=Math.floor(e/o(32)),t=e-i*o(32),i+=o(32);return new l(t,i)};var g=r.prototype={compatibility:h,jDataView:!0,_checkBounds:function(e,t,i){if("number"!=typeof e)throw new TypeError("Offset is not a number.");if("number"!=typeof t)throw new TypeError("Size is not a number.");if(0>t)throw new RangeError("Length is negative.");if(0>e||e+t>n(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(e,t,i,r,s){return this._engineAction(e,t,n(i,this._offset),n(r,this._littleEndian),s)},_dataViewAction:function(e,t,i,n,r){return this._offset=i+p[e],t?this._view["get"+e](i,n):this._view["set"+e](i,r,n)},_arrayBufferAction:function(t,i,r,s,o){var a,l=p[t],h=e[t+"Array"];if(s=n(s,this._littleEndian),1===l||(this.byteOffset+r)%l==0&&s)return a=new h(this.buffer,this.byteOffset+r,1),this._offset=r+l,i?a[0]:a[0]=o;var c=new Uint8Array(i?this.getBytes(l,r,s,!0):l);return a=new h(c.buffer,0,1),i?a[0]:(a[0]=o,void this._setBytes(r,c,s))},_arrayAction:function(e,t,i,n,r){return t?this["_get"+e](i,n):this["_set"+e](i,r,n)},_getBytes:function(e,t,r){r=n(r,this._littleEndian),t=n(t,this._offset),e=n(e,this.byteLength-t),this._checkBounds(t,e),t+=this.byteOffset,this._offset=t-this.byteOffset+e;var s=this._isArrayBuffer?new Uint8Array(this.buffer,t,e):(this.buffer.slice||Array.prototype.slice).call(this.buffer,t,t+e);return r||1>=e?s:i(s).reverse()},getBytes:function(e,t,r,s){var o=this._getBytes(e,t,n(r,!0));return s?i(o):o},_setBytes:function(e,t,r){var s=t.length;if(0!==s){if(r=n(r,this._littleEndian),e=n(e,this._offset),this._checkBounds(e,s),!r&&s>1&&(t=i(t,!0).reverse()),e+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,e,s).set(t);else for(var o=0;s>o;o++)this.buffer[e+o]=t[o];this._offset=e-this.byteOffset+s}},setBytes:function(e,t,i){this._setBytes(e,t,n(i,!0))},getString:function(e,t,i){var n=this._getBytes(e,t,!0);if(i="utf8"===i?"utf-8":i||"binary",u&&"binary"!==i)return new u(i).decode(this._isArrayBuffer?n:new Uint8Array(n));var r="";e=n.length;for(var s=0;e>s;s++)r+=String.fromCharCode(n[s]);return"utf-8"===i&&(r=decodeURIComponent(escape(r))),r},setString:function(e,t,i){i="utf8"===i?"utf-8":i||"binary";var n;c&&"binary"!==i?n=new c(i).encode(t):("utf-8"===i&&(t=unescape(encodeURIComponent(t))),n=s(t)),this._setBytes(e,n,!0)},getChar:function(e){return this.getString(1,e)},setChar:function(e,t){this.setString(e,t)},tell:function(){return this._offset},seek:function(e){return this._checkBounds(e,0),this._offset=e},skip:function(e){return this.seek(this._offset+e)},slice:function(e,t,i){function s(e,t){return 0>e?e+t:e}return e=s(e,this.byteLength),t=s(n(t,this.byteLength),this.byteLength),i?new r(this.getBytes(t-e,e,!0,!0),void 0,void 0,this._littleEndian):new r(this.buffer,this.byteOffset+e,t-e,this._littleEndian)},alignBy:function(e){return this._bitOffset=0,1!==n(e,1)?this.skip(e-(this._offset%e||e)):this._offset},_getFloat64:function(e,t){var i=this._getBytes(8,e,t),n=1-2*(i[7]>>7),r=((i[7]<<1&255)<<3|i[6]>>4)-1023,s=(15&i[6])*o(48)+i[5]*o(40)+i[4]*o(32)+i[3]*o(24)+i[2]*o(16)+i[1]*o(8)+i[0];return 1024===r?0!==s?NaN:1/0*n:-1023===r?n*s*o(-1074):n*(1+s*o(-52))*o(r)},_getFloat32:function(e,t){var i=this._getBytes(4,e,t),n=1-2*(i[3]>>7),r=(i[3]<<1&255|i[2]>>7)-127,s=(127&i[2])<<16|i[1]<<8|i[0];return 128===r?0!==s?NaN:1/0*n:-127===r?n*s*o(-149):n*(1+s*o(-23))*o(r)},_get64:function(e,t,i){i=n(i,this._littleEndian),t=n(t,this._offset);for(var r=i?[0,4]:[4,0],s=0;2>s;s++)r[s]=this.getUint32(t+r[s],i);return this._offset=t+8,new e(r[0],r[1])},getInt64:function(e,t){return this._get64(l,e,t)},getUint64:function(e,t){return this._get64(a,e,t)},_getInt32:function(e,t){var i=this._getBytes(4,e,t);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(e,t){return this._getInt32(e,t)>>>0},_getInt16:function(e,t){return this._getUint16(e,t)<<16>>16},_getUint16:function(e,t){var i=this._getBytes(2,e,t);return i[1]<<8|i[0]},_getInt8:function(e){return this._getUint8(e)<<24>>24},_getUint8:function(e){return this._getBytes(1,e)[0]},_getBitRangeData:function(e,t){var i=(n(t,this._offset)<<3)+this._bitOffset,r=i+e,s=i>>>3,o=r+7>>>3,a=this._getBytes(o-s,s,!0),l=0;(this._bitOffset=7&r)&&(this._bitOffset-=8);for(var h=0,c=a.length;c>h;h++)l=l<<8|a[h];return{start:s,bytes:a,wideValue:l}},getSigned:function(e,t){var i=32-e;return this.getUnsigned(e,t)<<i>>i},getUnsigned:function(e,t){var i=this._getBitRangeData(e,t).wideValue>>>-this._bitOffset;return 32>e?i&~(-1<<e):i},_setBinaryFloat:function(e,t,i,n,r){var s,a,l=0>t?1:0,h=~(-1<<n-1),c=1-h;0>t&&(t=-t),0===t?(s=0,a=0):isNaN(t)?(s=2*h+1,a=1):1/0===t?(s=2*h+1,a=0):(s=Math.floor(Math.log(t)/Math.LN2),s>=c&&h>=s?(a=Math.floor((t*o(-s)-1)*o(i)),s+=h):(a=Math.floor(t/o(c-i)),s=0));for(var u=[];i>=8;)u.push(a%256),a=Math.floor(a/256),i-=8;for(s=s<<i|a,n+=i;n>=8;)u.push(255&s),s>>>=8,n-=8;u.push(l<<n|s),this._setBytes(e,u,r)},_setFloat32:function(e,t,i){this._setBinaryFloat(e,t,23,8,i)},_setFloat64:function(e,t,i){this._setBinaryFloat(e,t,52,11,i)},_set64:function(e,t,i,r){"object"!=typeof i&&(i=e.fromNumber(i)),r=n(r,this._littleEndian),t=n(t,this._offset);var s=r?{lo:0,hi:4}:{lo:4,hi:0};for(var o in s)this.setUint32(t+s[o],i[o],r);this._offset=t+8},setInt64:function(e,t,i){this._set64(l,e,t,i)},setUint64:function(e,t,i){this._set64(a,e,t,i)},_setUint32:function(e,t,i){this._setBytes(e,[255&t,t>>>8&255,t>>>16&255,t>>>24],i)},_setUint16:function(e,t,i){this._setBytes(e,[255&t,t>>>8&255],i)},_setUint8:function(e,t){this._setBytes(e,[255&t])},setUnsigned:function(e,t,i){var n=this._getBitRangeData(i,e),r=n.wideValue,s=n.bytes;r&=~(~(-1<<i)<<-this._bitOffset),r|=(32>i?t&~(-1<<i):t)<<-this._bitOffset;for(var o=s.length-1;o>=0;o--)s[o]=255&r,r>>>=8;this._setBytes(n.start,s,!0)}};for(var v in p)!function(e){g["get"+e]=function(t,i){return this._action(e,!0,t,i)},g["set"+e]=function(t,i,n){this._action(e,!1,t,n,i)}}(v);g._setInt32=g._setUint32,g._setInt16=g._setUint16,g._setInt8=g._setUint8,g.setSigned=g.setUnsigned;for(var m in g)"set"===m.slice(0,3)&&function(e){g["write"+e]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+e].apply(this,arguments)}}(m.slice(3));return r})},function(e,t,i){"use strict";(function(e){i(4),i(6),i(7),e.Base=i(8),e.RTree=i(9),e.dallianceLib=i(10),e.jDataView=i(2),e.jParser=i(11),e.BWReader=i(12),e.VCFReader=i(13),e.Genoverse=i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(36),i(37),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),i(46),i(47),i(48),i(49),i(50),i(51),i(52),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(76),i(77),i(78),i(79),i(80)}).call(t,i(1))},function(e,t,i){(function(e){!function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),r=0,s=0,o=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(r=i.wheelDelta/120),i.detail&&(r=-i.detail/3),o=r,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(o=0,s=-1*r),void 0!==i.wheelDeltaY&&(o=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(s=-1*i.wheelDeltaX/120),n.unshift(t,r,s,o),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(e)}).call(t,i(0))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,i){(function(e){!function(e){e.fn.mousehold=function(t,i){if(t&&"function"==typeof t&&(i=t,t=100),i&&"function"==typeof i){var n=0,r=0;return this.each(function(){e(this).mousedown(function(){r=1;var e=0,s=this;n=setInterval(function(){e++,i.call(s,e),r=2},t)});var s=function(){clearInterval(n),1==r&&i.call(this,1),r=0};e(this).mouseout(s),e(this).mouseup(s)})}}}(e)}).call(t,i(0))},function(e,t,i){(function(e){!function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function i(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function n(t,i){this.$element=e(t),this.options=i,this.enabled=!0,this.fixTitle()}n.prototype={show:function(){var i=this.getTitle();if(i&&this.enabled){var n=this.tip();n.find(".tipsy-inner")[this.options.html?"html":"text"](i),n[0].className="tipsy",n.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var r,s=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),o=n[0].offsetWidth,a=n[0].offsetHeight,l=t(this.options.gravity,this.$element[0]);switch(l.charAt(0)){case"n":r={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-o/2};break;case"s":r={top:s.top-a-this.options.offset,left:s.left+s.width/2-o/2};break;case"e":r={top:s.top+s.height/2-a/2,left:s.left-o-this.options.offset};break;case"w":r={top:s.top+s.height/2-a/2,left:s.left+s.width+this.options.offset}}2==l.length&&("w"==l.charAt(1)?r.left=s.left+s.width/2-15:r.left=s.left+s.width/2-o+15),n.css(r).addClass("tipsy-"+l),n.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+l.charAt(0),this.options.className&&n.addClass(t(this.options.className,this.$element[0])),this.options.fade?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):n.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,i=this.options;this.fixTitle();var e,i=this.options;return"string"==typeof i.title?e=t.attr("title"==i.title?"original-title":i.title):"function"==typeof i.title&&(e=i.title.call(t[0])),(e=(""+e).replace(/(^\s*|\s*$)/,""))||i.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(i){var r=e.data(i,"tipsy");return r||(r=new n(i,e.fn.tipsy.elementOptions(i,t)),e.data(i,"tipsy",r)),r}function r(){var e=i(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function s(){var e=i(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"==e.hoverState&&e.hide()},t.delayOut)}if(!0===t)return this.data("tipsy");if("string"==typeof t){var o=this.data("tipsy");return o&&o[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var a=t.live?"live":"bind",l="hover"==t.trigger?"mouseenter":"focus",h="hover"==t.trigger?"mouseleave":"blur";this[a](l,r)[a](h,s)}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&i(t)||e(this).remove()})},e.fn.tipsy.elementOptions=function(t,i){return e.metadata?e.extend({},i,e(t).metadata()):i},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,i){return function(){var n={ns:i[0],ew:i.length>1&&i[1]},r=e(document).scrollTop()+t,s=e(document).scrollLeft()+t,o=e(this);return o.offset().top<r&&(n.ns="n"),o.offset().left<s&&(n.ew="w"),e(window).width()+e(document).scrollLeft()-o.offset().left<t&&(n.ew="e"),e(window).height()+e(document).scrollTop()-o.offset().top<t&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}}}(e)}).call(t,i(0))},function(e,t,i){!function(t,i,n){e.exports=n()}(0,0,function(){var e=function(){};return e.extend=function(t,i){var n=e.prototype.extend;e._prototyping=!0;var r=new this;n.call(r,t),r.base=function(){},delete e._prototyping;var s=r.constructor,o=r.constructor=function(){if(!e._prototyping)if(this._constructing||this.constructor===o)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(null!==arguments[0])return(arguments[0].extend||n).call(arguments[0],r)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=r,o.toString=this.toString,o.valueOf=function(e){return"object"===e?o:s.valueOf()},n.call(o,i),"function"==typeof o.init&&o.init(),o},e.prototype={extend:function(t,i){if(arguments.length>1){var n=this[t];if(n&&"function"==typeof i&&(!n.valueOf||n.valueOf()!==i.valueOf())&&/\bbase\b/.test(i)){var r=i.valueOf();i=function(){var t=this.base||e.prototype.base;this.base=n;var i=r.apply(this,arguments);return this.base=t,i},i.valueOf=function(e){return"object"===e?i:r},i.toString=e.toString}this[t]=i}else if(t){var s=e.prototype.extend;e._prototyping||"function"==typeof this||(s=this.extend||s);for(var o={toSource:null},a=["constructor","toString","valueOf"],l=e._prototyping?0:1;l<a.length;l++){var h=a[l];t[h]!==o[h]&&s.call(this,h,t[h])}for(var c in t)o[c]||s.call(this,c,t[c])}return this}},e=e.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,i){for(var n in e)void 0===this.prototype[n]&&t.call(i,e[n],n,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}})})},function(e,t,i){var n,n;!function(t){e.exports=t()}(function(){return function e(t,i,r){function s(a,l){if(!i[a]){if(!t[a]){var h="function"==typeof n&&n;if(!l&&h)return n(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return s(i||e)},c,c.exports,e,t,i,r)}return i[a].exports}for(var o="function"==typeof n&&n,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,i){"use strict";var n=e("./rectangle"),r=function(e,t){if(t&&t.bbox)return{leaf:t,x:t.bbox[0],y:t.bbox[1],w:t.bbox[2]-t.bbox[0],h:t.bbox[3]-t.bbox[1]};for(var i=e.length,n=0,r=new Array(i);n<i;)r[n]=[e[n][0],e[n][1]],n++;var s=r[0];i=r.length,n=1;for(var o={min:[].concat(s),max:[].concat(s)};n<i;)r[n][0]<o.min[0]?o.min[0]=r[n][0]:r[n][0]>o.max[0]&&(o.max[0]=r[n][0]),r[n][1]<o.min[1]?o.min[1]=r[n][1]:r[n][1]>o.max[1]&&(o.max[1]=r[n][1]),n++;var a={x:o.min[0],y:o.min[1],w:o.max[0]-o.min[0],h:o.max[1]-o.min[1]};return t&&(a.leaf=t),a},s={};s.point=function(e,t){return t.insertSubtree({x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],w:0,h:0,leaf:e},t.root)},s.multiPointLineString=function(e,t){return t.insertSubtree(r(e.geometry.coordinates,e),t.root)},s.multiLineStringPolygon=function(e,t){return t.insertSubtree(r(Array.prototype.concat.apply([],e.geometry.coordinates),e),t.root)},s.multiPolygon=function(e,t){return t.insertSubtree(r(Array.prototype.concat.apply([],Array.prototype.concat.apply([],e.geometry.coordinates)),e),t.root)},s.makeRec=function(e){return n(e.x,e.y,e.w,e.h)},s.geometryCollection=function(e,t){if(e.bbox)return t.insertSubtree({leaf:e,x:e.bbox[0],y:e.bbox[1],w:e.bbox[2]-e.bbox[0],h:e.bbox[3]-e.bbox[1]},t.root);for(var i,n=e.geometry.geometries,o=0,a=n.length,l=[];o<a;){switch(i=n[o],i.type){case"Point":l.push(s.makeRec({x:i.coordinates[0],y:i.coordinates[1],w:0,h:0}));break;case"MultiPoint":case"LineString":l.push(s.makeRec(r(i.coordinates)));break;case"MultiLineString":case"Polygon":l.push(s.makeRec(r(Array.prototype.concat.apply([],i.coordinates))));break;case"MultiPolygon":l.push(s.makeRec(r(Array.prototype.concat.apply([],Array.prototype.concat.apply([],i.coordinates)))));break;case"GeometryCollection":n=n.concat(i.geometries),a=n.length}o++}var h=l[0];for(o=1,a=l.length;o<a;)h.expand(l[o]),o++;return t.insertSubtree({leaf:e,x:h.x(),y:h.y(),h:h.h(),w:h.w()},t.root)},i.geoJSON=function(e){var t,i,n=this;if(Array.isArray(e))t=e.slice();else if(e.features&&Array.isArray(e.features))t=e.features.slice();else{if(!(e instanceof Object))throw"this isn't what we're looking for";t=[e]}for(var r=t.length,o=0;o<r;){if(i=t[o],"Feature"===i.type)switch(i.geometry.type){case"Point":s.point(i,n);break;case"MultiPoint":case"LineString":s.multiPointLineString(i,n);break;case"MultiLineString":case"Polygon":s.multiLineStringPolygon(i,n);break;case"MultiPolygon":s.multiPolygon(i,n);break;case"GeometryCollection":s.geometryCollection(i,n)}o++}},i.bbox=function(){var e,t,i,n;switch(arguments.length){case 1:e=arguments[0][0][0],t=arguments[0][0][1],i=arguments[0][1][0],n=arguments[0][1][1];break;case 2:e=arguments[0][0],t=arguments[0][1],i=arguments[1][0],n=arguments[1][1];break;case 4:e=arguments[0],t=arguments[1],i=arguments[2],n=arguments[3]}return this.search({x:e,y:t,w:i-e,h:n-t})}},{"./rectangle":3}],2:[function(e,t,i){"use strict";var n=e("./rtree"),r=e("./geojson");n.prototype.bbox=r.bbox,n.prototype.geoJSON=r.geoJSON,n.Rectangle=e("./rectangle"),t.exports=n},{"./geojson":1,"./rectangle":3,"./rtree":4}],3:[function(e,t,i){"use strict";function n(e,t,i,r){if(!(this instanceof n))return new n(e,t,i,r);var s,o,a;e.x?(i=e.w,r=e.h,t=e.y,0!==e.w&&!e.w&&e.x2?(i=e.x2-e.x,r=e.y2-e.y):(i=e.w,r=e.h),e=e.x,s=e+i,o=t+r,a=!(r+i)):(s=e+i,o=t+r,a=!(r+i)),this.x1=this.x=function(){return e},this.y1=this.y=function(){return t},this.x2=function(){return s},this.y2=function(){return o},this.w=function(){return i},this.h=function(){return r},this.p=function(){return a},this.overlap=function(i){return a||i.p()?e<=i.x2()&&s>=i.x()&&t<=i.y2()&&o>=i.y():e<i.x2()&&s>i.x()&&t<i.y2()&&o>i.y()},this.expand=function(n){var a,l,h=n.x(),c=n.y(),u=n.x2(),f=n.y2();return a=e>h?h:e,l=t>c?c:t,i=s>u?s-a:u-a,r=o>f?o-l:f-l,e=a,t=l,this}}n.overlapRectangle=function(e,t){return 0===e.h&&0===e.w||0===t.h&&0===t.w?e.x<=t.x+t.w&&e.x+e.w>=t.x&&e.y<=t.y+t.h&&e.y+e.h>=t.y:e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.y+e.h>t.y},n.containsRectangle=function(e,t){return e.x+e.w<=t.x+t.w&&e.x>=t.x&&e.y+e.h<=t.y+t.h&&e.y>=t.y},n.expandRectangle=function(e,t){var i,n,r=e.x+e.w,s=t.x+t.w,o=e.y+e.h,a=t.y+t.h;return i=e.x>t.x?t.x:e.x,n=e.y>t.y?t.y:e.y,e.w=r>s?r-i:s-i,e.h=o>a?o-n:a-n,e.x=i,e.y=n,e},n.makeMBR=function(e,t){if(!e.length)return{x:0,y:0,w:0,h:0};t=t||{},t.x=e[0].x,t.y=e[0].y,t.w=e[0].w,t.h=e[0].h;for(var i=1,r=e.length;i<r;i++)n.expandRectangle(t,e[i]);return t},n.squarifiedRatio=function(e,t,i){var n=(e+t)/2,r=e*t;return r*i/(r/(n*n))},t.exports=n},{}],4:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);var t=3,i=6;isNaN(e)||(t=Math.floor(e/2),i=e);var s={x:0,y:0,w:0,h:0,id:"root",nodes:[]};this.root=s;var o=function(e){for(var t,i=e.slice(),n=[];i.length;)t=i.pop(),t.nodes?i=i.concat(t.nodes):t.leaf&&n.push(t);return n},a=function(e,i,n){var s,a,l,h=[],c=[],u=[],f=1;if(!e||!r.overlapRectangle(e,n))return u;var g={x:e.x,y:e.y,w:e.w,h:e.h,target:i};for(c.push(n.nodes.length),h.push(n);h.length>0;){if(s=h.pop(),a=c.pop()-1,"target"in g)for(;a>=0;){if(l=s.nodes[a],r.overlapRectangle(g,l)){if(g.target&&"leaf"in l&&l.leaf===g.target||!g.target&&("leaf"in l||r.containsRectangle(l,g))){u="nodes"in l?o(s.nodes.splice(a,1)):s.nodes.splice(a,1),r.makeMBR(s.nodes,s),delete g.target;break}"nodes"in l&&(f++,c.push(a),h.push(s),s=l,a=l.nodes.length)}a--}else if("nodes"in g){s.nodes.splice(a+1,1),s.nodes.length>0&&r.makeMBR(s.nodes,s);for(var v=0;v<g.nodes.length;v++)p(g.nodes[v],s);g.nodes=[],0===h.length&&s.nodes.length<=1?(g.nodes=d(s,!0,g.nodes,s),s.nodes=[],h.push(s),c.push(1)):h.length>0&&s.nodes.length<t?(g.nodes=d(s,!0,g.nodes,s),s.nodes=[]):delete g.nodes}else r.makeMBR(s.nodes,s);f-=1}return u},l=function(e,t){var i,n=-1,s=[],o=!0;s.push(t);for(var a=t.nodes;o||-1!==n;){o?o=!1:(s.push(a[n]),a=a[n].nodes,n=-1);for(var l=a.length-1;l>=0;l--){var h=a[l];if("leaf"in h){n=-1;break}var c=r.squarifiedRatio(h.w,h.h,h.nodes.length+1),u=Math.max(h.x+h.w,e.x+e.w)-Math.min(h.x,e.x),f=Math.max(h.y+h.h,e.y+e.h)-Math.min(h.y,e.y),d=r.squarifiedRatio(u,f,h.nodes.length+2);(n<0||Math.abs(d-c)<i)&&(i=Math.abs(d-c),n=l)}}return s},h=function(e){for(var t=u(e);e.length>0;)c(e,t[0],t[1]);return t},c=function(e,i,n){for(var s,o,a,l=r.squarifiedRatio(i.w,i.h,i.nodes.length+1),h=r.squarifiedRatio(n.w,n.h,n.nodes.length+1),c=e.length-1;c>=0;c--){var u=e[c],f={};f.x=Math.min(i.x,u.x),f.y=Math.min(i.y,u.y),f.w=Math.max(i.x+i.w,u.x+u.w)-f.x,f.h=Math.max(i.y+i.h,u.y+u.h)-f.y;var d=Math.abs(r.squarifiedRatio(f.w,f.h,i.nodes.length+2)-l),p={};p.x=Math.min(n.x,u.x),p.y=Math.min(n.y,u.y),p.w=Math.max(n.x+n.w,u.x+u.w)-p.x,p.h=Math.max(n.y+n.h,u.y+u.h)-p.y;var g=Math.abs(r.squarifiedRatio(p.w,p.h,n.nodes.length+2)-h);(!o||!s||Math.abs(g-d)<s)&&(o=c,s=Math.abs(g-d),a=g<d?n:i)}var v=e.splice(o,1)[0];i.nodes.length+e.length+1<=t?(i.nodes.push(v),r.expandRectangle(i,v)):n.nodes.length+e.length+1<=t?(n.nodes.push(v),r.expandRectangle(n,v)):(a.nodes.push(v),r.expandRectangle(a,v))},u=function(e){for(var t,i,n=e.length-1,r=0,s=e.length-1,o=0,a=e.length-2;a>=0;a--){var l=e[a];l.x>e[r].x?r=a:l.x+l.w<e[n].x+e[n].w&&(n=a),l.y>e[o].y?o=a:l.y+l.h<e[s].y+e[s].h&&(s=a)}return Math.abs(e[n].x+e[n].w-e[r].x)>Math.abs(e[s].y+e[s].h-e[o].y)?n>r?(t=e.splice(n,1)[0],i=e.splice(r,1)[0]):(i=e.splice(r,1)[0],t=e.splice(n,1)[0]):s>o?(t=e.splice(s,1)[0],i=e.splice(o,1)[0]):(i=e.splice(o,1)[0],t=e.splice(s,1)[0]),[{x:t.x,y:t.y,w:t.w,h:t.h,nodes:[t]},{x:i.x,y:i.y,w:i.w,h:i.h,nodes:[i]}]},f=function(e,t){return e.nodes=t.nodes,e.x=t.x,e.y=t.y,e.w=t.w,e.h=t.h,e},d=function(e,t,i,n){var s=[];if(!r.overlapRectangle(e,n))return i;for(s.push(n.nodes);s.length>0;)for(var o=s.pop(),a=o.length-1;a>=0;a--){var l=o[a];r.overlapRectangle(e,l)&&("nodes"in l?s.push(l.nodes):"leaf"in l&&(t?i.push(l):i.push(l.leaf)))}return i},p=function(e,t){var n;if(0===t.nodes.length)return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,void t.nodes.push(e);for(var s,o=l(e,t),a=e;o.length>0;){if(n&&"nodes"in n&&0===n.nodes.length){s=n,n=o.pop();for(var c=0;c<n.nodes.length;c++)if(n.nodes[c]===s||0===n.nodes[c].nodes.length){n.nodes.splice(c,1);break}}else n=o.pop();if("leaf"in a||"nodes"in a||Array.isArray(a)){if(Array.isArray(a)){for(var u=0;u<a.length;u++)r.expandRectangle(n,a[u]);n.nodes=n.nodes.concat(a)}else r.expandRectangle(n,a),n.nodes.push(a);if(n.nodes.length<=i)a={x:n.x,y:n.y,w:n.w,h:n.h};else{var f=h(n.nodes);a=f,o.length<1&&(n.nodes.push(f[0]),o.push(n),a=f[1])}}else r.expandRectangle(n,a),a={x:n.x,y:n.y,w:n.w,h:n.h}}};this.insertSubtree=p,this.getTree=function(){return s},this.setTree=function(e,t){return t||(t=s),f(t,e)},this.search=function(e,t,i){return i=i||[],d(e,t,i,s)};var g=function(e){for(var t,i=1,n=[];i>0;)t=a(e,!1,s),i=t.length,n=n.concat(t);return n},v=function(e,t){return a(e,t,s)};this.remove=function(e,t){return t&&"function"!=typeof t?v(e,t):g(e)},this.insert=function(e,t){return p({x:e.x,y:e.y,w:e.w,h:e.h,leaf:t},s)}}var r=e("./rectangle");n.prototype.toJSON=function(e){return JSON.stringify(this.root,!1,e)},n.fromJSON=function(e){var t=new n;return t.setTree(JSON.parse(e)),t},t.exports=n,"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"object"==typeof e&&"[object Array]"==={}.toString.call(e)})},{"./rectangle":3}]},{},[2])(2)})},function(e,t,i){(function(t){!function(){function i(){}function n(){this.was=[0]}function r(e,t,i){this.hufts=new Int32Array(4320),this.window=new Uint8Array(i),this.end=i,this.checkfn=t,this.mode=0,this.reset(e,null),this.index=this.table=this.left=0,this.blens=null,this.bb=new Int32Array(1),this.tb=new Int32Array(1),this.codes=new s,this.check=this.write=this.read=this.bitb=this.bitk=this.last=0,this.inftree=new o}function s(){}function o(){}function a(e,t,i,n,r){if(0!=r){if(!e)throw"Undef src";if(!i)throw"Undef dest";if(0==t&&r==e.length)i.set(e,n);else if(H)e=e.subarray(t,t+r),i.set(e,n);else if(1==e.BYTES_PER_ELEMENT&&100<r)e=new Uint8Array(e.buffer,e.byteOffset+t,r),i.set(e,n);else for(var s=0;s<r;++s)i[n+s]=e[t+s]}}function l(e,t,n,r){e=t?n?new Uint8Array(e,t,n):new Uint8Array(e,t,e.byteLength-t):new Uint8Array(e),n=new i,n.inflateInit(15,!0),n.next_in=e,n.next_in_index=0,n.avail_in=e.length,e=[];for(var s=0;;){var o=new Uint8Array(32e3);n.next_out=o,n.next_out_index=0,n.avail_out=o.length;var l=n.inflate(0);if(0!=l&&1!=l&&-5!=l)throw n.msg;if(0!=n.avail_out){var h=new Uint8Array(o.length-n.avail_out);a(o,0,h,0,o.length-n.avail_out),o=h}if(e.push(o),s+=o.length,1==l||-5==l)break}if(r&&(r[0]=(t||0)+n.next_in_index),1==e.length)return e[0].buffer;for(t=new Uint8Array(s),n=r=0;n<e.length;++n)s=e[n],a(s,0,t,r,s.length),r+=s.length;return t.buffer}function h(e,t){this.block=e,this.offset=t}function c(e,t,i){var n=4294967296*(255&e[t+6])+16777216*(255&e[t+5])+65536*(255&e[t+4])+256*(255&e[t+3])+(255&e[t+2]);return e=e[t+1]<<8|e[t],0!=n||0!=e||i?new h(n,e):null}function u(e,t){t=Math.min(t||1,e.byteLength-50);for(var i=[],n=[0],r=0;n[0]<t;){var s=new Uint8Array(e,n[0],12),s=s[11]<<8|s[10],s=l(e,12+s+n[0],Math.min(65536,e.byteLength-12-s-n[0]),n);n[0]+=8,r+=s.byteLength,i.push(s)}if(1==i.length)return i[0];for(n=new Uint8Array(r),s=r=0;s<i.length;++s){var o=new Uint8Array(i[s]);a(o,0,n,r,o.length),r+=o.length}return n.buffer}function f(e,t){this.minv=e,this.maxv=t}function d(e,t){var i,n=[];for(--t,n.push(0),i=1+(e>>26);i<=1+(t>>26);++i)n.push(i);for(i=9+(e>>23);i<=9+(t>>23);++i)n.push(i);for(i=73+(e>>20);i<=73+(t>>20);++i)n.push(i);for(i=585+(e>>17);i<=585+(t>>17);++i)n.push(i);for(i=4681+(e>>14);i<=4681+(t>>14);++i)n.push(i);return n}function p(e){this.blob=e}function g(e,t,i,n){n||("object"==typeof t?(n=t,t=void 0):n={}),this.url=e,this.start=t||0,i&&(this.end=i),this.opts=n}function v(e){if(!e)return null;for(var t=new Uint8Array(e.length),i=0;i<t.length;++i)t[i]=e.charCodeAt(i);return t.buffer}function m(e,t){var i=new ArrayBuffer(8),n=new Uint8Array(i),i=new Float32Array(i);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],i[0]}function b(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function y(e,t){return e[t+1]<<8|e[t]}function w(e,t){return e[t]}function x(){}function k(e,t,i,n,r){function s(e){if(!e)return n(null,"Couldn't access BAM");e=u(e,e.byteLength),e=new Uint8Array(e);var t=b(e,0);if(21840194!=t)return n(null,"Not a BAM file, magic=0x"+t.toString(16));for(var i=b(e,4),r="",t=0;t<i;++t)r+=String.fromCharCode(e[t+8]);for(r=b(e,i+8),i+=12,o.chrToIndex={},o.indexToChr=[],t=0;t<r;++t){for(var s=b(e,i),a="",l=0;l<s-1;++l)a+=String.fromCharCode(e[i+4+l]);b(e,i+s+4),o.chrToIndex[a]=t,0==a.indexOf("chr")?o.chrToIndex[a.substring(3)]=t:o.chrToIndex["chr"+a]=t,o.indexToChr.push(a),i=i+8+s}return o.indices?n(o):void 0}var o=new x;o.data=e,o.bai=t,o.indexChunks=i;var a=o.indexChunks?o.indexChunks.minBlockIndex:1e9;if(o.indexChunks){t=o.indexChunks.chunks,o.indices=[];for(var l=0;l<t.length;l++)o.indices[l]=null;o.data.slice(0,a).fetch(s)}else o.bai.fetch(function(t){var l,h,u;if(t){var f=new Uint8Array(t),d=b(f,0);if(21578050!=d)t=n(null,"Not a BAI file, magic=0x"+d.toString(16));else{d=b(f,4),o.indices=[];for(var p=8,g=0;g<d;++g){var v=p;l=f;var m=u=v;h=b(l,m);for(var m=m+4,y=0;y<h;++y){b(l,m);var w=b(l,m+4),m=m+(8+16*w)}for(var y=b(l,m),m=m+4,w=1e9,x=m,_=0;_<y;++_){var T=c(l,x),x=x+8;if(T){l=T.block,0<T.offset&&(l+=65536),l<w&&(w=l);break}}m+=8*y,l=w,u=m-u,p+=u,a=Math.min(l,a),0<h&&(o.indices[g]=new Uint8Array(t,v,p-v))}t=!0}}else t="Couldn't access BAI";!0!==t?o.bai.url&&void 0===r?(o.bai.url=o.data.url.replace(/.bam$/,".bai"),k(e,o.bai,i,n,!0)):n(null,t):o.data.slice(0,a).fetch(s)})}function _(){}var T=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],C=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],S=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];i.prototype.inflateInit=function(e,t){return e||(e=15),t&&(t=!1),this.istate=new n,this.istate.inflateInit(this,t?-e:e)},i.prototype.inflate=function(e){return null==this.istate?-2:this.istate.inflate(this,e)},i.prototype.inflateEnd=function(){if(null==this.istate)return-2;var e=istate.inflateEnd(this);return this.istate=null,e},i.prototype.inflateSync=function(){return istate.inflateSync(this)},i.prototype.inflateSetDictionary=function(e,t){return istate.inflateSetDictionary(this,e,t)},n.prototype.inflateReset=function(e){return null==e||null==e.istate?-2:(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=0!=e.istate.nowrap?7:0,e.istate.blocks.reset(e,null),0)},n.prototype.inflateEnd=function(e){return null!=this.blocks&&this.blocks.free(e),this.blocks=null,0},n.prototype.inflateInit=function(e,t){return this.blocks=e.msg=null,nowrap=0,0>t&&(t=-t,nowrap=1),8>t||15<t?(this.inflateEnd(e),-2):(this.wbits=t,e.istate.blocks=new r(e,0!=e.istate.nowrap?null:this,1<<t),this.inflateReset(e),0)},n.prototype.inflate=function(e,t){var i,n;if(null==e||null==e.istate||null==e.next_in)return-2;for(t=4==t?-5:0,i=-5;;)switch(e.istate.mode){case 0:if(0==e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.next_in[e.next_in_index++]))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0==e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,n=255&e.next_in[e.next_in_index++],0!=((e.istate.method<<8)+n)%31){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&n)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0==e.avail_in)return i;i=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.next_in[e.next_in_index++])<<24&4278190080,e.istate.mode=3;case 3:if(0==e.avail_in)return i;i=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<16&16711680,e.istate.mode=4;case 4:if(0==e.avail_in)return i;i=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<8&65280,e.istate.mode=5;case 5:return 0==e.avail_in?i:(e.avail_in--,e.total_in++,e.istate.need+=255&e.next_in[e.next_in_index++],e.adler=e.istate.need,e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(i=e.istate.blocks.proc(e,i))){e.istate.mode=13,e.istate.marker=0;break}if(0==i&&(i=t),1!=i)return i;if(i=t,e.istate.blocks.reset(e,e.istate.was),0!=e.istate.nowrap){e.istate.mode=12;break}e.istate.mode=8;case 8:if(0==e.avail_in)return i;i=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.next_in[e.next_in_index++])<<24&4278190080,e.istate.mode=9;case 9:if(0==e.avail_in)return i;i=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<16&16711680,e.istate.mode=10;case 10:if(0==e.avail_in)return i;i=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.next_in[e.next_in_index++])<<8&65280,e.istate.mode=11;case 11:if(0==e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.next_in[e.next_in_index++],e.istate.was[0]!=e.istate.need){e.istate.mode=13,e.msg="incorrect data check",e.istate.marker=5;break}e.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},n.prototype.inflateSetDictionary=function(e,t,i){var n=0,r=i;return null==e||null==e.istate||6!=e.istate.mode?-2:e._adler.adler32(1,t,0,i)!=e.adler?-3:(e.adler=e._adler.adler32(0,null,0,0),r>=1<<e.istate.wbits&&(r=(1<<e.istate.wbits)-1,n=i-r),e.istate.blocks.set_dictionary(t,n,r),e.istate.mode=7,0)};var L=[0,0,255,255];n.prototype.inflateSync=function(e){var t,i,n;if(null==e||null==e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0==(t=e.avail_in))return-5;for(i=e.next_in_index,n=e.istate.marker;0!=t&&4>n;)e.next_in[i]==L[n]?n++:n=0!=e.next_in[i]?0:4-n,i++,t--;return e.total_in+=i-e.next_in_index,e.next_in_index=i,e.avail_in=t,e.istate.marker=n,4!=n?-3:(t=e.total_in,i=e.total_out,this.inflateReset(e),e.total_in=t,e.total_out=i,e.istate.mode=7,0)},n.prototype.inflateSyncPoint=function(e){return null==e||null==e.istate||null==e.istate.blocks?-2:e.istate.blocks.sync_point()};var R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];r.prototype.reset=function(e,t){t&&(t[0]=this.check),6==this.mode&&this.codes.free(e),this.read=this.write=this.bitb=this.bitk=this.mode=0,this.checkfn&&(e.adler=this.check=e._adler.adler32(0,null,0,0))},r.prototype.proc=function(e,t){var i,n,r,s,o,l,h;for(s=e.next_in_index,o=e.avail_in,n=this.bitb,r=this.bitk,l=this.write,h=l<this.read?this.read-l-1:this.end-l;;)switch(this.mode){case 0:for(;3>r;){if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);t=0,o--,n|=(255&e.next_in[s++])<<r,r+=8}switch(i=7&n,this.last=1&i,i>>>1){case 0:n>>>=3,r-=3,i=7&r,n>>>=i,r-=i,this.mode=1;break;case 1:var c=new Int32Array(1),u=new Int32Array(1),f=[],d=[];i=u;var p=f,g=d;c[0]=9,i[0]=5,p[0]=C,g[0]=S,this.codes.init(c[0],u[0],f[0],0,d[0],0,e),n>>>=3,r-=3,this.mode=6;break;case 2:n>>>=3,r-=3,this.mode=3;break;case 3:return n>>>=3,r-=3,this.mode=13,e.msg="invalid block type",t=-3,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t)}break;case 1:for(;32>r;){if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);t=0,o--,n|=(255&e.next_in[s++])<<r,r+=8}if((~n>>>16&65535)!=(65535&n))return this.mode=13,e.msg="invalid stored block lengths",t=-3,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);this.left=65535&n,n=r=0,this.mode=0!=this.left?2:0!=this.last?7:0;break;case 2:if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,write=l,this.inflate_flush(e,t);if(0==h&&(l==end&&0!=read&&(l=0,h=l<this.read?this.read-l-1:this.end-l),0==h&&(this.write=l,t=this.inflate_flush(e,t),l=this.write,h=l<this.read?this.read-l-1:this.end-l,l==this.end&&0!=this.read&&(l=0,h=l<this.read?this.read-l-1:this.end-l),0==h)))return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);if(t=0,i=this.left,i>o&&(i=o),i>h&&(i=h),a(e.next_in,s,this.window,l,i),s+=i,o-=i,l+=i,h-=i,0!=(this.left-=i))break;this.mode=0!=this.last?7:0;break;case 3:for(;14>r;){if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);t=0,o--,n|=(255&e.next_in[s++])<<r,r+=8}if(this.table=i=16383&n,29<(31&i)||29<(i>>5&31))return this.mode=9,e.msg="too many length or distance symbols",t=-3,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);if(i=258+(31&i)+(i>>5&31),null==this.blens||this.blens.length<i)this.blens=new Int32Array(i);else for(h=0;h<i;h++)this.blens[h]=0;n>>>=14,r-=14,this.index=0,mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>r;){if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);t=0,o--,n|=(255&e.next_in[s++])<<r,r+=8}this.blens[R[this.index++]]=7&n,n>>>=3,r-=3}for(;19>this.index;)this.blens[R[this.index++]]=0;if(this.bb[0]=7,0!=(i=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,e)))return t=i,-3==t&&(this.blens=null,this.mode=9),this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,write=l,this.inflate_flush(e,t);this.index=0,this.mode=5;case 5:for(;i=this.table,this.index<258+(31&i)+(i>>5&31);){for(i=this.bb[0];r<i;){if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);t=0,o--,n|=(255&e.next_in[s++])<<r,r+=8}if(i=this.hufts[3*(this.tb[0]+(n&T[i]))+1],16>(u=this.hufts[3*(this.tb[0]+(n&T[i]))+2]))n>>>=i,r-=i,this.blens[this.index++]=u;else{for(h=18==u?7:u-14,c=18==u?11:3;r<i+h;){if(0==o)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);t=0,o--,n|=(255&e.next_in[s++])<<r,r+=8}if(n>>>=i,r-=i,c+=n&T[h],n>>>=h,r-=h,h=this.index,i=this.table,h+c>258+(31&i)+(i>>5&31)||16==u&&1>h)return this.blens=null,this.mode=9,e.msg="invalid bit length repeat",t=-3,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);u=16==u?this.blens[h-1]:0;do{this.blens[h++]=u}while(0!=--c);this.index=h}}if(this.tb[0]=-1,c=new Int32Array(1),u=new Int32Array(1),f=new Int32Array(1),d=new Int32Array(1),c[0]=9,u[0]=6,i=this.table,0!=(i=this.inftree.inflate_trees_dynamic(257+(31&i),1+(i>>5&31),this.blens,c,u,f,d,this.hufts,e)))return-3==i&&(this.blens=null,this.mode=13),t=i,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);this.codes.init(c[0],u[0],this.hufts,f[0],this.hufts,d[0],e),this.mode=6;case 6:if(this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,1!=(t=this.codes.proc(this,e,t)))return this.inflate_flush(e,t);if(t=0,this.codes.free(e),s=e.next_in_index,o=e.avail_in,n=this.bitb,r=this.bitk,l=this.write,h=l<this.read?this.read-l-1:this.end-l,0==this.last){this.mode=0;break}this.mode=7;case 7:if(this.write=l,t=this.inflate_flush(e,t),l=this.write,this.read!=this.write)return this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);mode=12;case 8:return t=1,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);case 9:return t=-3,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t);default:return t=-2,this.bitb=n,this.bitk=r,e.avail_in=o,e.total_in+=s-e.next_in_index,e.next_in_index=s,this.write=l,this.inflate_flush(e,t)}},r.prototype.free=function(e){this.reset(e,null),this.hufts=this.window=null},r.prototype.set_dictionary=function(e,t,i){a(e,t,window,0,i),this.read=this.write=i},r.prototype.sync_point=function(){return 1==this.mode},r.prototype.inflate_flush=function(e,t){var i,n,r;return n=e.next_out_index,r=this.read,i=(r<=this.write?this.write:this.end)-r,i>e.avail_out&&(i=e.avail_out),0!=i&&-5==t&&(t=0),e.avail_out-=i,e.total_out+=i,null!=this.checkfn&&(e.adler=this.check=e._adler.adler32(this.check,this.window,r,i)),a(this.window,r,e.next_out,n,i),n+=i,r+=i,r==this.end&&(r=0,this.write==this.end&&(this.write=0),i=this.write-r,i>e.avail_out&&(i=e.avail_out),0!=i&&-5==t&&(t=0),e.avail_out-=i,e.total_out+=i,null!=this.checkfn&&(e.adler=this.check=e._adler.adler32(this.check,this.window,r,i)),a(this.window,r,e.next_out,n,i),n+=i,r+=i),e.next_out_index=n,this.read=r,t},s.prototype.init=function(e,t,i,n,r,s,o){this.mode=0,this.lbits=e,this.dbits=t,this.ltree=i,this.ltree_index=n,this.dtree=r,this.dtree_index=s,this.tree=null},s.prototype.proc=function(e,t,i){var n,r,s,o,a,l=0,h=0,c=0,c=t.next_in_index;for(s=t.avail_in,l=e.bitb,h=e.bitk,o=e.write,a=o<e.read?e.read-o-1:e.end-o;;)switch(this.mode){case 0:if(258<=a&&10<=s&&(e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,i=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,e,t),c=t.next_in_index,s=t.avail_in,l=e.bitb,h=e.bitk,o=e.write,a=o<e.read?e.read-o-1:e.end-o,0!=i)){this.mode=1==i?7:9;break}this.need=this.lbits,this.tree=this.ltree,this.tree_index=this.ltree_index,this.mode=1;case 1:for(n=this.need;h<n;){if(0==s)return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);i=0,s--,l|=(255&t.next_in[c++])<<h,h+=8}if(n=3*(this.tree_index+(l&T[n])),l>>>=this.tree[n+1],h-=this.tree[n+1],0==(r=this.tree[n])){this.lit=this.tree[n+2],this.mode=6;break}if(0!=(16&r)){this.get=15&r,this.len=this.tree[n+2],this.mode=2;break}if(0==(64&r)){this.need=r,this.tree_index=n/3+this.tree[n+2];break}if(0!=(32&r)){this.mode=7;break}return this.mode=9,t.msg="invalid literal/length code",i=-3,e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);case 2:for(n=this.get;h<n;){if(0==s)return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);i=0,s--,l|=(255&t.next_in[c++])<<h,h+=8}this.len+=l&T[n],l>>=n,h-=n,this.need=this.dbits,this.tree=this.dtree,this.tree_index=this.dtree_index,this.mode=3;case 3:for(n=this.need;h<n;){if(0==s)return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);i=0,s--,l|=(255&t.next_in[c++])<<h,h+=8}if(n=3*(this.tree_index+(l&T[n])),l>>=this.tree[n+1],h-=this.tree[n+1],0!=(16&(r=this.tree[n]))){this.get=15&r,this.dist=this.tree[n+2],this.mode=4;break}if(0==(64&r)){this.need=r,this.tree_index=n/3+this.tree[n+2];break}return this.mode=9,t.msg="invalid distance code",i=-3,e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);case 4:for(n=this.get;h<n;){if(0==s)return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);i=0,s--,l|=(255&t.next_in[c++])<<h,h+=8}this.dist+=l&T[n],l>>=n,h-=n,this.mode=5;case 5:for(n=o-this.dist;0>n;)n+=e.end;for(;0!=this.len;){if(0==a&&(o==e.end&&0!=e.read&&(o=0,a=o<e.read?e.read-o-1:e.end-o),0==a&&(e.write=o,i=e.inflate_flush(t,i),o=e.write,a=o<e.read?e.read-o-1:e.end-o,o==e.end&&0!=e.read&&(o=0,a=o<e.read?e.read-o-1:e.end-o),0==a)))return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);e.window[o++]=e.window[n++],a--,n==e.end&&(n=0),this.len--}this.mode=0;break;case 6:if(0==a&&(o==e.end&&0!=e.read&&(o=0,a=o<e.read?e.read-o-1:e.end-o),0==a&&(e.write=o,i=e.inflate_flush(t,i),o=e.write,a=o<e.read?e.read-o-1:e.end-o,o==e.end&&0!=e.read&&(o=0,a=o<e.read?e.read-o-1:e.end-o),0==a)))return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);i=0,e.window[o++]=this.lit,a--,this.mode=0;break;case 7:if(7<h&&(h-=8,s++,c--),e.write=o,i=e.inflate_flush(t,i),o=e.write,e.read!=e.write)return e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);this.mode=8;case 8:return i=1,e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);case 9:return i=-3,e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i);default:return i=-2,e.bitb=l,e.bitk=h,t.avail_in=s,t.total_in+=c-t.next_in_index,t.next_in_index=c,e.write=o,e.inflate_flush(t,i)}},s.prototype.free=function(e){},s.prototype.inflate_fast=function(e,t,i,n,r,s,o,l){var h,c,u,f,d,p,g,v,m,b,y,w;p=l.next_in_index,g=l.avail_in,f=o.bitb,d=o.bitk,v=o.write,m=v<o.read?o.read-v-1:o.end-v,e=T[e],b=T[t];do{for(;20>d;)g--,f|=(255&l.next_in[p++])<<d,d+=8;if(h=f&e,c=i,u=n,w=3*(u+h),0==(t=c[w]))f>>=c[w+1],d-=c[w+1],o.window[v++]=c[w+2],m--;else for(;;){if(f>>=c[w+1],d-=c[w+1],0!=(16&t)){for(t&=15,y=c[w+2]+(f&T[t]),f>>=t,d-=t;15>d;)g--,f|=(255&l.next_in[p++])<<d,d+=8;for(h=f&b,c=r,u=s,w=3*(u+h),t=c[w];;){if(f>>=c[w+1],d-=c[w+1],0!=(16&t)){for(t&=15;d<t;)g--,f|=(255&l.next_in[p++])<<d,d+=8;if(h=c[w+2]+(f&T[t]),f>>=t,d-=t,m-=y,v>=h)h=v-h,o.window[v++]=o.window[h++],o.window[v++]=o.window[h++],y-=2;else{h=v-h;do{h+=o.end}while(0>h);if(t=o.end-h,y>t){if(y-=t,0<v-h&&t>v-h)do{o.window[v++]=o.window[h++]}while(0!=--t);else a(o.window,h,o.window,v,t),v+=t;h=0}}do{o.window[v++]=o.window[h++]}while(0!=--y);break}if(0!=(64&t))return l.msg="invalid distance code",y=l.avail_in-g,y=d>>3<y?d>>3:y,g+=y,p-=y,d-=y<<3,o.bitb=f,o.bitk=d,l.avail_in=g,l.total_in+=p-l.next_in_index,l.next_in_index=p,o.write=v,-3;h+=c[w+2],h+=f&T[t],w=3*(u+h),t=c[w]}break}if(0!=(64&t))return 0!=(32&t)?(y=l.avail_in-g,y=d>>3<y?d>>3:y,g+=y,p-=y,d-=y<<3,o.bitb=f,o.bitk=d,l.avail_in=g,l.total_in+=p-l.next_in_index,l.next_in_index=p,o.write=v,1):(l.msg="invalid literal/length code",y=l.avail_in-g,y=d>>3<y?d>>3:y,g+=y,p-=y,d-=y<<3,o.bitb=f,o.bitk=d,l.avail_in=g,l.total_in+=p-l.next_in_index,l.next_in_index=p,o.write=v,-3);if(h+=c[w+2],h+=f&T[t],w=3*(u+h),0==(t=c[w])){f>>=c[w+1],d-=c[w+1],o.window[v++]=c[w+2],m--;break}}}while(258<=m&&10<=g);return y=l.avail_in-g,y=d>>3<y?d>>3:y,p-=y,o.bitb=f,o.bitk=d-(y<<3),l.avail_in=g+y,l.total_in+=p-l.next_in_index,l.next_in_index=p,o.write=v,0},o.prototype.huft_build=function(e,t,i,n,r,s,o,l,h,c,u){var f,d,p,g,v,m,b,y,w;m=0,d=i;do{this.c[e[t+m]]++,m++,d--}while(0!=d);if(this.c[0]==i)return o[0]=-1,l[0]=0;for(v=l[0],p=1;15>=p&&0==this.c[p];p++);for(g=p,v<p&&(v=p),d=15;0!=d&&0==this.c[d];d--);for(c=d,v>d&&(v=d),l[0]=v,l=1<<p;p<d;p++,l<<=1)if(0>(l-=this.c[p]))return-3;if(0>(l-=this.c[d]))return-3;for(this.c[d]+=l,this.x[1]=p=0,m=1,b=2;0!=--d;)this.x[b]=p+=this.c[m],b++,m++;m=d=0;do{0!=(p=e[t+m])&&(this.v[this.x[p]++]=d),m++}while(++d<i);for(i=this.x[c],m=this.x[0]=d=0,t=-1,y=-v,w=b=this.u[0]=0;g<=c;g++)for(e=this.c[g];0!=e--;){for(;g>y+v;){if(t++,y+=v,w=c-y,w=w>v?v:w,(f=1<<(p=g-y))>e+1&&(f-=e+1,b=g,p<w))for(;++p<w&&!((f<<=1)<=this.c[++b]);)f-=this.c[b];if(w=1<<p,1440<this.hn[0]+w)return-3;this.u[t]=b=this.hn[0],this.hn[0]+=w,0!=t?(this.x[t]=d,this.r[0]=p,this.r[1]=v,p=d>>>y-v,this.r[2]=b-this.u[t-1]-p,a(this.r,0,h,3*(this.u[t-1]+p),3)):o[0]=b}for(this.r[1]=g-y,m>=i?this.r[0]=192:u[m]<n?(this.r[0]=256>this.v[m]?0:96,this.r[2]=this.v[m++]):(this.r[0]=s[this.v[m]-n]+16+64,this.r[2]=r[this.v[m++]-n]),f=1<<g-y,p=d>>>y;p<w;p+=f)a(this.r,0,h,3*(b+p),3);for(p=1<<g-1;0!=(d&p);p>>>=1)d^=p;for(d^=p,p=(1<<y)-1;(d&p)!=this.x[t];)t--,y-=v,p=(1<<y)-1}return 0!=l&&1!=c?-5:0},o.prototype.inflate_trees_bits=function(e,t,i,n,r){return this.initWorkArea(19),this.hn[0]=0,e=this.huft_build(e,0,19,19,null,null,i,t,n,this.hn,this.v),-3==e?r.msg="oversubscribed dynamic bit lengths tree":-5!=e&&0!=t[0]||(r.msg="incomplete dynamic bit lengths tree",e=-3),e},o.prototype.inflate_trees_dynamic=function(e,t,i,n,r,s,o,a,l){return this.initWorkArea(288),this.hn[0]=0,0!=(s=this.huft_build(i,0,e,257,F,M,s,n,a,this.hn,this.v))||0==n[0]?(-3==s?l.msg="oversubscribed literal/length tree":-4!=s&&(l.msg="incomplete literal/length tree",s=-3),s):(this.initWorkArea(288),s=this.huft_build(i,e,t,0,A,G,o,r,a,this.hn,this.v),0!=s||0==r[0]&&257<e?(-3==s?l.msg="oversubscribed distance tree":-5==s?(l.msg="incomplete distance tree",s=-3):-4!=s&&(l.msg="empty distance tree with lengths",s=-3),s):0)},o.prototype.initWorkArea=function(e){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(e),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16)),this.v.length<e&&(this.v=new Int32Array(e));for(var t=0;t<e;t++)this.v[t]=0;for(t=0;16>t;t++)this.c[t]=0;for(t=0;3>t;t++)this.r[t]=0;a(this.c,0,this.u,0,15),a(this.c,0,this.x,0,16)};var H="function"==typeof new Uint8Array(1).subarray;h.prototype.toString=function(){return this.block+":"+this.offset},p.prototype.slice=function(e,t){var i;return i=this.blob.slice?t?this.blob.slice(e,e+t):this.blob.slice(e):t?this.blob.webkitSlice(e,e+t):this.blob.webkitSlice(e),new p(i)},p.prototype.salted=function(){return this},p.prototype.fetch="undefined"!=typeof FileReader?function(e){var t=new FileReader;t.onloadend=function(i){e(v(t.result))},t.readAsBinaryString(this.blob)}:function(e){var t=new FileReaderSync;try{var i=t.readAsArrayBuffer(this.blob);e(i)}catch(t){e(null,t)}},g.prototype.slice=function(e,t){if(0>e)throw"Bad slice "+e;var i=this.start,n=this.end,i=i&&e?i+e:e||i;return new g(this.url,i,t&&i?i+t-1:n||t-1,this.opts)},0<=navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome"),g.prototype.fetchAsText=function(e){var t=this;this.getURL().then(function(i){try{var n=new XMLHttpRequest;if(n.open("GET",i,!0),t.end){if(1e8<t.end-t.start)throw"Monster fetch!";n.setRequestHeader("Range","bytes="+t.start+"-"+t.end)}n.onreadystatechange=function(){if(4==n.readyState)return e(200==n.status||206==n.status?n.responseText:null)},t.opts.credentials&&(n.withCredentials=!0),n.send("")}catch(t){return e(null)}}).fail(function(t){return console.log(t),e(null,t)})},g.prototype.salted=function(){var e,t=this.opts,i={};for(e in t)i[e]=t[e];return i.salt=!0,new g(this.url,this.start,this.end,i)},g.prototype.getURL=function(){return this.opts.resolver?this.opts.resolver(this.url).then(function(e){return"string"==typeof e?e:e.url}):t.Deferred().resolve(this.url)},g.prototype.fetch=function(e,t){var i=this;t=t||{};var n=t.attempt||1,r=t.truncatedLength;if(3<n)return e(null);this.getURL().then(function(s){try{var o;t.timeout&&!i.opts.credentials&&(o=setTimeout(function(){return console.log("timing out "+s),l.abort(),e(null,"Timeout")},t.timeout));var a,l=new XMLHttpRequest;if(l.open("GET",s,!0),l.overrideMimeType("text/plain; charset=x-user-defined"),i.end){if(1e8<i.end-i.start)throw"Monster fetch!";l.setRequestHeader("Range","bytes="+i.start+"-"+i.end),a=i.end-i.start+1}l.responseType="arraybuffer",l.onreadystatechange=function(){if(4==l.readyState){if(o&&clearTimeout(o),200==l.status||206==l.status){if(l.response){var t=l.response.byteLength;return!a||a==t||r&&t==r?e(l.response):i.fetch(e,{attempt:n+1,truncatedLength:t})}return l.mozResponseArrayBuffer?e(l.mozResponseArrayBuffer):(t=l.responseText,!a||a==t.length||r&&t.length==r?e(v(l.responseText)):i.fetch(e,{attempt:n+1,truncatedLength:t.length}))}return i.fetch(e,{attempt:n+1})}},i.opts.credentials&&(l.withCredentials=!0),l.send("")}catch(t){return e(null)}}).fail(function(t){return console.log(t),e(null,t)})},x.prototype.blocksForRange=function(e,t,i){var n=this.indices[e];if(!n)return[];e=d(t,i);for(var r=[],s=0;s<e.length;++s)r[e[s]]=!0;e=[];for(var o=[],s=b(n,0),a=4,l=0;l<s;++l){var h=b(n,a),u=b(n,a+4),a=a+8;if(r[h])for(var p=0;p<u;++p){var g=c(n,a),v=c(n,a+8);(4681>h?o:e).push(new f(g,v)),a+=16}else a+=16*u}for(s=b(n,a),r=null,t=Math.min(t>>14,s-1),i=Math.min(i>>14,s-1),s=t;s<=i;++s)(t=c(n,a+4+8*s))&&(!r||t.block<r.block||t.offset<r.offset)&&(r=t);if(n=[],null!=r)for(s=0;s<o.length;++s)i=o[s],i.maxv.block>=r.block&&i.maxv.offset>=r.offset&&n.push(i);for(o=n,n=[],s=0;s<o.length;++s)n.push(o[s]);for(s=0;s<e.length;++s)n.push(e[s]);if(n.sort(function(e,t){var i=e.minv.block-t.minv.block;return 0!=i?i:e.minv.offset-t.minv.offset}),e=[],0<n.length){for(o=n[0],s=1;s<n.length;++s)i=n[s],i.minv.block==o.maxv.block?o=new f(o.minv,i.maxv):(e.push(o),o=i);e.push(o)}return e},x.prototype.fetch=function(e,t,i,n,r){function s(){if(d>=a.length)return n(f);if(c){var e=new Uint8Array(c),e=o.readBamRecords(e,a[d].minv.offset,f,t,i,l,r);return c=null,++d,e?n(f):s()}var h=a[d],e=h.minv.block;o.data.slice(e,h.maxv.block+65536-e).fetch(function(e){return c=u(e,h.maxv.block-h.minv.block+1),s()})}var o=this;r=r||{};var a,l=this.chrToIndex[e];if(void 0===l)a=[];else{if(null===this.indices[l]&&this.indexChunks.chunks[l]){var h=this.indexChunks.chunks[l];return this.bai.slice(h[0],h[1]).fetch(function(s){return s=new Uint8Array(s),this.indices[l]=s,this.fetch(e,t,i,n,r)}.bind(this))}(a=this.blocksForRange(l,t,i))||n(null,"Error in index fetch")}var c,f=[],d=0;s()};var D="=ACxGxxxTxxxxxxN".split(""),E="MIDNSHP=X???????".split("");x.prototype.readBamRecords=function(e,t,i,n,r,s,o){for(;;){var a=b(e,t),a=t+a+4;if(a>=e.length)return!1;var l=new _,h=b(e,t+4),c=b(e,t+8),u=b(e,t+12),f=(65280&u)>>8,d=255&u,u=b(e,t+16),p=(4294901760&u)>>16,g=65535&u,u=b(e,t+20),v=b(e,t+24),x=b(e,t+28);if(b(e,t+32),l.segment=this.indexToChr[h],l.flag=p,l.pos=c,l.mq=f,o.light&&(l.seqLength=u),!o.light){for(0<=v&&(l.nextSegment=this.indexToChr[v],l.nextPos=x),f="",c=0;c<d-1;++c)f+=String.fromCharCode(e[t+36+c]);for(l.readName=f,t=t+36+d,d="",c=0;c<g;++c)f=b(e,t),d=d+(f>>4)+E[15&f],t+=4;for(l.cigar=d,g="",d=u+1>>1,c=0;c<d;++c)f=e[t+c],g+=D[(240&f)>>4],g.length<u&&(g+=D[15&f]);for(t+=d,l.seq=g,g="",c=0;c<u;++c)g+=String.fromCharCode(e[t+c]+33);for(t+=u,l.quals=g;t<a;){if(g=String.fromCharCode(e[t],e[t+1]),"A"==(d=String.fromCharCode(e[t+2])))d=String.fromCharCode(e[t+3]),t+=4;else if("i"==d||"I"==d)d=b(e,t+3),t+=7;else if("c"==d||"C"==d)d=e[t+3],t+=4;else if("s"==d||"S"==d)d=y(e,t+3),t+=5;else if("f"==d)d=m(e,t+3),t+=7;else if("Z"==d||"H"==d)for(t+=3,d="";0!=(c=e[t++]);)d+=String.fromCharCode(c);else{if("B"!=d)throw"Unknown type "+d;if(d=String.fromCharCode(e[t+3]),c=b(e,t+4),"i"==d||"I"==d||"f"==d)f=4,p="f"==d?m:b;else if("s"==d||"S"==d)f=2,p=y;else{if("c"!=d&&"C"!=d)throw"Unknown array type "+d;f=1,p=w}for(t+=8,d=[],v=0;v<c;++v)d.push(p(e,t)),t+=f}l[g]=d}}if((!n||l.pos<=r&&l.pos+u>=n)&&(void 0!==s&&h!=s||i.push(l)),l.pos>r)return!0;t=a}},window.dallianceLib={URLFetchable:g,BlobFetchable:p,makeBam:function(e,t,i,n,r){e.slice(0,10).fetch(function(s){return s?k(e,t,i,n,r):n(null,"Couldn't access BAM.")},{timeout:5e3})},inflateBuffer:l},"object"==typeof e&&"object"==typeof e.exports&&(e.exports=window.dallianceLib)}()}).call(t,i(0))},function(e,t,i){(function(t){!function(){function n(e){function t(){}"create"in Object?e=Object.create(e):(t.prototype=e,e=new t);for(var i=1;i<arguments.length;++i){var n=arguments[i];for(var r in n)void 0!==n[r]&&(e[r]=n[r])}return e}function r(e,t){if(!(this instanceof arguments.callee))throw new Error("Constructor may not be called as a function");e instanceof jDataView||(e=new jDataView(e,void 0,void 0,!0)),this.view=e,this.view.seek(0),this._bitShift=0,this.structure=n(r.prototype.structure,t)}function s(e){return e instanceof Function?e.call(this):e}"undefined"==typeof jDataView&&(jDataView=i(2)),r.prototype.structure={uint8:function(){return this.view.getUint8()},uint16:function(){return this.view.getUint16()},uint32:function(){return this.view.getUint32()},uint64:function(){return parseInt(this.view.getUint64(),10)},int8:function(){return this.view.getInt8()},int16:function(){return this.view.getInt16()},int32:function(){return this.view.getInt32()},float32:function(){return this.view.getFloat32()},float64:function(){return this.view.getFloat64()},char:function(){return this.view.getChar()},string:function(e){return this.view.getString(s.call(this,e))},array:function(e,t){t=s.call(this,t);for(var i=[],n=0;n<t;++n)i.push(this.parse(e));return i},seek:function(e,t){if(e=s.call(this,e),t instanceof Function){var i=this.view.tell();this.view.seek(e);var n=t.call(this);return this.view.seek(i),n}return this.view.seek(e)},tell:function(){return this.view.tell()},skip:function(e){return e=s.call(this,e),this.view.seek(this.view.tell()+e),e},err:function(e){this.current={error:e}},if:function(e){if(e instanceof Function?e.call(this):e)return this.parse.apply(this,Array.prototype.slice.call(arguments,1))}},r.prototype.seek=r.prototype.structure.seek,r.prototype.tell=r.prototype.structure.tell,r.prototype.skip=r.prototype.structure.skip,r.prototype.err=r.prototype.structure.err,r.prototype.parse=function(e){if("number"==typeof e){var t=0,i=e;if(this._bitShift<0){var n=this._bitShift>>3;this.skip(n),this._bitShift&=7}for(this._bitShift>0&&i>=8-this._bitShift&&(t=this.view.getUint8()&~(-1<<8-this._bitShift),i-=8-this._bitShift,this._bitShift=0);i>=8;)t=this.view.getUint8()|t<<8,i-=8;return i>0&&(t=this.view.getUint8()>>>8-(this._bitShift+i)&~(-1<<i)|t<<i,this._bitShift+=i-8),t}if(e instanceof Function)return e.apply(this,Array.prototype.slice.call(arguments,1));if("string"==typeof e&&(e=Array.prototype.slice.call(arguments)),e instanceof Array){var r=e[0];if(!(r in this.structure))throw new Error("Missing structure for `"+r+"`");return this.parse.apply(this,[this.structure[r]].concat(e.slice(1)))}if("object"==typeof e){var s={},o=this.current;this.current=s;for(var r in e){if(this.current.error)return s=this.current;var a=this.parse(e[r]);void 0!==a&&(s[r]=a)}return this.current=o,s}throw new Error("Unknown structure type `"+e+"`")};var o;"undefined"!=typeof self?o=self:"undefined"!=typeof window?o=window:void 0!==t&&(o=t),o.jParser=r,"object"==typeof e&&"object"==typeof e.exports&&(e.exports=r)}()}).call(t,i(1))},function(e,t){!function(){var t=function(e,t){function i(t,i,n){var r=t+i,s=C.fetchedData.search({x:t,w:i,y:0,h:1}).filter(function(e){return e[0]<=t&&e[1]>=r});1==s.length?n(s[0][2].slice(t-s[0][0],t+i)):e.slice(t,i).fetch(function(e){C.fetchedData.insert({x:t,w:i,y:0,h:1},[t,t+i,e]),n(e)})}function n(){i(0,512,function(e){var i,n,o,a,l=new Uint8Array(e),h=new Uint16Array(e),c=new Uint32Array(e),v=c[0];v===f?C.type="bigwig":v===p?C.type="bigbed":i=v===d||v===g?"big-endian files not supported yet!":"unsupported file format",i&&t(null,i),C.version=h[2],C.numZoomLevels=h[3],C.chromTreeOffset=u(l,8),C.unzoomedDataOffset=u(l,16),C.unzoomedIndexOffset=u(l,24),C.fieldCount=h[16],C.definedFieldCount=h[17],C.asOffset=u(l,36),C.totalSummaryOffset=u(l,44),C.uncompressBufSize=c[13],C.extHeaderOffset=u(l,56),C.compressed=C.uncompressBufSize>0,C.summary=C.totalSummaryOffset>0,C.extHeader=C.extHeaderOffset>0,C.zoomHeaders=[];for(var m=0;m<C.numZoomLevels;m++)n=c[16+6*m],o=u(l,72+24*m),a=u(l,80+24*m),C.zoomHeaders.push({reductionLevel:n,dataOffset:o,indexOffset:a});r(s)})}function r(e){0===C.asOffset?e():i(C.asOffset,2048,function(t){for(var i=new Uint8Array(t),n="",r=0;r<i.length&&0!==i[r];r++)n+=String.fromCharCode(i[r]);var s=/(\w+)\s+(\w+)\s+("([^"]+)")?\s*\(\s*/,o=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,a=s.exec(n);if(a){var l={declType:a[1],name:a[2],comment:a[4],fields:[]};n=n.substring(a[0]);for(var h=o.exec(n);null!==h;h=o.exec(n))l.fields.push({type:h[1],name:h[2],comment:h[4]});C.schema=l}e()})}function s(){var e=C.unzoomedDataOffset-C.chromTreeOffset;e+=4-e%4,i(C.chromTreeOffset,e,function(e){var i,n=new Uint8Array(e),r=new Uint16Array(e),s=new Uint32Array(e),a=s[0];a===v?(C.bpTree={itemsPerBlock:s[1],keySize:s[2],valueSize:s[3],itemCount:u(n,16)},C.chroms=new Array(C.bpTree.itemCount),C.lengths=new Array(C.bpTree.itemCount)):i="chromosome id B+ tree not found!",i?t(null,i):function(e){for(var t,i,s,o,a,l=r[e/2+1],h=e+4;l>0;){for(l--,t="",i=0;i<C.bpTree.keySize;i++)0!==(s=n[h+i])&&(t+=String.fromCharCode(s));h+=C.bpTree.keySize,o=n[h+3]<<24|n[h+2]<<16|n[h+1]<<8|n[h+0],a=n[h+7]<<24|n[h+6]<<16|n[h+5]<<8|n[h+4],h+=8,C.chroms[o]=t,C.lengths[o]=a}}(32),o()})}function o(){i(C.unzoomedIndexOffset,48,function(e){var i=new Uint8Array(e),n=new Uint32Array(e);n[0]===m?(C.Rheader={blockSize:n[1],nItems:u(i,8),chrIdxStart:n[4],baseStart:n[5],chrIdxEnd:n[6],baseEnd:n[7],endFileOffset:u(i,32),nItemsPerSlot:n[10]},C.rootOffset=C.unzoomedIndexOffset+48,C.getValues=l,t(C)):t(null,"R-tree not found!")})}function a(e,t){var i,n,r=new Uint8Array(e),s=new Uint16Array(e),o=new Uint32Array(e),a=s[t/2+1],l={isLeaf:r[t],children:a,chrIdxStart:new Array(a),baseStart:new Array(a),chrIdxEnd:new Array(a),baseEnd:new Array(a),dataOffset:new Array(a),x:{}};if(l.isLeaf)l.x.size=new Array(a);else for(l.x.child=new Array(a),n=0;n<a;n++)l.x.child[n]=-1;for(t+=4,n=0;n<a;n++)i=t/4,l.chrIdxStart[n]=o[i],l.baseStart[n]=o[i+1],l.chrIdxEnd[n]=o[i+2],l.baseEnd[n]=o[i+3],l.dataOffset[n]=u(r,t+16),t+=24,l.isLeaf&&(l.x.size[n]=u(r,t),t+=8);return l}function l(e,t,n,r){function s(){if(l.sort(function(e,t){return(0|e.offset)-(0|t.offset)}),0===l.length)return o();for(var e=0,t=l[0].offset,n=0;n<l.length;n++)e+=l[n].size;i(t,e,function(t){for(var i,n,r=0,s=0;r<e;)i=l[s],n=C.uncompressBufSize>0?dallianceLib.inflateBuffer(t,r+2,i.size-2):t.slice(r,r+i.size),l[s].data=n,r+=i.size,s++;o()})}function o(){var e="bigwig"==C.type?h:"bigbed"==C.type&&c,t=[];if(e&&l.length)for(var i=0;i<l.length;i++)t=t.concat(e(l[i].data,f));r(t)}var l=[],u=C.chroms.indexOf(e);if(-1==u&&-1==(u=C.chroms.indexOf("chr"+e)))return r([],"chrom not found");var f={chrom:u,start:t,end:n};!function(){function e(e,n){r+=e.length;var o=e[0],a=4+32*C.Rheader.blockSize,l=e[e.length-1]+a;i(o,l-o,function(i){for(var a=0;a<e.length;a++)t(i,e[a]-o,n),0==--r&&s()})}function t(t,i,r){var s,o=a(t,i),h=n(o);if(o.isLeaf){for(s=0;s<h.length;s++)l.push({offset:o.dataOffset[h[s]],size:o.x.size[h[s]]});return[]}e(h.map(function(e){return o.dataOffset[e]}),r+1)}function n(e){for(var t=e.children,i=[],n=0;n<t;n++){var r=e.chrIdxStart[n],s=e.baseStart[n],o=e.chrIdxEnd[n],a=e.baseEnd[n];(r<f.chrom||r==f.chrom&&s<=f.end)&&(o>f.chrom||o==f.chrom&&a>=f.start)&&i.push(n)}return i}var r=0;e([C.rootOffset],1)}()}function h(e,t){var i,n,r,s,o=[],a=new Uint8Array(e),l=new Int16Array(e),h=new Int32Array(e),c=new Float32Array(e),u=h[0],f=parseInt(C.chroms[u].replace("chr",""),10),d=h[1]+1,p=h[3],g=h[4],v=a[20],m=l[11];if(v===w)for(i=0;i<m;i++)n=d+i*p,r=n+g-1,s=c[i+6],u==t.chrom&&o.push({chr:f,start:n,end:r,height:s});else if(v===y)for(i=0;i<m;i++)n=h[2*i+6]+1,r=n+g-1,s=c[2*i+7],u==t.chrom&&o.push({chr:f,start:n,end:r,height:s});else if(v===b)for(i=0;i<m;i++)n=h[3*i+6]+1,r=h[3*i+7],s=c[3*i+8],n>r&&(n=r),u==t.chrom&&o.push({chr:f,start:n,end:r,height:s});return o}function c(e,t){for(var i,n,r,s=[],o=new Uint8Array(e),a=new Int32Array(e),l=0;l<a.length;){for(i={chromid:a[l],chr:C.chroms[a[l]],start:a[l+1],end:a[l+2]},l+=12;;){if(0===(n=o[l++]))break;r+=String.fromCharCode(n)}i.chromid===t.chrom&&s.push([i.chr,i.start,i.end,r].join("\t"))}return s}function u(e,t){return e[t]+e[t+1]*x+e[t+2]*k+e[t+3]*_+e[t+4]*T}var f=2291137574,d=654086024,p=2273964779,g=3958540679,v=2026540177,m=610839776,b=1,y=2,w=3,x=(new RegExp("^[0-9]+,[0-9]+,[0-9]+"),256),k=65536,_=16777216,T=4294967296,C={fetchedData:new RTree};!function(){n()}()};window.BWReader=t,"object"==typeof e&&"object"==typeof e.exports&&(e.exports=t)}()},function(e,t){!function(){var t={string0:function(e){return this.parse(["string",e]).replace(/\0+$/,"")},header:{magic:["string",4],n_ref:"int32",format:"int32",col_seq:"int32",col_beg:"int32",col_end:"int32",meta:"int32",skip:"int32",l_nm:"int32",names:["string0",function(){return this.current.l_nm}]},chunk:{cnk_beg:"uint64",cnk_end:"uint64"},bin:{bin:"uint32",n_chunk:"int32",chunkseq:["array","chunk",function(){return this.current.n_chunk}]},index:{n_bin:"int32",binseq:["array","bin",function(){return this.current.n_bin}],n_intv:"int32",intervseq:["array","uint64",function(){return this.current.n_intv}]},tabix:{head:"header",indexseq:["array","index",function(){return this.current.head.n_ref}]}},i={header:{id1:"uint8",id2:"uint8",cm:"uint8",flg:"uint8",mtime:"uint32",xfl:"uint8",os:"uint8",xlen:"uint16"},subheader:{si1:"uint8",si2:"uint8",slen:"uint16",bsize:"uint16"},bgzfHd:{head:"header",subhead:"subheader"}},n=dallianceLib.inflateBuffer,r=function(e,t){this.vcf_data=e,this.tbi_data=t};r.prototype.readTabix=function(e){var i=function(e){var t,i={},n=0;for(var r in e)t=e[r].bin,i[t]=n,n++;return i},n=function(n){var r=new jParser(n,t).parse("tabix");r.head.names=r.head.names.split("\0"),r.bhash={};for(var s=0;s<r.head.n_ref;s++)r.bhash[s]=i(r.indexseq[s].binseq);e(r)};this.inflateRegion(this.tbi_data,0,1e8,n)},r.prototype.getRecords=function(e,t,i,n){var r=[],s=this.getChunks(e,t,i),o=this;if(-1==s)return n([]);!function e(a){a<s.length?o.inflateRegion(o.vcf_data,s[a].start,s[a].end,function(n,l){var h=n.byteLength-l+s[a].inner_end;n=o.buffer2String(n).slice(s[a].inner_start,h),n.length>0&&(n=n.split("\n").filter(function(e){if(e.length>0){var n=parseInt(e.split("\t")[1]);return t<=n&&n<=i}}).join("\n"),r.push(n)),e(++a)}):n(r.join("\n"))}(0)},r.prototype.getChunks=function(e,t,i){var n=this.tabix,r=this;if(-1==(e=n.head.names.indexOf(e.toString())))return-1;var s=this.reg2bins(t,i+1).filter(function(t){return void 0!==n.bhash[e][t]}),o=s.map(function(t){return r.bin2Ranges(n,e,t)}),a=o.reduce(function(e,t){return t.forEach(function(t){e.push(t)}),e},[]);return a=this.remove_duplicates(a)},r.prototype.inflateRegion=function(e,t,i,n){var r=[],s=this,o=function(t,a){r.push(t),-1==a?n(s.appendBuffers(r),r[r.length-1].byteLength):a<=i?s.inflateBlock(e,a,o):n(s.appendBuffers(r),r[r.length-1].byteLength)};this.inflateBlock(e,t,o)},r.prototype.inflateBlock=function(e,t,i){var r=function(r){e.slice(t,r.subhead.bsize+1).fetch(function(e){var s=n(e,18,e.byteLength-18),o=t+r.subhead.bsize+1;27==r.subhead.bsize&&(o=-1),i(s,o)})};this.getBGZFHD(e,t,r)},r.prototype.getBGZFHD=function(e,t,n){e.slice(t,19).fetch(function(e){var t=new jParser(e,i),r=t.parse("bgzfHd");n(r)})},r.prototype.appendBuffers=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].byteLength;var n=new Uint8Array(t),r=0;for(i=0;i<e.length;i++)n.set(new Uint8Array(e[i]),r),r+=e[i].byteLength;return n.buffer},r.prototype.buffer2String=function(e){for(var t="",i=new Uint8Array(e),n=0;n<i.length;++n)t+=String.fromCharCode(i[n]);return t},r.prototype.remove_duplicates=function(e){for(var t={},i=e.length-1;i>=0;i--){var n=JSON.stringify(e[i]);t[n]?e.splice(i,1):t[n]=!0}return e},r.prototype.bin2Ranges=function(e,t,i){for(var n,r=[],s=e.indexseq[t].binseq,o=s[e.bhash[t][i]].chunkseq,a=0;a<o.length;a++)n=o[a],r.push({start:Math.floor(n.cnk_beg/65536),inner_start:n.cnk_beg%65536,end:Math.floor(n.cnk_end/65536),inner_end:n.cnk_end%65536});return r},r.prototype.reg2bins=function(e,t){var i,n=[];for(--t,n.push(0),i=1+(e>>26);i<=1+(t>>26);++i)n.push(i);for(i=9+(e>>23);i<=9+(t>>23);++i)n.push(i);for(i=73+(e>>20);i<=73+(t>>20);++i)n.push(i);for(i=585+(e>>17);i<=585+(t>>17);++i)n.push(i);for(i=4681+(e>>14);i<=4681+(t>>14);++i)n.push(i);return n},window.VCFReader=r,"object"==typeof e&&"object"==typeof e.exports&&(e.exports=r)}()},function(e,t,i){(function(t){var i=Base.extend({urlParamTemplate:"r=__CHR__:__START__-__END__",width:1e3,longestLabel:30,defaultLength:5e3,defaultScrollDelta:100,tracks:[],highlights:[],plugins:[],dragAction:"scroll",wheelAction:"off",isStatic:!1,saveable:!1,saveKey:"",storageType:"sessionStorage",autoHideMessages:!0,trackAutoHeight:!1,hideEmptyTracks:!0,genome:void 0,useHash:void 0,chr:1,start:1,end:1e6,constructor:function(e){var n=this;if(!this.supported())return this.die("Your browser does not support this functionality");e=e||{},e.container=t(e.container),e.container&&e.container.length||(e.container=t("<div>").appendTo("body")),e.container.addClass("genoverse").data("genoverse",this),t.extend(this,e),this.eventNamespace=".genoverse."+ ++i.id,this.events={browser:{},tracks:{}},t.when(i.ready,this.loadGenome(),this.loadPlugins()).always(function(){i.wrapFunctions(n),n.init()})},loadGenome:function(){if("string"==typeof this.genome){var e=this.genome;return t.ajax({url:i.origin+"js/genomes/"+e+".js",dataType:"script",context:this,success:function(){this.genome=i.Genomes[e],this.genome||this.die("Unable to load genome "+e)}})}},loadPlugins:function(e){function n(e){function n(){function n(){s.loadedPlugins[e]=s.loadedPlugins[e]||"script",a.resolve(e)}if(i.Plugins[e].noCSS||t('link[href="'+r+'"]').length)return n();t('<link href="'+r+'" rel="stylesheet">').on("load",n).appendTo("body")}var r=i.origin+"css/"+e+".css",o=i.origin+"js/plugins/"+e+".js",a=t.Deferred();return s.loadedPlugins[e]||t('script[src="'+o+'"]').length?n():t.getScript(o,n),a}function r(e){function n(){!0!==s.loadedPlugins[e]&&(i.Plugins[e].call(s),s.container.addClass("gv-"+e.replace(/([A-Z])/g,"-$1").toLowerCase()+"-plugin"),s.loadedPlugins[e]=!0),o.resolve()}if("function"!=typeof i.Plugins[e]||!0===s.loadedPlugins[e])return[];var r=i.Plugins[e].requires,o=t.Deferred();return r?t.when(s.loadPlugins(r)).done(n):n(),o}var s=this,o=t.Deferred();e=e||this.plugins,this.loadedPlugins=this.loadedPlugins||{};for(var a in i.Plugins)this.loadedPlugins[a]=this.loadedPlugins[a]||"script";return"string"==typeof e&&(e=[e]),t.when.apply(t,t.map(e,n)).done(function(){for(var e,i=[],n=0;n<arguments.length;n++)e=arguments[n],!0!==s.loadedPlugins[e]&&i.push(r(e));t.when.apply(t,i).always(o.resolve)}),o},init:function(){var e=this.width;this.addDomElements(e),this.addUserEventHandlers(),this.isStatic&&(this.dragAction=this.wheelAction="off",this.urlParamTemplate=!1),this.tracksById={},this.prev={},this.legends={},this.saveKey=this.saveKey?"genoverse-"+this.saveKey:"genoverse",this.urlParamTemplate=this.urlParamTemplate||"",this.useHash="boolean"==typeof this.useHash?this.useHash:"function"!=typeof window.history.pushState,this.textWidth=document.createElement("canvas").getContext("2d").measureText("W").width,this.labelWidth=this.labelContainer.outerWidth(!0),this.width-=this.labelWidth,this.paramRegex=this.urlParamTemplate?new RegExp("([?&;])"+this.urlParamTemplate.replace(/(\b(\w+=)?__CHR__(.)?)/,"$2([\\w\\.]+)$3").replace(/(\b(\w+=)?__START__(.)?)/,"$2(\\d+)$3").replace(/(\b(\w+=)?__END__(.)?)/,"$2(\\d+)$3")+"([;&])"):"";var t=this.getURLCoords(),i=t.chr&&t.start&&t.end?t:{chr:this.chr,start:this.start,end:this.end};this.chr=i.chr,this.genome&&(this.chromosomeSize=this.genome[this.chr].size),this.canChangeChr=!!this.genome,this.saveable?this.loadConfig():this.addTracks(),this.setRange(i.start,i.end),this.highlights.length&&this.addHighlights(this.highlights)},loadConfig:function(){function e(e,t){for(s in t)if("config"===s)c[t.id]=t[s];else{if("height"===s&&(t[s]=parseInt(t[s],10),isNaN(t[s])))continue;e.prototype[s]=t[s]}}this.defaultTracks=t.extend([],!0,this.tracks);var n=window[this.storageType].getItem(this.saveKey);if(!n)return this.addTracks();n=JSON.parse(n);var r,s,o,a=i.getAllTrackTypes(),l=[],h={},c={};for(r=0;r<this.tracks.length;r++)this.tracks[r].prototype.id&&(h[this.tracks[r].prototype.id]=this.tracks[r]);for(r=0;r<n.length;r++)o=h[n[r].id],o?(e(o,n[r]),o._fromStorage=!0):a[n[r].namespace]&&(o=a[n[r].namespace],this.trackIds=this.trackIds||{},this.trackIds[o.prototype.id]=this.trackIds[o.prototype.id]||1,n[r].id=n[r].id||o.prototype.id,o=o.extend({id:h[n[r].id]?o.prototype.id+(h[o.prototype.id]?this.trackIds[o.prototype.id]++:""):n[r].id}),e(o,n[r]),l.push(o));for(r=0;r<this.tracks.length;r++)this.tracks[r].prototype.id&&!this.tracks[r]._fromStorage||l.push(this.tracks[r]);this.tracks=l,this.savedConfig=c,this.addTracks()},saveConfig:function(){if(!this._constructing&&this.saveable){for(var e,t,n=[],r=0;r<this.tracks.length;r++)if(this.tracks[r].id&&!(this.tracks[r]instanceof i.Track.Legend)&&!(this.tracks[r]instanceof i.Track.HighlightRegion)){if(e={id:this.tracks[r].id,namespace:this.tracks[r].namespace,order:this.tracks[r].order,autoHeight:this.tracks[r].autoHeight,height:this.tracks[r].height-(this.tracks[r].initialHeight-this.tracks[r].defaultHeight)},this.tracks[r].config)for(t in this.tracks[r].config)e.config=e.config||{},e.config[t]=this.tracks[r].config[t];n.push(e)}try{window[this.storageType].setItem(this.saveKey,JSON.stringify(n))}catch(e){}}},resetConfig:function(){var e=[];this.tracksById.highlights&&(this.tracksById.highlights.removeHighlights(),e=t.map(this.tracksById.highlights.prop("featuresById"),function(e){return e})),window[this.storageType].removeItem(this.saveKey),this._constructing=!0,this.savedConfig={},this.removeTracks(t.extend([],this.tracks)),this.addTracks(t.extend(!0,[],this.defaultTracks)),e.length&&this.addHighlights(e),this._constructing=!1},addDomElements:function(e){this.menus=t(),this.labelContainer=t('<ul class="gv-label-container">').appendTo(this.container).sortable({items:"li:not(.gv-unsortable)",handle:".gv-handle",axis:"y",helper:"clone",cursor:"move",update:t.proxy(this.updateTrackOrder,this),start:function(e,t){t.placeholder.css({height:t.item.height(),visibility:"visible"}).html(t.item.html()),t.helper.hide()}}),this.wrapper=t('<div class="gv-wrapper">').appendTo(this.container),this.selector=t('<div class="gv-selector gv-crosshair">').appendTo(this.wrapper),this.selectorControls=this.zoomInHighlight=this.zoomOutHighlight=t(),this.container.addClass("gv-canvas-container").width(e),this.isStatic||(this.selectorControls=t('<div class="gv-selector-controls gv-panel">  <div class="gv-button-set">  <div class="gv-position">    <div class="gv-chr"></div>    <div class="gv-start-end">      <div class="gv-start"></div>      <div class="gv-end"></div>    </div>  </div>  </div>  <div class="gv-button-set">    <button class="gv-zoom-here">Zoom here</button>  </div>  <div class="gv-button-set">    <button class="gv-center">Center</button>  </div>  <div class="gv-button-set">    <button class="gv-highlight">Highlight</button>  </div>  <div class="gv-button-set">    <button class="gv-cancel">Cancel</button>  </div></div>').appendTo(this.selector),this.zoomInHighlight=t('<div class="gv-canvas-zoom gv-i">  <div class="gv-t gv-l gv-h"></div>  <div class="gv-t gv-r gv-h"></div>  <div class="gv-t gv-l gv-v"></div>  <div class="gv-t gv-r gv-v"></div>  <div class="gv-b gv-l gv-h"></div>  <div class="gv-b gv-r gv-h"></div>  <div class="gv-b gv-l gv-v"></div>  <div class="gv-b gv-r gv-v"></div></div>').appendTo("body"),this.zoomOutHighlight=this.zoomInHighlight.clone().toggleClass("gv-i gv-o").appendTo("body"))},addUserEventHandlers:function(){var e=this,i={};this.container.on({mousedown:function(t){return e.hideMessages(),t.which&&1!==t.which||this===e.selector[0]&&t.target!==this||e.mousedown(t),!1},mousewheel:function(t,i,n,r){if(e.noWheelZoom)return!0;if(e.hideMessages(),0===r&&0!==n)e.startDragScroll(t),e.move(10*-n),e.stopDragScroll(!1);else if("zoom"===e.wheelAction)return e.mousewheelZoom(t,i)},dblclick:function(t){if(e.isStatic)return!0;e.hideMessages(),e.mousewheelZoom(t,1)}},".gv-image-container, .gv-selector"),this.selectorControls.on("click",function(t){var i=e.getSelectorPosition();switch(t.target.className){case"gv-zoom-here":e.setRange(i.start,i.end,!0);break;case"gv-center":e.moveTo(e.chr,i.start,i.end,!0,!0),e.cancelSelect();break;case"gv-highlight":e.addHighlight({chr:e.chr,start:i.start,end:i.end});case"gv-cancel":e.cancelSelect()}}),i["mouseup"+this.eventNamespace]=t.proxy(this.mouseup,this),i["mousemove"+this.eventNamespace]=t.proxy(this.mousemove,this),i["keydown"+this.eventNamespace]=t.proxy(this.keydown,this),i["keyup"+this.eventNamespace]=t.proxy(this.keyup,this),i["mousewheel"+this.eventNamespace]=function(t){"zoom"===e.wheelAction&&(e.wheelTimeout&&clearTimeout(e.wheelTimeout),e.noWheelZoom=e.noWheelZoom||t.target!==e.container[0],e.wheelTimeout=setTimeout(function(){e.noWheelZoom=!1},300))},t(document).on(i),t(window).on((this.useHash?"hashchange":"popstate")+this.eventNamespace,t.proxy(this.popState,this))},onTracks:function(){for(var e,i=t.extend([],arguments),n=i.shift(),r=0;r<this.tracks.length;r++)this.tracks[r].disabled||(e=this.tracks[r]._interface[n],e?this.tracks[r][e][n].apply(this.tracks[r][e],i):this.tracks[r][n]&&this.tracks[r][n].apply(this.tracks[r],i))},reset:function(){this.onTracks.apply(this,["reset"].concat([].slice.call(arguments))),this.prev={},this.scale=9e99,this.setRange(this.start,this.end)},setWidth:function(e){this.width=e,this.width-=this.labelWidth,this.controlPanel&&(this.width-=this.controlPanel.width()),this.superContainer?(this.superContainer.width(e),this.container.width(this.width)):this.container.width(e),this.onTracks("setWidth",this.width),this.reset("resizing")},mousewheelZoom:function(e,i){var n=this;return clearTimeout(this.zoomDeltaTimeout),clearTimeout(this.zoomTimeout),this.zoomDeltaTimeout=setTimeout(function(){i>0?n.zoomInHighlight.css({left:e.pageX-20,top:e.pageY-20,display:"block"}).animate({width:80,height:80,top:"-=20",left:"-=20"},{complete:function(){t(this).css({width:40,height:40,display:"none"})}}):n.zoomOutHighlight.css({left:e.pageX-40,top:e.pageY-40,display:"block"}).animate({width:40,height:40,top:"+=20",left:"+=20"},{complete:function(){t(this).css({width:80,height:80,display:"none"})}})},100),this.zoomTimeout=setTimeout(function(){n[i>0?"zoomIn":"zoomOut"](e.pageX-n.container.offset().left-n.labelWidth),"select"===n.dragAction&&n.moveSelector(e)},300),!1},startDragScroll:function(e){this.dragging="scroll",this.scrolling=!e,this.dragOffset=e?e.pageX-this.left:0,this.dragStart=this.start,this.scrollDelta=Math.max(this.scale,this.defaultScrollDelta)},stopDragScroll:function(e){this.dragging=!1,this.scrolling=!1,!1!==e&&(this.start!==this.dragStart&&this.updateURL(),this.checkTrackHeights())},startDragSelect:function(e){if(!e)return!1;var t=Math.max(0,e.pageX-this.wrapper.offset().left-2);this.dragging="select",this.selectorStalled=!1,this.selectorStart=t,this.selector.css({left:t,width:0}).removeClass("gv-crosshair"),this.selectorControls.hide()},stopDragSelect:function(e){if(!e)return!1;if(this.dragging=!1,this.selectorStalled=!0,this.selector.outerWidth(!0)<2)return this.cancelSelect();var t=Math.min(e.pageY-this.wrapper.offset().top,this.wrapper.outerHeight(!0)-1.2*this.selectorControls.outerHeight(!0)),i=this.getSelectorPosition();this.selectorControls.find(".gv-chr").html(this.chr),this.selectorControls.find(".gv-start").html(i.start),this.selectorControls.find(".gv-end").html(i.end),this.selectorControls.find(".gv-selector-location").html(this.chr+":"+i.start+"-"+i.end).end().css({top:t,left:this.selector.outerWidth(!0)/2-this.selectorControls.outerWidth(!0)/2}).show()},cancelSelect:function(e){e||(this.dragging=!1),this.selectorStalled=!1,this.selector.addClass("gv-crosshair").width(0),this.selectorControls.hide(),"scroll"===this.dragAction&&this.selector.hide()},dragSelect:function(e){var t=e.pageX-this.wrapper.offset().left;t>this.selectorStart?this.selector.css({left:this.selectorStart,width:Math.min(t-this.selectorStart,this.width-this.selectorStart-1)}):this.selector.css({left:Math.max(t,1),width:Math.min(this.selectorStart-t,this.selectorStart-1)})},setDragAction:function(e,t){this.dragAction=e,"select"===this.dragAction?this.selector.addClass("gv-crosshair").width(0).show():t&&!this.selector.hasClass("gv-crosshair")?this.selectorStalled=!1:(this.cancelSelect(),this.selector.hide())},toggleSelect:function(e){e?(this.prev.dragAction="scroll",this.setDragAction("select")):(this.setDragAction(this.prev.dragAction,!0),delete this.prev.dragAction)},setWheelAction:function(e){this.wheelAction=e},keydown:function(e){16!==e.which||this.prev.dragAction||"scroll"!==this.dragAction?27===e.which&&(this.cancelSelect(),this.closeMenus()):this.toggleSelect(!0)},keyup:function(e){16===e.which&&this.prev.dragAction&&this.toggleSelect()},mousedown:function(e){switch(e.shiftKey?"scroll"===this.dragAction&&this.toggleSelect(!0):this.prev.dragAction&&this.toggleSelect(),this.dragAction){case"select":this.startDragSelect(e);break;case"scroll":this.startDragScroll(e)}},mouseup:function(e){if(!this.dragging)return!1;switch(this.dragging){case"select":this.stopDragSelect(e);break;case"scroll":this.stopDragScroll()}},mousemove:function(e){if(this.dragging&&!this.scrolling)switch(this.dragAction){case"scroll":this.move(e.pageX-this.dragOffset-this.left);break;case"select":this.dragSelect(e)}else"select"===this.dragAction&&this.moveSelector(e)},moveSelector:function(e){this.selectorStalled||this.selector.css("left",e.pageX-this.wrapper.offset().left-2)},move:function(e){var t,i,n,r=this.scale;r>1&&(e=Math.round(e/r)*r),n=this.left+e,n<=this.minLeft?(n=this.minLeft,e=this.minLeft-this.left):n>=this.maxLeft&&(n=this.maxLeft,e=this.maxLeft-this.left),t=Math.max(Math.round(this.start-e/r),1),i=t+this.length-1,i>this.chromosomeSize&&(i=this.chromosomeSize,t=i-this.length+1),this.left=n,t!==this.dragStart&&(this.closeMenus(),this.cancelSelect(!0)),this.onTracks("move",e),this.setRange(t,i)},moveTo:function(e,t,i,n,r){void 0!==e&&e!=this.chr&&(this.canChangeChr?(this.genome&&this.genome[e]?(this.chr=e,this.chromosomeSize=this.genome[e].size,this.start=this.end=this.scale=-1):this.die("Chromosome cannot be found in genome"),this.onTracks("changeChr")):this.die("Chromosome changing is not allowed")),this.setRange(t,i,n,r),this.prev.scale===this.scale&&(this.left=Math.max(Math.min(this.left+Math.round((this.prev.start-this.start)*this.scale),this.maxLeft),this.minLeft),this.onTracks("moveTo",this.chr,this.start,this.end,(this.prev.start-this.start)*this.scale))},setRange:function(e,t,i,n){if(this.prev.start=this.start,this.prev.end=this.end,this.start=Math.min(Math.max("number"==typeof e?Math.floor(e):parseInt(e,10),1),this.chromosomeSize),this.end=Math.max(Math.min("number"==typeof t?Math.floor(t):parseInt(t,10),this.chromosomeSize),1),this.end<this.start&&(this.end=Math.min(this.start+this.defaultLength-1,this.chromosomeSize)),n&&this.end-this.start+1!==this.length)if(this.end===this.chromosomeSize)this.start=this.end-this.length+1;else{var r=(this.start+this.end)/2;this.start=Math.max(Math.floor(r-this.length/2),1),this.end=this.start+this.length-1,this.end>this.chromosomeSize&&(this.end=this.chromosomeSize,this.start=this.end-this.length+1)}else this.length=this.end-this.start+1;this.setScale(),!0!==i||this.prev.start===this.start&&this.prev.end===this.end||this.updateURL()},setScale:function(){this.prev.scale=this.scale,this.scale=this.width/this.length,this.scaledStart=this.start*this.scale,this.prev.scale!==this.scale&&(this.left=0,this.minLeft=Math.round((this.end-this.chromosomeSize)*this.scale),this.maxLeft=Math.round((this.start-1)*this.scale),this.labelBuffer=Math.ceil(this.textWidth/this.scale)*this.longestLabel,this.prev.scale&&(this.cancelSelect(),this.closeMenus()),this.onTracks("setScale"),this.onTracks("makeFirstImage"))},checkTrackHeights:function(){this.dragging||this.onTracks("checkHeight")},resetTrackHeights:function(){this.onTracks("resetHeight")},zoomIn:function(e){e||(e=this.width/2);var t=Math.round(this.start+e/(2*this.scale)),i=2===this.length?t:Math.round(t+(this.length-1)/2);this.setRange(t,i,!0)},zoomOut:function(e){e||(e=this.width/2);var t=Math.round(this.start-e/this.scale),i=1===this.length?t+1:Math.round(t+2*(this.length-1));this.setRange(t,i,!0)},addTrack:function(e,t){return this.addTracks([e],t)[0]},addTracks:function(e,n){var r,s={browser:this,width:this.width},o=!!e;if(e=e||t.extend([],this.tracks),o&&!t.grep(this.tracks,function(e){return"function"==typeof e}).length){var a=(n?t.grep(this.tracks,function(e){return e.order<n}):this.tracks).sort(function(e,t){return t.order-e.order})[0];a&&(r=a.order+.1)}for(var l=0;l<e.length;l++)e[l]=new e[l](t.extend(s,{namespace:i.getTrackNamespace(e[l]),order:"number"==typeof r?r:l,config:this.savedConfig?t.extend(!0,{},this.savedConfig[e[l].prototype.id]):void 0})),e[l].id&&(this.tracksById[e[l].id]=e[l]),o?this.tracks.push(e[l]):this.tracks[l]=e[l];return this.sortTracks(),this.saveConfig(),e},removeTrack:function(e){this.removeTracks((e.prop("childTracks")||[]).concat(e))},removeTracks:function(e){for(var t,i,n=e.length;n--;){for(t=e[n],i=this.tracks.length;i--;)if(t===this.tracks[i]){this.tracks.splice(i,1);break}t.id&&delete this.tracksById[t.id],t.destructor()}this.saveConfig()},sortTracks:function(){if(!t.grep(this.tracks,function(e){return"object"!=typeof e}).length){for(var e,i=t.extend([],this.tracks).sort(function(e,t){return e.order-t.order}),n=t(),r=t(),s=0;s<i.length;s++)i[s].prop("parentTrack")||(i[s].prop("fixedOrder")||i[s].prop("order",s),e=i[s].prop("superContainer")||i[s].prop("container"),i[s].prop("menus").length&&i[s].prop("top",e.position().top),n.push(i[s].prop("label")[0]),r.push(e[0]));this.labelContainer.append(n),this.wrapper.append(r),this.tracks=i,n.map(function(){return t(this).data("track")}).each(function(){if(this.prop("menus").length){var e=(this.prop("superContainer")||this.prop("container")).position().top-this.prop("top");this.prop("menus").css("top",function(t,i){return parseInt(i,10)+e}),this.prop("top",null)}}),i=n=r=null}},updateTrackOrder:function(e,t){var i=t.item.data("track");if(!i.prop("unsortable")&&!i.prop("fixedOrder")){var n,r=t.item.prev().data("track"),s=t.item.next().data("track"),o=r?r.prop("order"):0,a=s?s.prop("order"):0,l=o||a;n=r&&s&&Math.floor(a)===Math.floor(o)?o+(a-o)/2:l+(o?1:-1)*Math.abs(Math.round(l)-l||1)/2,i.prop("order",n),this.sortTracks(),this.saveConfig()}},updateURL:function(){this.urlParamTemplate&&(this.useHash?window.location.hash=this.getQueryString():window.history.pushState({},"",this.getQueryString()))},popState:function(){var e=this.getURLCoords(),t=parseInt(e.start,10),i=parseInt(e.end,10);(e.chr&&e.chr!=this.chr||e.start&&(t!==this.start||i!==this.end))&&this.moveTo(e.chr,t,i),this.closeMenus(),this.hideMessages()},getURLCoords:function(){var e=((this.useHash?window.location.hash.replace(/^#/,"?")||window.location.search:window.location.search)+"&").match(this.paramRegex),i={},n=0;return e?(e=e.slice(2,-1),t.each(this.urlParamTemplate.split("__"),function(){var t=this.match(/^(CHR|START|END)$/);t&&(i[t[1].toLowerCase()]="CHR"===t[1]?e[n++]:parseInt(e[n++],10))}),i):i},getQueryString:function(){var e=this.urlParamTemplate.replace("__CHR__",this.chr).replace("__START__",this.start).replace("__END__",this.end);return this.useHash?e:window.location.search?(window.location.search+"&").replace(this.paramRegex,"$1"+e+"$5").slice(0,-1):"?"+e},getChromosomeSize:function(e){return e&&this.genome&&this.genome[e]?this.genome[e].size:this.chromosomeSize},supported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},die:function(e,t){if(!t||!t.length)throw e;t.html(e),this.failed=!0},menuTemplate:t('<div class="gv-menu"><div class="gv-close gv-menu-button fa fa-times-circle"></div><div class="gv-menu-loading">Loading...</div><div class="gv-menu-content"><div class="gv-title"></div><a class="gv-focus" href="#">Focus here</a><a class="gv-highlight" href="#">Highlight this feature</a><table></table></div></div>').on("click",function(e){t(e.target).hasClass("gv-close")&&t(this).fadeOut("fast",function(){var e=t(this).data();e.track&&e.track.prop("menus",e.track.prop("menus").not(this)),e.browser.menus=e.browser.menus.not(this)})}),makeMenu:function(e,i,n){if(!e)return!1;if(Array.isArray(e)||(e=[e]),0===e.length)return!1;if(1===e.length)return this.makeFeatureMenu(e[0],i,n);var r=this,s=this.menuTemplate.clone(!0).data({browser:this}),o=t(".gv-menu-content",s).addClass("gv-menu-content-first"),a=t("table",o);return t(".gv-focus, .gv-highlight, .gv-menu-loading",s).remove(),t(".gv-title",s).html(e.length+" features"),t.each(e.sort(function(e,t){return e.start-t.start}),function(e,i){var s=i.chr+":"+i.start+(i.end===i.start?"":"-"+i.end),o=i.menuLabel||i.name||(Array.isArray(i.label)?i.label.join(" "):i.label)||i.id+"";t('<a href="#">').html(o.match(s)?o:s+" "+o).on("click",function(e){return r.makeFeatureMenu(i,e,n),!1}).appendTo(t("<td>").appendTo(t("<tr>").appendTo(a)))}),t('<div class="gv-menu-scroll-wrapper">').append(a).appendTo(o),s.appendTo(this.superContainer||this.container).show(),i&&s.css({left:0,top:0}).position({of:i,my:"left top",collision:"flipfit"}),this.menus=this.menus.add(s),n&&n.prop("menus",n.prop("menus").add(s)),s},makeFeatureMenu:function(e,i,n){function r(){var e=t(this).data(),i=e.end-e.start+1,n=Math.max(Math.round(i/4),25);return x.moveTo(e.chr,e.start-n,e.end+n,!0),!1}function s(){return x.addHighlight(t(this).data()),!1}var o,a,l,h,c,u,f,d,p,g,v,m,b,y,w,x=this,k=this.superContainer||this.container;return e.menuEl?e.menuEl.appendTo(k):(o=x.menuTemplate.clone(!0).data({browser:x,feature:e}),a=t(".gv-menu-content",o).remove(),l=t(".gv-menu-loading",o),h=n?n.controller.populateMenu(e):e,c="object"==typeof h&&"function"==typeof h.promise,c&&l.show(),t.when(h).done(function(i){for(Array.isArray(i)||(i=[i]),u=0;u<i.length;u++){table="",d=a.clone().addClass(u?"":"gv-menu-content-first").appendTo(o),p=void 0!==i[u].chr?i[u].chr:e.chr,g=parseInt(void 0!==i[u].start?i[u].start:e.start,10),v=parseInt(void 0!==i[u].end?i[u].end:e.end,10),y=Math.max.apply(Math,t.map(i[u],function(e){return Array.isArray(e)?e.length:1})),t(".gv-title",d)[i[u].title?"html":"remove"](i[u].title),n&&g&&v&&!x.isStatic?(m={chr:p,start:g,end:Math.max(v,g),label:e.label||(i[u].title||"").replace(/<[^>]+>/g,""),color:e.color},t(".gv-focus",d).data(m).on("click",r),t(".gv-highlight",d).data(m).on("click",s)):t(".gv-focus, .gv-highlight",d).remove();for(b in i[u])if((!/^start|end$/.test(b)||!1!==i[u][b])&&"title"!==b){if(w=""===i[u][b]?' colspan="'+(y+1)+'"':"",table+="<tr><td"+w+">"+b+"</td>",!w)if(Array.isArray(i[u][b]))for(f=0;f<i[u][b].length;f++)table+="<td>"+i[u][b][f]+"</td>";else table+=1===y?"<td>"+i[u][b]+"</td>":'<td colspan="'+y+'">'+i[u][b]+"</td>";table+="</tr>"}t("table",d)[table?"html":"remove"](table)}c&&l.hide()}),n&&o.addClass(n.id).data("track",n),e.menuEl=o.appendTo(k)),x.menus=x.menus.add(e.menuEl),n&&n.prop("menus",n.prop("menus").add(e.menuEl)),e.menuEl.show(),i&&e.menuEl.css({left:0,top:0}).position({of:i,my:"left top",collision:"flipfit"}),e.menuEl},closeMenus:function(e){e=e||this,e.menus.filter(":visible").children(".gv-close").trigger("click"),e.menus=t()},hideMessages:function(){this.autoHideMessages&&this.wrapper.find(".gv-message-container").addClass("gv-collapsed")},getSelectorPosition:function(){var e=this.selector.position().left,t=this.selector.outerWidth(!0),i=Math.round(e/this.scale)+this.start,n=Math.round((e+t)/this.scale)+this.start-1;return n=n<=i?i:n,{start:i,end:n,left:e,width:t}},addHighlight:function(e){this.addHighlights([e])},addHighlights:function(e){this.tracksById.highlights||this.addTrack(i.Track.HighlightRegion),this.tracksById.highlights.addHighlights(e)},on:function(e,n,r,s){function o(e,t){e=e.split(" ");for(var i=0;i<e.length;i++)g[e[i]]=(g[e[i]]||[]).concat(t)}function a(e){return e.toString()}function l(e){for(u=e.toString(),c=0;c<f.length;c++)if(u===f[c])return!0}var h,c,u,f,d,p=this,g={};if("object"==typeof e){for(h in e)o(h,e[h]);n=n||this}else void 0===r&&(r=n,n=this),o(e,r);var v=n instanceof i.Track||"tracks"===n?"tracks":"browser";for(h in g)d=h+(s?".once":""),p.events[v][d]=p.events[v][d]||[],f=t.map(g[h],a),t.grep(p.events[v][d],l).length||p.events[v][d].push.apply(p.events[v][d],g[h])},once:function(e,t,i){this.on(e,t,i,!0)},destroy:function(){this.onTracks("destructor"),(this.superContainer||this.container).empty(),this.zoomInHighlight&&this.zoomInHighlight.add(this.zoomOutHighlight).remove(),t(window).add(document).off(this.eventNamespace);for(var e in this)delete this[e]}},{id:0,ready:t.Deferred(),origin:((t("script[src]").filter(function(){return/\/(?:Genoverse|genoverse\.min.*)\.js$/.test(this.src)}).attr("src")||"").match(/(.*)js\/\w+/)||[])[1]||"",Genomes:{},Plugins:{},wrapFunctions:function(e){for(var t in e)"function"!=typeof e[t]||"function"==typeof e[t].ancestor||t.match(/^(base|extend|constructor|on|once|prop|loadPlugins|loadGenome)$/)||i.functionWrap(t,e)},functionWrap:function(e,t){if(t.functions=t.functions||{},!t.functions[e]&&!/^(before|after)/.test(e)){var n,r=e.substring(0,1).toUpperCase()+e.substring(1),s=t instanceof i,o=s||t instanceof i.Track?t:t.track,a=s?t.events.browser:t.browser.events.tracks;o.debug&&(n=[s?"Genoverse":o.id||o.name||"Track"],s||t===o||n.push(t instanceof i.Track.Controller?"Controller":t instanceof i.Track.Model?"Model":"View"),n=n.concat(e).join(".")),t.functions[e]=t[e],t[e]=function(){function t(e){var t=a[e+r+".once"]||[],i=(a[e+r]||[]).concat(t,"function"==typeof o[e+r]?o[e+r]:[]);t.length&&delete a[e+r+".once"];for(var n=0;n<i.length;n++)i[n].apply(this,s)}var i,s=[].slice.call(arguments),l=(this._currentConfig||(this.track?this.track._currentConfig:{})||{}).func;return!0===o.debug?console.log(n):("time"===o.debug||"object"==typeof o.debug&&o.debug[e])&&console.time("time: "+n),t.call(this,"before"),i=l&&l[e]?function(){return this.base=this.functions[e]||function(){},l[e].apply(this,arguments)}.apply(this,s):this.functions[e].apply(this,s),t.call(this,"after"),("time"===o.debug||"object"==typeof o.debug&&o.debug[e])&&console.timeEnd("time: "+n),i}}},getAllTrackTypes:function(e,n){if(e=e||i.Track,n&&(e=e[n]),!e)return[];var r={};return t.each(e,function(n,s){"function"!=typeof s||Base[n]||/^(Controller|Model|View)$/.test(n)||(t.each(i.getAllTrackTypes(e,n),function(e,t){"function"==typeof t&&(r[n+"."+e]=t)}),r[n]=s)}),r},getTrackNamespace:function(e){for(var n,r=i.getAllTrackTypes(),s=t.map(r,function(t,i){return e===t||e.prototype instanceof t?i:null}),o=s.length;s.length>1;){for(n=0;n<s.length-1;n++){if(r[s[n]].prototype instanceof r[s[n+1]]){s.splice(n+1,1);break}if(r[s[n+1]].prototype instanceof r[s[n]]){s.splice(n,1);break}}if(o--<0)break}return s[0]}});t(function(){t('link[href^="'+i.origin+'css/genoverse.css"]').length?i.ready.resolve():t('<link href="'+i.origin+'css/genoverse.css" rel="stylesheet">').appendTo("body").on("load",i.ready.resolve)}),window.Genoverse=i,"object"==typeof e&&"object"==typeof e.exports&&(e.exports=i)}).call(t,i(0))},function(e,t,n){(function(e){Genoverse.Track=Base.extend({height:12,margin:2,resizable:!0,border:!0,unsortable:!1,fixedOrder:!1,invert:!1,legend:!1,children:void 0,name:void 0,autoHeight:void 0,hideEmpty:void 0,constructor:function(e){(this.stranded||e.stranded)&&(this.controller=this.controller||Genoverse.Track.Controller.Stranded,this.model=this.model||Genoverse.Track.Model.Stranded),this.models={},this.views={},this.setInterface(),this.extend(e),this.setDefaults(),this.setEvents(),Genoverse.wrapFunctions(this),this.setLengthMap(),this.setMVC(),this.browser.scale&&(this.controller.setScale(),this.controller.makeFirstImage()),this.children&&this.addChildTracks(),this.legend&&this.addLegend()},setEvents:e.noop,setDefaults:function(){this.config=this.config||{},this.configSettings=this.configSettings||{},this.defaultConfig=this.defaultConfig||{},this.controls=this.controls||[],this.defaultHeight=this.height,this.defaultAutoHeight=this.autoHeight,this.autoHeight=void 0!==this.autoHeight?this.autoHeight:this.browser.trackAutoHeight,this.hideEmpty=void 0!==this.hideEmpty?this.hideEmpty:this.browser.hideEmptyTracks,this.height+=this.margin,this.initialHeight=this.height,"auto"===this.resizable&&(this.autoHeight=!0),this.setDefaultConfig()},setDefaultConfig:function(){for(var e in this.defaultConfig)void 0===this.config[e]&&(this.config[e]=this.defaultConfig[e]);this._setCurrentConfig()},setInterface:function(){var e,t=["Controller","Model","View","controller","model","view"];this._interface={};for(var i=0;i<3;i++)for(e in Genoverse.Track[t[i]].prototype)/^(constructor|init|reset|setDefaults|base|extend|lengthMap)$/.test(e)||(this._interface[e]=t[i+3])},setMVC:function(){this.model&&"function"==typeof this.model.abort&&this.model.abort(),this._defaults=this._defaults||{};var t,i=e.extend(!0,{},this.constructor.prototype,this.getSettingsForLength()[1]),n={prop:{},func:{}},r={};i.controller=i.controller||this.controller||Genoverse.Track.Controller;for(t in i)!/^(constructor|init|reset|setDefaults|base|extend|lengthMap)$/.test(t)&&isNaN(t)&&("controller"===this._interface[t]?n["function"==typeof i[t]?"func":"prop"][t]=i[t]:Genoverse.Track.prototype.hasOwnProperty(t)||/^(controller|models|views|config|disabled)$/.test(t)||(void 0===this._defaults[t]&&(this._defaults[t]=this[t]),r[t]=i[t]));for(t in this._defaults)void 0===r[t]&&(r[t]=this._defaults[t]);if(!e.isEmptyObject(this._currentConfig)){var s,o={};for(t in this._currentConfig.prop)s=this._interface[t],/model|view/.test(s)?r[s][t]!==this._currentConfig.prop[t]&&(r[s][t]=this._currentConfig.prop[t],o[s]=!0):"controller"===s?n.prop[t]=this._currentConfig.prop[t]:r[t]=this._currentConfig.prop[t];for(s in o)r[s].setDefaults(!0)}this.extend(r),this.model.setChrProps(),this.controller&&"function"!=typeof this.controller?(n.prop.threshold=n.prop.threshold||this.controller.constructor.prototype.threshold,e.extend(this.controller,n.prop,{model:this.model,view:this.view})):this.controller=this.newMVC(i.controller,n.func,e.extend(n.prop,{model:this.model,view:this.view}))},newMVC:function(t,i,n){return new(t.extend(e.extend(!0,{},t.prototype,i,{prop:e.proxy(this.prop,this)})))(e.extend(n,{browser:this.browser,width:this.width,track:this}))},setLengthMap:function(){function t(i,n){var r={browser:!0,width:!0,track:!0};for(var s in i)if(!r[s]){if(r[s]=!0,typeof i[s]!=typeof n[s])return!1;if("function"==typeof i[s]&&"function"==typeof n[s]){if(i[s].toString()!==n[s].toString())return!1}else{if(!("object"!=typeof i[s]||i[s]instanceof e||t(i[s],n[s])))return!1;if(i[s]!==n[s])return!1}}for(s in n)if(!r[s])return!1;return!0}var i,n,r,s,o,a,l,h,c,u=["model","view"],f=[],d={},p={};for(var g in this)isNaN(g)||(g=parseInt(g,10),n=this[g],f.push([g,!1===n?{threshold:g,resizable:"auto",featureHeight:0,model:Genoverse.Track.Model,view:Genoverse.Track.View}:e.extend(!0,{},n)]));for(f.push([-1,{view:this.view||Genoverse.Track.View,model:this.model||Genoverse.Track.Model}]),f=f.sort(function(e,t){return t[0]-e[0]}),h=0;h<f.length;h++)if(!f[h][1].model||!f[h][1].view){if(r={},-1!==f[h][0])for(c in f[h][1])if(this._interface[c]&&(r[this._interface[c]]=!0),r.model&&r.view)break;for(c=h+1;c<f.length&&(!f[h][1].model&&f[c][1].model&&(f[h][1].model=r.model?Genoverse.Track.Model.extend(e.extend(!0,{},f[c][1].model.prototype)):f[c][1].model),!f[h][1].view&&f[c][1].view&&(f[h][1].view=r.view?Genoverse.Track.View.extend(e.extend(!0,{},f[c][1].view.prototype)):f[c][1].view),!f[h][1].model||!f[h][1].view);c++);}for(h=0;h<f.length;h++){s=f[h-1]?f[h-1][1]:{},i=e.extend(!0,{},this.constructor.prototype,f[h][1]),o={model:{prop:{},func:{}},view:{prop:{},func:{}}};for(c in i)"constructor"!==c&&o[this._interface[c]]&&(o[this._interface[c]]["function"==typeof i[c]?"func":"prop"][c]=i[c]);for(c=0;c<u.length;c++)a=u[c],"function"==typeof i[a]&&(l=this[u[c]+"s"],s[a]instanceof i[a]?i[a]=s[a]:(i[a]=this.newMVC(i[a],o[a].func,o[a].prop),l[f[h][0]]&&t(l[f[h][0]].constructor.prototype,e.extend({},i[a].constructor.prototype,o[a].prop))&&(i[a]=l[f[h][0]])));d[f[h][0]]=f[h][1].model=i.model,p[f[h][0]]=f[h][1].view=i.view}this.lengthMap=f,this.models=d,this.views=p},getSettingsForLength:function(){for(var e=this.browser.length||this.browser.end-this.browser.start+1,t=0;t<this.lengthMap.length;t++)if(e>this.lengthMap[t][0]||1===e&&1===this.lengthMap[t][0])return this.lengthMap[t];return[]},prop:function(e,t){var i,n=["controller","model","view"];if(this._interface[e])i=this[this._interface[e]];else{for(var r=0;r<3;r++)if(this[n[r]]&&void 0!==this[n[r]][e]){i=this[n[r]];break}i=i||this}return void 0!==t&&(null===t?delete i[e]:i[e]=t),i?i[e]:void 0},setHeight:function(e,t){return e=this.disabled||!0!==t&&e<this.prop("featureHeight")||this.prop("threshold")&&!this.prop("thresholdMessage")&&this.browser.length>this.prop("threshold")?0:Math.max(e,this.prop("minLabelHeight")),this.height=e,e},resetHeight:function(){if(!0===this.resizable){var e=this.prop("resizer");this.autoHeight=!![this.defaultAutoHeight,this.browser.trackAutoHeight].sort(function(e,t){return(void 0!==e&&null!==e?0:1)-(void 0!==t&&null!==t?0:1)})[0],this.controller.resize(this.autoHeight?this.prop("fullVisibleHeight"):this.defaultHeight+this.margin+(e?e.height():0)),this.initialHeight=this.height}},setConfig:function(e){if("string"==typeof e&&2===arguments.length){var t={};t[e]=arguments[1],e=t}var i,n=!1;for(var r in e)i=e[r],void 0!==this.configSettings[r]&&void 0!==this.configSettings[r][i]&&this.config[r]!==i&&(this.config[r]=i,n=!0);if(n){var s=this.prop("featuresById");for(var o in s)delete s[o].menuEl;this._setCurrentConfig(),this.disabled||this.reset.apply(this,n?["config",e]:[]),(this.prop("childTracks")||[]).forEach(function(t){t.setConfig(e)}),this.browser.saveConfig()}},_setCurrentConfig:function(){var t,n=[],r=[];this._currentConfig={prop:{},func:{}};for(i in this.configSettings)(t=this.getConfig(i))&&(n.push(t),t.featureFilter&&r.push(t.featureFilter));n.length&&(n=e.extend.apply(e,[!0,{}].concat(n,{featureFilters:r})),delete n.featureFilter);for(i in n)this._currentConfig["function"!=typeof n[i]||/^(before|after)/.test(i)?"prop":"func"][i]=n[i]},getConfig:function(e){return this.configSettings[e][this.config[e]]},addChildTracks:function(){if(this.children){var e=this,t=this.browser,i=(Array.isArray(this.children)?this.children:[this.children]).filter(function(e){return e.prototype instanceof Genoverse.Track}),n={parentTrack:this,controls:"off",threshold:this.prop("threshold")};setTimeout(function(){e.childTracks=i.map(function(i){return i.prototype instanceof Genoverse.Track.Legend||i===Genoverse.Track.Legend?e.addLegend(i.extend(n),!0):t.addTrack(i.extend(n))}),e.controller.setLabelHeight()},1)}},addLegend:function(e,t){function i(){return n.legendTrack=n.browser.legends[s.id]||n.browser.addTrack(e.extend(s))}if(e||this.legend){e=e||(this.legend.prototype instanceof Genoverse.Track.Legend?this.legend:Genoverse.Track.Legend);var n=this,r=!0===e.prototype.shared?Genoverse.getTrackNamespace(e):e.prototype.shared||this.id,s={id:r+"Legend",name:e.prototype.name||this.name+" Legend",type:r};if(this.legendType=r,!0===t)return i();setTimeout(i,1)}},changeChr:function(){for(var e in this.models)this.models[e].setChrProps()},updateName:function(e){this.controller.setName(e)},enable:function(){!0===this.disabled&&(this.disabled=!1,this.controller.resize(this.initialHeight),this.reset())},disable:function(){this.disabled||(this.disabled=!0,this.controller.resize(0))},reset:function(){this.setLengthMap();for(var e in this.models)!1!==this.models[e].url&&this.models[e].init(!0);for(e in this.views)this.views[e].init();this.controller.reset.apply(this.controller,arguments)},remove:function(){this.browser.removeTrack(this)},destructor:function(){this.controller.destroy();var e=[this.view,this.model,this.controller,this];for(var t in e)for(var i in t)delete t[i]}})}).call(t,n(0))},function(e,t,i){(function(e){Genoverse.Track.Controller=Base.extend({scrollBuffer:1.2,threshold:1/0,clickTolerance:0,messages:void 0,constructor:function(t){e.extend(this,t),Genoverse.wrapFunctions(this),this.init()},init:function(){this.setDefaults(),this.addDomElements(),this.addUserEventHandlers(),this.deferreds=[]},setDefaults:function(){this.imgRange={},this.scrollRange={},this.messages=this.messages||{error:"ERROR: ",threshold:"Data for this track is not displayed in regions greater than ",resize:'Some features are currently hidden, <a class="gv-resize">resize to see all</a>'}},reset:function(){this.abort(),this.setDefaults(),this.resetImages(),this.browser.closeMenus(this),"resizing"!==arguments[0]&&(this.setScale(),this.makeFirstImage())},resetImages:function(){this.scrollContainer.empty(),this.resetImageRanges()},resetImageRanges:function(){this.left=0,this.scrollStart=["ss",this.browser.chr,this.browser.start,this.browser.end].join("-"),this.imgRange[this.scrollStart]=this.imgRange[this.scrollStart]||{left:-2*this.width,right:2*this.width},this.scrollRange[this.scrollStart]=this.scrollRange[this.scrollStart]||{start:this.browser.start-this.browser.length,end:this.browser.end+this.browser.length}},setName:function(t){this.track.name=t,this.labelName=this.labelName||e('<span class="gv-name">').appendTo(this.label),this.labelName.attr("title",t).html(t),this.minLabelHeight=Math.max(this.labelName.outerHeight(!0),this.labelName.outerHeight()),this.setLabelHeight(!0)},addDomElements:function(){var t=this.track.name||"";this.menus=e(),this.container=e('<div class="gv-track-container">').appendTo(this.browser.wrapper),this.scrollContainer=e('<div class="gv-scroll-container">').appendTo(this.container),this.imgContainer=e('<div class="gv-image-container">').width(this.width).addClass(this.prop("invert")?"gv-invert":""),this.messageContainer=e('<div class="gv-message-container"><div class="gv-messages"></div><i class="gv-control gv-collapse fa fa-angle-double-left"></i><i class="gv-control gv-expand fa fa-angle-double-right"></i></div>').appendTo(this.container),this.label=e("<li>").appendTo(this.browser.labelContainer).height(this.prop("height")).data("track",this.track),this.context=e("<canvas>")[0].getContext("2d"),this.prop("border")&&e('<div class="gv-track-border">').appendTo(this.container),this.prop("unsortable")?this.label.addClass("gv-unsortable"):e('<div class="gv-handle">').appendTo(this.label),this.prop("children")?(this.superContainer=e('<div class="gv-track-container gv-track-super-container">').insertAfter(this.container),this.container.appendTo(this.superContainer)):this.prop("parentTrack")&&(this.superContainer=this.prop("parentTrack").prop("superContainer"),this.container.appendTo(this.superContainer),this.label.remove(),this.label=this.prop("parentTrack").prop("label")),this.setName(t),this.container.height(this.prop("disabled")?0:Math.max(this.prop("height"),this.minLabelHeight))},addUserEventHandlers:function(){var e=this,t=this.browser;this.container.on("mouseup",".gv-image-container",function(i){i.which&&1!==i.which||"number"==typeof t.dragStart&&t.start!==t.dragStart||"select"===t.dragAction&&t.selector.outerWidth(!0)>2||e.click(i)}),this.messageContainer.children().on("click",function(){var t=e.messageContainer.children(".gv-messages").is(":visible")?" gv-collapsed":"",i=e.messageContainer.find(".gv-msg").data("code");e.messageContainer.attr("class","gv-message-container"+t),e.checkHeight(),"error"!==i&&(document.cookie=["gv_msg",i,e.prop("id")].join("_")+"=1; expires="+(t?"Tue, 19 Jan 2038":"Thu, 01 Jan 1970")+" 00:00:00 GMT; path=/")})},click:function(t){var i=e(t.target),n=t.pageX-this.container.parent().offset().left+this.browser.scaledStart,r=t.pageY-i.offset().top;return this.imgContainer.hasClass("gv-invert")&&(r=i.height()-r),this.browser.makeMenu(this.getClickedFeatures(n,r,i),t,this.track)},getClickedFeatures:function(e,t,i){var n={x:e,y:t,w:1,h:1},r=this.scale,s=r<1?this.clickTolerance:0;s&&(n.x-=s/2,n.w+=s);var o=this[i&&i.hasClass("gv-labels")?"labelPositions":"featurePositions"].search(n);return s?o.sort(function(t,i){return Math.abs(t.position[r].start-e)-Math.abs(i.position[r].start-e)}):this.model.sortFeatures(o)},showMessage:function(t,i){var n=this.messageContainer.children(".gv-messages");if(!n.children(".gv-"+t).show().length){var r=e('<div class="gv-msg gv-'+t+'">'+this.messages[t]+(i||"")+"</div>").data("code",t).prependTo(n);"resize"===t&&r.children("a.gv-resize").on("click",e.proxy(function(){this.resize(this.fullVisibleHeight)},this)),this.messageContainer[document.cookie.match(["gv_msg",t,this.prop("id")].join("_")+"=1")?"addClass":"removeClass"]("gv-collapsed")}var s=this.messageContainer.show().outerHeight(!0);s>this.prop("height")&&this.resize(s,void 0,!1),n=null},hideMessage:function(e){var t=this.messageContainer.find(".gv-msg");e?(t=t.filter(".gv-"+e).hide(),t.length&&!t.siblings().filter(function(){return"none"!==this.style.display}).length&&this.messageContainer.hide()):(t.hide(),this.messageContainer.hide()),t=null},showError:function(e){this.showMessage("error",e)},checkHeight:function(){if(this.browser.length>this.threshold?this.thresholdMessage?(this.showMessage("threshold",this.thresholdMessage),this.fullVisibleHeight=Math.max(this.messageContainer.outerHeight(!0),this.minLabelHeight)):this.fullVisibleHeight=0:this.thresholdMessage&&this.hideMessage("threshold"),this.prop("resizable")){var e;this.browser.length>this.threshold?(e=this.prop("autoHeight"),this.prop("autoHeight",!0)):this.fullVisibleHeight=this.visibleFeatureHeight()||(this.messageContainer.is(":visible")?this.messageContainer.outerHeight(!0):this.prop("hideEmpty")?0:this.minLabelHeight),this.autoResize(),void 0!==e&&this.prop("autoHeight",e)}},visibleFeatureHeight:function(){var t={x:this.browser.scaledStart,w:this.width,y:0,h:9e99},i=this.scale,n=this.featurePositions.search(t),r=this.prop("hideEmpty")?0:this.minLabelHeight,s=Math.max.apply(Math,e.map(n,function(e){return e.position[i].bottom}).concat(r));return"separate"===this.prop("labels")&&(this.labelTop=s,s+=Math.max.apply(Math,e.map(this.labelPositions.search(t).concat(this.prop("repeatLabels")?n:[]),function(e){return e.position[i].label.bottom}).concat(r))),s},autoResize:function(){var e=this.prop("autoHeight");e||"separate"===this.prop("labels")?this.resize(e?this.fullVisibleHeight:this.prop("height"),this.labelTop,!1):this.toggleExpander(!1)},resize:function(e,t,i){e=this.track.setHeight(e,t),"number"==typeof t&&this.imgContainers.children(".gv-labels").css("top",t),this.container.height(e)[e?"show":"hide"](),this.setLabelHeight(),this.toggleExpander(),!1!==i&&this.browser.saveConfig()},toggleExpander:function(t){if(!0===this.prop("resizable")){var i=this.prop("featureMargin"),n=this.prop("height");if(this.fullVisibleHeight-i.top-i.bottom>n&&!this.prop("disabled")){this.showMessage("resize");var r=this,s=this.messageContainer.outerHeight(!0);s>n&&this.resize(s,void 0,t),this.expander=(this.expander||e('<div class="gv-expander gv-static">').width(this.width).appendTo(this.container).on("click",function(){r.resize(r.fullVisibleHeight)}))[0===this.prop("height")?"hide":"show"]()}else this.expander&&(this.hideMessage("resize"),this.expander.hide())}},setLabelHeight:function(e){var t=this.prop("parentTrack");if(t)return t.controller.setLabelHeight();var i=[this].concat(this.prop("childTracks")||[]),n=i.reduce(function(e,t){return e+(t.prop("disabled")?0:t.prop("height"))},0);if(this.label.height(this.prop("disabled")?0:e&&this.minLabelHeight?Math.max(n,this.minLabelHeight):n),i.length>1){var r=i[0].prop("height");i.slice(1).forEach(function(e){var t=e.prop("height");e.prop("labelName").css("top",r)[t?"removeClass":"addClass"]("gv-hide"),r+=t})}},setWidth:function(t){var i=this.track;e.each([this,i,i.model,i.view],function(){this.width=t}),this.imgContainer.add(this.expander).width(t)},setScale:function(){var t=this;this.scale=this.browser.scale,this.track.setMVC(),this.resetImageRanges();var i=this.prop("labels");i&&"overlay"!==i&&this.model.setLabelBuffer(this.browser.labelBuffer),this.threshold!==1/0&&"auto"!==this.prop("resizable")&&(this.thresholdMessage=this.view.formatLabel(this.threshold)),e.each(this.view.setScaleSettings(this.scale),function(e,i){t[e]=i}),this.hideMessage()},move:function(e){this.left+=e,this.scrollContainer.css("left",this.left);var t=this.scrollStart;if(this.imgRange[t]&&this.imgRange[t].left+this.left>-this.scrollBuffer*this.width){var i=this.scrollRange[t].start-1;this.makeImage({scale:this.scale,chr:this.browser.chr,start:i-this.browser.length+1,end:i,left:this.imgRange[t].left,cls:t}),(this.imgRange[t]||{}).left-=this.width,(this.scrollRange[t]||{}).start-=this.browser.length}if(this.imgRange[t]&&this.imgRange[t].right+this.left<this.scrollBuffer*this.width){var n=this.scrollRange[t].end+1;this.makeImage({scale:this.scale,chr:this.browser.chr,start:n,end:n+this.browser.length-1,left:this.imgRange[t].right,cls:t}),(this.imgRange[t]||{}).right+=this.width,(this.scrollRange[t]||{}).end+=this.browser.length}},moveTo:function(e,t,i,n){var r=this.scrollRange[this.scrollStart],s=["ss",e,t,i].join("-");this.scrollRange[s]||t>r.end||i<r.start?(this.resetImageRanges(),this.makeFirstImage(s)):(this.move("number"==typeof n?n:(t-this.browser.start)*this.scale),this.checkHeight())},makeImage:function(t){t.scaledStart=t.scaledStart||t.start*t.scale,t.width=t.width||this.width,t.height=t.height||this.prop("height"),t.featureHeight=t.featureHeight||0,t.labelHeight=t.labelHeight||0;var i,n=this,r=this.browser.length>this.threshold,s=this.imgContainer.clone().addClass((t.cls+" gv-loading").replace(".","_")).css({left:t.left,display:t.cls===this.scrollStart?"block":"none"}),o=!!t.background&&e('<img class="gv-bg">').hide().addClass(t.background).data(t).prependTo(s),a=e('<img class="gv-data">').hide().data(t).appendTo(s).on("load",function(){e(this).fadeIn("fast").parent().removeClass("gv-loading"),e(this).siblings(".gv-bg").show()});if(t.container=s,this.imgContainers.push(s[0]),this.scrollContainer.append(this.imgContainers),!r&&!this.model.checkDataRange(t.chr,t.start,t.end)){var l=this.prop("dataBuffer");t.start-=l.start,t.end+=l.end,i=this.model.getData(t.chr,t.start,t.end)}return i||(i=e.Deferred(),setTimeout(e.proxy(i.resolve,this),1)),this.deferreds.push(i),i.done(function(){var e=r?[]:n.model.findFeatures(t.chr,t.start,t.end);n.render(e,a),o&&n.renderBackground(e,o)}).fail(function(e){n.showError(e)})},makeFirstImage:function(t){function i(){e.when.apply(e,u.map(function(e){return r.makeImage(e)})).done(n.resolve),p.remove()}var n=e.Deferred();if(this.scrollContainer.children().hide().filter("."+(t||this.scrollStart)).show().length)return this.scrollContainer.css("left",0),this.checkHeight(),n.resolve();var r=this,s=this.browser.chr,o=this.browser.start,a=this.browser.end,l=this.browser.length,h=this.scale,c=this.scrollStart,u=[{chr:s,start:o,end:a,scale:h,cls:c,left:0}],f=0,d=this.width;this.browser.isStatic||(o>1&&(u.push({chr:s,start:o-l,end:o-1,scale:h,cls:c,left:-this.width}),f=-this.width,d+=this.width),a<this.browser.getChromosomeSize(s)&&(u.push({chr:s,start:a+1,end:a+l,scale:h,cls:c,left:this.width}),d+=this.width));var p=this.imgContainer.clone().addClass("gv-loading").css({left:f,width:d}).prependTo(this.scrollContainer.css("left",0));if(l>this.threshold||this.model.checkDataRange(s,o,a))i();else{var g=this.prop("dataBuffer");this.model.getData(s,o-g.start-l,a+g.end+l).done(i).fail(function(e){r.showError(e)})}return n},render:function(t,i){var n=i.data();t=this.view.positionFeatures(this.view.scaleFeatures(t,n.scale),n);var r=e("<canvas>").attr({width:n.width,height:n.featureHeight||1}),s="separate"===this.prop("labels")&&n.labelHeight?r.clone().attr("height",n.labelHeight):r,o=r[0].getContext("2d"),a=s[0].getContext("2d");switch(o.font=a.font=this.prop("font"),this.prop("labels")){case!1:break;case"overlay":a.textAlign="center",a.textBaseline="middle";break;default:a.textAlign="left",a.textBaseline="top"}this.view.draw(t,o,a,n.scale),i.attr("src",r[0].toDataURL()),a!==o&&i.clone(!0).attr({class:"gv-labels",src:s[0].toDataURL()}).insertAfter(i),this.checkHeight(),r=s=i=null},renderBackground:function(t,i,n){var r=e("<canvas>").attr({width:this.width,height:n||1})[0];this.view.drawBackground(t,r.getContext("2d"),i.data()),i.attr("src",r.toDataURL()),r=i=null},populateMenu:function(t){var i=e.extend(!0,{},t),n={title:i.label?i.label[0]:i.id,Location:i.chr+":"+i.start+"-"+i.end};delete i.chr,delete i.start,delete i.end,delete i.sort;for(var r in i)"object"!=typeof i[r]&&n.title!==i[r]||delete i[r];return e.extend(n,i)},abort:function(){for(var e=0;e<this.deferreds.length;e++)"pending"===this.deferreds[e].state()&&this.deferreds[e].reject();this.deferreds=[]},destroy:function(){this.abort(),this.container.add(this.label).add(this.menus).remove()}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Model=Base.extend({dataType:"json",allData:!1,dataBuffer:void 0,xhrFields:void 0,url:void 0,urlParams:void 0,data:void 0,dataRequestLimit:void 0,constructor:function(t){e.extend(this,t),Genoverse.wrapFunctions(this),this.init()},init:function(e){if(this.setDefaults(e),e)for(var t in this.featuresById)delete this.featuresById[t].position;e&&!this.data||(delete this.dataRangesByChr,delete this.featuresByChr,this.featuresById={},this.setChrProps()),this.dataLoading=[]},setDefaults:function(e){this.dataBuffer=this.dataBuffer||{start:0,end:0},this.urlParams=this.urlParams||{},this.xhrFields=this.xhrFields||{},this.dataBufferStart=this.dataBuffer.start,this._url||(this._url=this.url),e&&!this.url&&this._url&&(this.url=this._url)},setChrProps:function(){var e=this.browser.chr;this.dataRangesByChr=this.dataRangesByChr||{},this.featuresByChr=this.featuresByChr||{},this.dataRangesByChr[e]=this.dataRangesByChr[e]||new RTree,this.featuresByChr[e]=this.featuresByChr[e]||new RTree},features:function(e){return this.featuresByChr[e]},dataRanges:function(e){return this.dataRangesByChr[e]},parseURL:function(e,t,i,n){return this.allData&&(t=1,i=this.browser.getChromosomeSize(e)),(n||this.url).replace(/__ASSEMBLY__/,this.browser.assembly).replace(/__CHR__/,e).replace(/__START__/,t).replace(/__END__/,i)},setLabelBuffer:function(e){this.dataBuffer.start=Math.max(this.dataBufferStart,e)},getData:function(t,i,n,r){i=Math.max(1,i),n=Math.min(this.browser.getChromosomeSize(t),n);var s=e.Deferred();if(void 0!==this.data)return this.receiveData("function"==typeof this.data.sort?this.data.sort(function(e,t){return e.start-t.start}):this.data,t,i,n),s.resolveWith(this);var o=this,a=[],l=n-i+1;if(!this.url)return s.resolveWith(this);if(this.dataRequestLimit&&l>this.dataRequestLimit)for(var h=Math.ceil(l/this.dataRequestLimit);h--;)a.push([i,h?i+=this.dataRequestLimit-1:n]),i++;else a.push([i,n]);return e.when.apply(e,e.map(a,function(i){var n=e.ajax({url:o.parseURL(t,i[0],i[1]),data:o.urlParams,dataType:o.dataType,context:o,xhrFields:o.xhrFields,success:function(e){this.receiveData(e,t,i[0],i[1])},error:function(e,t){this.track.controller.showError(t+" while getting the data, see console for more details",arguments)},complete:function(t){this.dataLoading=e.grep(this.dataLoading,function(e){return t!==e})}});return n.coords=[t,i[0],i[1]],"function"==typeof r&&n.done(r),o.dataLoading.push(n),n})).done(function(){s.resolveWith(o)}),s},receiveData:function(e,t,i,n){i=Math.max(i,1),n=Math.min(n,this.browser.getChromosomeSize(t)),this.setDataRange(t,i,n),this.parseData(e,t,i,n),this.allData&&(this.url=!1)},parseData:function(e,t,i,n){for(var r,s=0;s<e.length;s++)r=e[s],r.chr=r.chr||t,r.sort=i+s,this.insertFeature(r)},updateData:function(e){this.data=e,this.track.reset()},setDataRange:function(e,t,i){this.allData&&(t=1,i=this.browser.getChromosomeSize(e)),this.dataRanges(e).insert({x:t,w:i-t+1,y:0,h:1},[t,i])},checkDataRange:function(e,t,i){t=Math.max(1,t),i=Math.min(this.browser.getChromosomeSize(e),i);var n=this.dataRanges(e).search({x:t,w:i-t+1,y:0,h:1}).sort(function(e,t){return e[0]-t[0]});if(!n.length)return!1;for(var r=1===n.length?n[0][0]:9e99,s=1===n.length?n[0][1]:-9e99,o=0;o<n.length-1;o++){if(!(n[o][0]<=n[o+1][0]&&(n[o][1]>=n[o+1][1]||n[o][1]+1>=n[o+1][0])))return!1;r=Math.min(r,n[o][0]),s=Math.max(s,n[o][1],n[o+1][1])}return t>=r&&i<=s},insertFeature:function(t){if(!t.chr){if(!t.seq_region_name)return;t.chr=t.seq_region_name}t.id||(t.id=t.ID||this.hashCode(JSON.stringify(e.extend({},t,{sort:""}))));var i=this.features(t.chr);if(i&&!this.featuresById[t.id]){if(t.subFeatures){t.subFeatures.sort(function(e,t){return e.start-t.start});for(var n=0;n<t.subFeatures.length;n++)t.subFeatures[n].start=Math.min(Math.max(t.subFeatures[n].start,t.start),t.end),t.subFeatures[n].end=Math.max(Math.min(t.subFeatures[n].end,t.end),t.start);t.subFeatures.unshift({start:t.start,end:t.start,fake:!0}),t.subFeatures.push({start:t.end,end:t.end,fake:!0})}i.insert({x:t.start,y:0,w:t.end-t.start+1,h:1},t),this.featuresById[t.id]=t}},findFeatures:function(t,i,n){for(var r=this.features(t).search({x:i-this.dataBuffer.start,y:0,w:n-i+this.dataBuffer.start+this.dataBuffer.end+1,h:1}),s=this.prop("featureFilters")||[],o=0;o<s.length;o++)r=e.grep(r,e.proxy(s[o],this));return this.sortFeatures(r)},sortFeatures:function(e){return e.sort(function(e,t){return e.sort-t.sort})},abort:function(){for(var e=0;e<this.dataLoading.length;e++)this.dataLoading[e].abort();this.dataLoading=[]},hashCode:function(e){var t,i=0;if(!e.length)return i;for(var n=0;n<e.length;n++)t=e.charCodeAt(n),i=(i<<5)-i+t,i&=i;return""+i}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.View=Base.extend({fontHeight:10,fontFamily:"sans-serif",fontWeight:"normal",fontColor:void 0,color:"#000000",minScaledWidth:.5,widthCorrection:1,labels:!0,repeatLabels:!1,bump:!1,alwaysReposition:!1,depth:void 0,featureHeight:void 0,featureMargin:void 0,subFeatureJoinStyle:!1,subFeatureJoinLineWidth:.5,constructor:function(t){e.extend(this,t),Genoverse.wrapFunctions(this),this.init()},init:function(){this.setDefaults(),this.scaleSettings={}},setDefaults:function(){this.featureMargin=this.featureMargin||{top:3,right:1,bottom:1,left:0};for(var t=["top","right","bottom","left"],i=0;i<t.length;i++)"number"!=typeof this.featureMargin[t[i]]&&(this.featureMargin[t[i]]=0);this.context=e("<canvas>")[0].getContext("2d"),this.featureHeight=void 0!==this.featureHeight?this.featureHeight:this.prop("defaultHeight"),this.font=this.fontWeight+" "+this.fontHeight+"px "+this.fontFamily,this.labelUnits=["bp","kb","Mb","Gb","Tb"],this.context.font=this.font,this.labels&&"overlay"!==this.labels&&(this.depth||"labels"===this.bump)&&(this.labels="separate")},setScaleSettings:function(t){var i=this.browser.chr;if(this.scaleSettings[i]||(this.scaleSettings[i]={}),!this.scaleSettings[i][t]){var n=new RTree;this.scaleSettings[i][t]={imgContainers:e(),featurePositions:n,labelPositions:"separate"===this.labels?new RTree:n}}return this.scaleSettings[i][t]},scaleFeatures:function(e,t){for(var i,n,r=Math.max(t,this.widthCorrection),s=0;s<e.length;s++)if(i=e[s],i.position||(i.position={}),i.position[t]||(i.position[t]={start:i.start*t,width:Math.max((i.end-i.start)*t+r,this.minScaledWidth),height:i.height||this.featureHeight}),i.subFeatures){for(n=0;n<i.subFeatures.length;n++)void 0===i.subFeatures[n].height&&(i.subFeatures[n].height=i.position[t].height);this.scaleFeatures(i.subFeatures,t)}return e},positionFeatures:function(e,t){t.margin=this.prop("margin");for(var i=0;i<e.length;i++)this.positionFeature(e[i],t);return t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t.featureHeight=Math.max(Math.ceil(t.featureHeight),this.prop("resizable")?Math.max(this.prop("height"),this.prop("minLabelHeight")):0),t.labelHeight=Math.ceil(t.labelHeight),e},positionFeature:function(t,i){var n=i.scale,r=this.scaleSettings[t.chr][n];if(r){var s,o=t.subFeatures||[];for(t.position[n].X=t.position[n].start-i.scaledStart,s=0;s<o.length;s++)o[s].position[n].x=o[s].position[n].start-i.scaledStart,this.subFeatureJoinStyle&&(o[s].position[n].join=o[s].position[n].join||{},o[s].position[n].join.x=o[s].position[n].start+o[s].position[n].width-i.scaledStart);if(this.alwaysReposition||!t.position[n].positioned){if(t.position[n].H=t.position[n].height+this.featureMargin.bottom,t.position[n].W=t.position[n].width+(t.marginRight||this.featureMargin.right),t.position[n].Y=("number"==typeof t.position[n].y?t.position[n].y:"number"==typeof t.y?t.y*t.position[n].H:0)+(t.marginTop||this.featureMargin.top),t.label){"string"==typeof t.label&&(t.label=t.label.split("\n"));var a=this.context;t.labelHeight=t.labelHeight||(this.fontHeight+2)*t.label.length,t.labelWidth=t.labelWidth||Math.max.apply(Math,e.map(t.label,function(e){return Math.ceil(a.measureText(e).width)}))+1,!0===this.labels?(t.position[n].H+=t.labelHeight,t.position[n].W=Math.max(t.labelWidth,t.position[n].W)):"separate"!==this.labels||t.position[n].label||(t.position[n].label={x:t.position[n].start,y:t.position[n].Y,w:t.labelWidth,h:t.labelHeight})}var l={x:t.position[n].start,y:t.position[n].Y,w:t.position[n].W,h:t.position[n].H+(t.marginTop||this.featureMargin.top)};t.position[n].bounds=l,!0===this.bump&&this.bumpFeature(l,t,n,r.featurePositions),r.featurePositions.insert(l,t),t.position[n].bottom=t.position[n].Y+l.h+i.margin,t.position[n].positioned=!0}var h=!(!this.subFeatureJoinStyle||!o.length)&&{height:Math.max.apply(Math,o.map(function(e){return e.fake?0:e.position[n].height}))/2*(t.strand>0?-1:1),y:t.position[n].Y+t.position[n].height/2};for(s=0;s<o.length;s++)o[s].position[n].y=t.position[n].Y+(t.position[n].height-o[s].position[n].height)/2,h&&o[s+1]&&e.extend(o[s].position[n].join,{width:o[s+1].position[n].x-o[s].position[n].join.x},h);"separate"===this.labels&&t.position[n].label&&(!this.alwaysReposition&&t.position[n].label.positioned||(this.bumpFeature(t.position[n].label,t,n,r.labelPositions),t.position[n].label.bottom=t.position[n].label.y+t.position[n].label.h+i.margin,t.position[n].label.positioned=!0,r.labelPositions.insert(t.position[n].label,t)),i.labelHeight=Math.max(i.labelHeight,t.position[n].label.bottom)),i.featureHeight=Math.max(i.featureHeight,t.position[n].bottom),i.height=Math.max(i.height,i.featureHeight+i.labelHeight)}},bumpFeature:function(t,i,n,r){var s,o,a=0,l=this.scaleSettings[i.chr][n],h=r===l.labelPositions&&r!==l.featurePositions;do{if(this.depth&&++a>=this.depth){!h&&e.grep(l.featurePositions.search(t),function(e){return!1!==e.position[n].visible}).length&&(i.position[n].visible=!1);break}s=!1,o=r.search(t)[0],o&&o.id!==i.id&&(t.y=o.position[n][h?"label":"bounds"].y+o.position[n][h?"label":"bounds"].h,s=!0)}while(s);h||(i.position[n].Y=t.y)},draw:function(t,i,n,r){for(var s,o,a=0;a<t.length;a++)s=t[a],!1!==s.position[r].visible&&(o=e.extend({},s,{x:s.position[r].X,y:s.position[r].Y,width:s.position[r].width,height:s.position[r].height,labelPosition:s.position[r].label}),this.drawFeature(o,i,n,r),o.legend!==s.legend&&(s.legend=o.legend,s.legendColor=o.color))},drawFeature:function(e,t,i,n){!1===e.color||e.color||this.setFeatureColor(e),e.subFeatures?this.drawSubFeatures(e,t,i,n):((e.x<0||e.x+e.width>this.width)&&this.truncateForDrawing(e),!1!==e.color&&(t.fillStyle=e.color,t.fillRect(e.x,e.y,e.width,e.height)),!0===e.clear&&t.clearRect(e.x,e.y,e.width,e.height),e.borderColor&&(t.strokeStyle=e.borderColor,t.strokeRect(e.x,Math.floor(e.y)+.5,e.width,e.height))),this.labels&&e.label&&this.drawLabel(e,i,n),e.decorations&&this.decorateFeature(e,t,n)},drawSubFeatures:function(t,i,n,r){for(var s=e.extend(!0,[],t.subFeatures),o=t.joinColor||t.color,a=0;a<s.length;a++)s[a].fake||this.drawFeature(e.extend(!0,{},t,{subFeatures:!1,label:!1},s[a].position[r],s[a]),i,n,r),s[a].position[r].join&&s[a].position[r].join.width>0&&this.drawSubFeatureJoin(e.extend({color:o},s[a].position[r].join),i)},drawLabel:function(e,t,i){var n=e.untruncated,r=(n||e).width;if(!("overlay"===this.labels&&e.labelWidth>=Math.floor(r))){e.labelPosition&&(t.labelPositions=t.labelPositions||new RTree),"string"==typeof e.label&&(e.label=[e.label]);var s,o,a,l,h,c,u=(n||e).x,f=this.repeatLabels?Math.ceil((r-Math.max(i,1)-("overlay"===this.labels?e.labelWidth:0))/this.width)||1:1,d=r/f;this.repeatLabels&&(i>1||"overlay"!==this.labels)&&(d=this.browser.length*i,f=Math.ceil(r/d)),e.labelColor||this.setLabelColor(e),t.fillStyle=e.labelColor,"overlay"===this.labels?(s=[e.label.join(" ")],l=e.y+(e.height+1)/2,c=0):(s=e.label,l=e.labelPosition?e.labelPosition.y:e.y+e.height+this.featureMargin.bottom,c=this.fontHeight+2);var p="center"===t.textAlign?.5:0,g=e.labelWidth*p;for(f>1&&(p+=Math.max(Math.floor(-(e.labelWidth+u)/d),0));p<f;p++)if((o=u+p*d)+e.labelWidth>=0){if(o-g>this.width||p>=1&&o+e.labelWidth>e.position[i].X+e.position[i].width)break;for(a=0;a<s.length;a++)h=l+a*c,t.labelPositions&&t.labelPositions.search({x:o,y:h,w:e.labelWidth,h:c}).length?e.position[i].label.visible=!1:(t.fillText(s[a],o,h),t.labelPositions&&t.labelPositions.insert({x:o,y:h,w:e.labelWidth,h:c},s[a]))}}},setFeatureColor:function(e){e.color=this.color},setLabelColor:function(e){e.labelColor=this.fontColor||e.color||this.color},shadeColor:function(e,t){var i=parseInt(e.slice(1),16),n=i>>16,r=i>>8&255,s=255&i;return"#"+(16777216+65536*(Math.round((255-n)*t)+n)+256*(Math.round((255-r)*t)+r)+(Math.round((255-s)*t)+s)).toString(16).slice(1)},truncateForDrawing:function(e){var t=Math.min(Math.max(e.x,-1),this.width+1),i=e.x-t+e.width;i+t>this.width&&(i=this.width-t+1),e.untruncated={x:e.x,width:e.width},e.x=t,e.width=Math.max(i,0)},drawSubFeatureJoin:function(e,t){var i=this.truncateSubFeatureJoinForDrawing(e);if(i){var n=t.lineWidth;switch(t.strokeStyle=e.color,t.lineWidth=this.subFeatureJoinLineWidth,t.beginPath(),t.moveTo(i.x1,i.y1),this.subFeatureJoinStyle){case"line":t.lineTo(i.x3,i.y1);break;case"peak":t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3);break;case"curve":t.quadraticCurveTo(i.x2,i.y2,i.x3,i.y3)}t.stroke(),t.lineWidth=n}},truncateSubFeatureJoinForDrawing:function(e){var t=e.y,i=t;"line"===this.subFeatureJoinStyle&&(this.truncateForDrawing(e),t+=.5);var n=e.x,r=e.x+e.width;if(r<0||n>this.width)return!1;var s,o,a,l;return"peak"===this.subFeatureJoinStyle?(a=(n+r)/2,s=a,o=e.y+e.height,l=(o-t)/(a-n),a<0?(o=e.y+l*r,s=0):a>this.width&&(o=e.y+l*(this.width-e.x),s=this.width),n<0&&(t=a<0?o:e.y-l*e.x,n=0),r>this.width&&(i=a>this.width?o:o-l*(this.width-s),r=this.width)):"curve"===this.subFeatureJoinStyle&&(s=e.x+e.width/2,o=e.y+e.height),{x1:n,y1:t,x2:s,y2:o,x3:r,y3:i}},formatLabel:function(e){var t=Math.floor((e.toString().length-1)/3),i=this.labelUnits[t];return e/=Math.pow(10,3*t),Math.floor(e)+("bp"===i?"":"."+(e.toString().split(".")[1]||"").concat("00").substring(0,2))+" "+i},drawBackground:e.noop,decorateFeature:e.noop})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Controller.Static=Genoverse.Track.Controller.extend({addDomElements:function(){this.base(),this.image=e("<img>").appendTo(this.imgContainer),this.container.toggleClass("gv-track-container gv-track-container-static").prepend(this.imgContainer),this.scrollContainer.add(this.messageContainer).remove()},reset:function(){delete this.stringified,this.base.apply(this,arguments)},setWidth:function(e){this.base(e),this.image.width=this.width},makeFirstImage:function(){this.base.apply(this,arguments),this.container.css("left",0),this.imgContainer.show()},makeImage:function(t){if(this.prop("disabled"))return e.Deferred().resolve();var i=this.view.positionFeatures(this.model.findFeatures(t.chr,t.start,t.end),t);if(i){var n=JSON.stringify(i);if(this.stringified!==n){var r=this.prop("height");t.width=this.width,t.featureHeight=r,this.render(i,this.image.data(t)),this.imgContainer.children(":last").show(),this.resize(r,void 0,!1),this.stringified=n}}return e.Deferred().resolve()}}),Genoverse.Track.Model.Static=Genoverse.Track.Model.extend({url:!1,checkDataRange:function(){return!0}}),Genoverse.Track.View.Static=Genoverse.Track.View.extend({featureMargin:{top:0,right:1,bottom:0,left:1},positionFeature:e.noop,scaleFeatures:function(e){return e},draw:function(e,t,i,n){for(var r=0;r<e.length;r++)this.drawFeature(e[r],t,i,n)}}),Genoverse.Track.Static=Genoverse.Track.extend({controls:"off",resizable:!1,controller:Genoverse.Track.Controller.Static,model:Genoverse.Track.Model.Static,view:Genoverse.Track.View.Static})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Controller.Stranded=Genoverse.Track.Controller.extend({constructor:function(t){if(this.base(t),"function"!=typeof this._makeImage){var i=this.prop("strand"),n=this.prop("featureStrand");if(-1===i)this._makeImage=this.track.makeReverseImage?e.proxy(this.track.makeReverseImage,this):this.makeImage,this.makeImage=e.noop;else{i=this.prop("strand",1),this._makeImage=this.makeImage,this.makeImage=this.makeForwardImage;var r=this.track;setTimeout(function(){r.reverseTrack=r.browser.addTrack(r.constructor.extend({id:r.id?r.id+"Reverse":void 0,strand:-1,url:!1,order:"number"==typeof r.orderReverse?r.orderReverse:r.order,forwardTrack:r})),e.each(r.controller._deferredReverseTrackImages,function(e,t){r.controller._makeReverseTrackImage.apply(r.controller,t)}),delete r.controller._deferredReverseTrackImages},1)}n||this.prop("featureStrand",i)}},makeForwardImage:function(e){this._makeReverseTrackImage(e,this._makeImage(e))},_makeReverseTrackImage:function(e,t){var i=this.prop("reverseTrack");if(!i)return void(this._deferredReverseTrackImages=(this._deferredReverseTrackImages||[]).concat([[e,t]]));t&&"function"==typeof t.done?t.done(function(){i.controller._makeImage(e,t)}):i.controller._makeImage(e,t)},destroy:function(){this.removing||(this.removing=!0,this.browser.removeTrack(this.prop("forwardTrack")||this.prop("reverseTrack")),this.base())}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Model.Stranded=Genoverse.Track.Model.extend({init:function(e){if(this.base(e),!e){var t=this.prop("forwardTrack");t&&(this.featuresByChr=t.prop("featuresByChr"),this.features=t.prop("features"),this.featuresById=t.prop("featuresById"))}},parseURL:function(){return this.urlParams.strand||(this.urlParams.strand=this.prop("featureStrand")),this.base.apply(this,arguments)},findFeatures:function(){var t=this.track.featureStrand;return e.grep(this.base.apply(this,arguments),function(e){return e.strand===t})}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Controller.Graph=Genoverse.Track.Controller.extend({setYRange:function(e,t){this.browser.dragging||(this.prop("showZeroY")?this.prop("range",[Math.min(e,0),Math.max(t,0)]):this.prop("range",[e,t]),this.track.reset())},yMinMaxFromFeatures:function(e){var t,i,n=1/0,r=-1/0;if("Line"===this.prop("type"))for(t=0;t<e.length;t++)for(i=0;i<e[t].coords.length;i++)isNaN(e[t].coords[i][1])||(n=Math.min(n,e[t].coords[i][1]),r=Math.max(r,e[t].coords[i][1]));else for(t=0;t<e.length;t++)isNaN(e[t].height)||(n=Math.min(n,e[t].height),r=Math.max(r,e[t].height));return n=n===1/0?0:n,r=r===-1/0?0:r,{min:n,max:r}},afterSetName:function(){this.minLabelHeight=Math.max(this.minLabelHeight,2*this.prop("fontHeight")+this.prop("margin")+this.prop("marginTop"))},visibleFeatureHeight:function(){if("auto"===this.prop("rescaleable")){var e=this.track.getYScale(),t=this.yMinMaxFromFeatures(this.model.findFeatures(this.browser.chr,this.browser.start,this.browser.end));return Math.ceil(Math.max(e*(t.max-t.min),this.prop("hideEmpty")?0:this.minLabelHeight))}return this.prop("height")},resize:function(){var t=this.prop("height"),i=this.base.apply(this,arguments),n=this.prop("height");if(t!==n)if(!0===this.prop("rescaleable")){var r=this.prop("range"),s=Math.max.apply(null,r.map(function(e){return(e.toString().split(".")[1]||"").length})),o=r[1]-r[0],a=Math.ceil((o*(n/t)-o)/2);this.setYRange(parseFloat((r[0]-a).toFixed(s),10),parseFloat((r[1]+a).toFixed(s),10))}else this.track.reset();return(this.prop("expander")||e()).hide(),(this.prop("resizer")||e()).removeClass("gv-resizer-expander"),i},autoResize:function(){if("auto"!==this.prop("rescaleable"))return this.base.apply(this,arguments);var e=this.model.findFeatures(this.browser.chr,this.browser.start,this.browser.end);if(e.length){var t=this.prop("range"),i=this.yMinMaxFromFeatures(e);if(i.min||i.max){var n=Math.max.apply(null,t.map(function(e){return(e.toString().split(".")[1]||"").length})),r=Math.pow(10,n),s=parseFloat((Math.floor(i.min*r)/r).toFixed(n),10),o=parseFloat((Math.ceil(i.max*r)/r).toFixed(n),10);if(this.prop("showZeroY")&&(s=Math.min(s,0),o=Math.max(o,0)),s===o&&o++,s!==t[0]||o!==t[1])return this.setYRange(s,o)}}},makeFirstImage:function(){var e=this;return this.base.apply(this,arguments).done(function(){e.prop("yAxisPlaceholder").hide(),e.prop("offsetContainer").prepend(e.prop("guidelinesCanvas")).before(e.prop("yAxisCanvas").removeClass("gv-loading"))})},typeWrapper:function(e,t){return(Genoverse.Track.Controller.Graph[this.prop("type")][e]||Genoverse.Track.Controller.prototype[e]).apply(this,t)},click:function(){return this.typeWrapper("click",arguments)},getClickedFeatures:function(){return this.typeWrapper("getClickedFeatures",arguments)},populateMenu:function(){return this.typeWrapper("populateMenu",arguments)}}),Genoverse.Track.Model.Graph=Genoverse.Track.Model.extend({dataBuffer:{start:1,end:1},setLabelBuffer:e.noop,sortFeatures:function(e){return e.sort(function(e,t){return e.start-t.start})}}),Genoverse.Track.View.Graph=Genoverse.Track.View.extend({featureMargin:{},featureDataSets:function(e){for(var t=this.prop("datasets").concat({name:"_default"}),i={},n={},r=0;r<t.length;r++)i[t[r].name]=!0;for(r=0;r<e.length;r++)set=i[e[r].dataset]?e[r].dataset:"_default",n[set]=n[set]||[],n[set].push(e[r]);return{list:t,features:n}}}),Genoverse.Track.Graph=Genoverse.Track.extend({controller:Genoverse.Track.Controller.Graph,margin:10,invert:!0,yAxisLabels:void 0,yRange:void 0,showZeroY:!0,globalAlpha:1,axesSettings:{axisColor:"black",axisLabelColor:"black",scaleLineColor:"#E5E5E5"},datasets:[],legend:!0,labels:!1,resizable:!0,rescaleableY:"auto",setDefaults:function(){this.range=this.yRange||[0,this.height],this.rescaleable=this.rescaleableY,e.isPlainObject(this.margin)&&(this.invert?(this.marginTop=this.margin.bottom,this.margin=this.margin.top):(this.marginTop=this.margin.top,this.margin=this.margin.bottom)),this.marginTop="number"==typeof this.marginTop?this.marginTop:this.margin,!1===this.resizable?this.resizable=this.rescaleable:"auto"===this.resizable&&(this.rescaleable="auto"),this.base.apply(this,arguments),this.legend&&!this.datasets.length&&(this.legend=!1),this.height+=this.marginTop,this.initialHeight+=this.marginTop},setHeight:function(e){return this.base(e,!0)},setMVC:function(){var t=this.controller instanceof Genoverse.Track.Controller,i=this.base.apply(this,arguments);if(!t){var n=this.prop("scrollContainer");this.yAxisPlaceholder=e('<div class="gv-image-container gv-loading">'),this.yAxisCanvas=e('<canvas class="gv-image-container gv-barchart-axis">').attr("width",this.width),this.guidelinesCanvas=e('<canvas class="gv-image-container gv-barchart-guide">').attr("width",this.width),this.disabled&&this.yAxisCanvas.add(this.guidelinesCanvas).attr("height",0),this.offsetContainer=e('<div class="gv-scroll-container-offset">').width(this.width).insertAfter(n).append(n).before(this.yAxisPlaceholder),this.drawAxes()}return i},afterSetMVC:function(){(this.prop("heightToggler")||e()).addClass("gv-hidden"),(this.prop("resizer")||e()).off("click")},reset:function(){return this.drawAxes(),this.base.apply(this,arguments)},enable:function(){var e=this.disabled,t=this.base.apply(this,arguments);return e&&this.drawAxes(),t},getYScale:function(){var e=this.prop("range");return(this.prop("height")-this.prop("margin")-this.prop("marginTop"))/(e[1]-e[0])},drawAxes:function(){if(!this.prop("disabled")){var e,t,i,n,r,s=this.width,o=this.prop("height"),a=this.prop("invert"),l=this.prop("margin"),h=this.prop("marginTop"),c=this.prop("fontHeight"),u=this.prop("range"),f=this.prop("axesSettings"),d=this.prop("yAxisLabels"),p=this.getYScale(),g=this.prop("yAxisCanvas").attr("height",o)[0].getContext("2d"),v=this.prop("guidelinesCanvas").attr("height",o)[0].getContext("2d");if(!d)for(t=Math.floor((o-l-h)/(2*c)),n=(u[1]-u[0])/t,d=[],n!==Math.round(n)&&(r=Math.max.apply(null,u.map(function(e){return(e.toString().split(".")[1]||"").length}))+1),i=0;i<=t;i++)d.push((u[0]+n*i)[r?"toFixed":"toString"](r));var m=Math.max.apply(null,d.map(function(e){return g.measureText(e).width}))+10;for(this.prop("offsetContainer").css("marginLeft",m).width(s-m),this.prop("scrollContainer").css("marginLeft",-m),this.prop("yAxisPlaceholder").width(m).show(),g.fillStyle=f.axisColor,g.fillRect(m-1,a?l:h,1,o-l-h),v.fillStyle=f.scaleLineColor,g.fillStyle=f.axisLabelColor,g.textBaseline="middle",g.textAlign="right",i=0;i<d.length;i++)e=h+(parseFloat(d[i],10)-u[0])*p,e=a?o-e:e,v.fillRect(0,e,s,1),g.fillRect(m-4,e,4,1),g.fillText(d[i],m-6,e);e=-u[0]*p+h,v.fillStyle=f.axisColor,v.fillRect(0,a?o-e:e,s,1)}}})}).call(t,i(0))},function(e,t,n){(function(e){Genoverse.Track.Controller.Graph.Line={click:function(){if(this.prop("showPopups"))return this.prop("menus").hide(),this.browser.closeMenus(this),Genoverse.Track.Controller.prototype.click.apply(this,arguments)},getClickedFeatures:function(t){var i={x:t,y:0,w:1,h:9e99},n=this.scale>1?0:1/this.scale,r=i.x/this.scale,s=n?[Math.floor(r-n),Math.ceil(r+n)]:[Math.floor(r),Math.floor(r)],o={};return this.featurePositions.search(i).forEach(function(e){o[e.dataset]||(o[e.dataset]=e)}),[this.model.sortFeatures(Object.keys(o).map(function(t){return e.extend(!0,{},o[t],{clickedCoords:o[t].coords.filter(function(e){return e[0]>=s[0]&&e[0]<=s[1]})})}))]},populateMenu:function(e){function t(e){var t=e.map(function(e){return e[1]}).sort(function(e,t){return e-t});return{avg:t.reduce(function(e,t){return e+t},0)/t.length,min:t[0],max:t[t.length-1]}}if(!e.length||!e[0].clickedCoords.length)return[];var i,n,r,s=e[0].clickedCoords[0][0],o=e[0].clickedCoords[e[0].clickedCoords.length-1][0],a=s!==o,l={title:e[0].chr+":"+(s===o?s:s+"-"+o)};if(a)if(1===e.length)n=t(e[0].clickedCoords),l["Average value"]=n.avg,l["Min value"]=n.min,l["Max value"]=n.max;else for(l=[l],r=0;r<e.length;r++)n=t(e[r].clickedCoords),i={title:e[r].dataset},i.Average=n.avg,i.Min=n.min,i.Max=n.max,l.push(i);else if(1===e.length)l.Value=e[0].clickedCoords[0][1];else for(r=0;r<e.length;r++)l[e[r].dataset]=e[r].clickedCoords[0][1];return l}},Genoverse.Track.Model.Graph.Line=Genoverse.Track.Model.Graph.extend({parseData:function(t,n,r,s){var o,a,l=[];for(t.sort(function(e,t){return e.start-t.start||e.x-t.x}),i=0;i<t.length;i++)void 0===t[i].y||t[i].coords?(o&&(l.push(o),o=void 0),l.push(t[i])):(a=function(e){return void 0!==e.x?e.x:e.start+(e.start===e.end?0:(e.end-e.start+1)/2)}(t[i]),o&&o.coords[o.coords.length-1][0]===a-1?(o.coords.push([a,t[i].y]),o.end=a):(o&&l.push(o),o=e.extend({coords:[[a,t[i].y]],start:a,end:a},t[i])));return o&&l.push(o),this.base(l,n,r,s)},insertFeature:function(e){var t=this.prop("datasets");return e.coords?e.coords=e.coords.map(function(t,i){return t.length>1?t:[e.start+i,t]}).filter(function(t){return t[0]>=e.start&&t[0]<=e.end}):e.y?e.coords=[[e.start+(e.start===e.end?0:(e.end-e.start+1)/2),e.y]]:e.coords=[],t.length&&(e.legend=e.dataset,e.color=(t.filter(function(t){return t.name===e.dataset})[0]||{color:this.color}).color),e.id=e.id||[e.chr,e.start,e.end,e.dataset||""].join(":"),this.base.apply(this,arguments)}}),Genoverse.Track.View.Graph.Line=Genoverse.Track.View.Graph.extend({featureHeight:1,positionFeatures:function(e,t){function i(e){return[e[0]*n+a,e[1]*r+o]}for(var n=t.scale,r=this.track.getYScale(),s=this.prop("marginTop"),o=s-this.prop("range")[0]*r,a=(n>1?n/2:0)-t.scaledStart,l=0;l<e.length;l++)e[l].coordPositions=e[l].coords.map(i);return t.featureHeight=this.prop("height"),this.base(e,t)},draw:function(t,i,n,r){if(t.length){for(var s,o,a,l,h,c,u,f,d,p,g,v=this.featureDataSets(t),m=this.prop("height"),b=this.prop("marginTop"),y=this.prop("margin"),w=Math.min(Math.max(b,b-this.prop("range")[0]*this.track.getYScale()),m-b),x=r<1?Math.floor(1/r):0,k={color:this.color,fill:this.prop("fill"),lineWidth:this.prop("lineWidth"),globalAlpha:this.prop("globalAlpha")},_=0;_<v.list.length;_++)for(s=v.list[_].name,o=e.extend({},k,v.list[_]),u=0;u<(v.features[s]||[]).length;u++)if(a=v.features[s][u],l=a.coordPositions,l.length){if(x){for(h=[],f=0;f<l.length;){for(d=a.coords[f][0],p=[];l[f]&&a.coords[f][0]-d<x;)p.push(l[f++]);g=p.length,p=p.reduce(function(e,t){return e[0]+=t[0],e[1]+=t[1],e},[0,0]),p[0]=Math.round(p[0]/g),h.length&&p[0]===h[h.length-1][0]?h[h.length-1][1]=(h[h.length-1][1]*c+p[1])/(c+g):h.push([p[0],p[1]/g]),c=g}l=h}for(i.fillStyle=i.strokeStyle=o.color,i.lineWidth=o.lineWidth,o.fill&&(i.globalAlpha=o.globalAlpha),i.beginPath(),o.fill?(i.moveTo(l[0][0],w),i.lineTo.apply(i,l[0])):i.moveTo.apply(i,l[0]),f=1;f<l.length;f++)i.lineTo.apply(i,l[f]);i.stroke(),o.fill&&(i.lineTo(l[l.length-1][0],w),i.closePath(),i.fill(),i.globalAlpha=1)}i.clearRect(0,0,this.width,b-1),i.clearRect(0,m-y,this.width,y)}}}),Genoverse.Track.Graph.Line=Genoverse.Track.Graph.extend({type:"Line",showPopups:!0,fill:!1,lineWidth:1,model:Genoverse.Track.Model.Graph.Line,view:Genoverse.Track.View.Graph.Line})}).call(t,n(0))},function(e,t,i){(function(e){Genoverse.Track.Controller.Graph.Bar={getClickedFeatures:function(e,t){var i=this.prop("marginTop")-this.prop("range")[0]*this.track.getYScale(),n=this.scale,r=n>1?0:1,s=this.prop("featuresByChr")[this.browser.chr].search({x:(e-r/2)/n,y:0,w:(1+r)/n,h:1});return s.length&&(t<i&&0===s.filter(function(e){return e.position[n].bounds.y+e.position[n].bounds.h<=t&&e.position[n].bounds.y>=t}).length||t>=i&&0===this.featurePositions.search({x:e,y:t,w:1,h:1}).length)&&(s=[]),s.length?[this.model.sortFeatures(s)]:[]},populateMenu:function(t){function i(e){var t=e.map(function(e){return e.height}).sort(function(e,t){return e-t});return{avg:t.reduce(function(e,t){return e+t},0)/t.length,min:t[0],max:t[t.length-1]}}if(!t.length)return[];var n,r,s=t[0].start,o=t[t.length-1].end,a=t[0].start!==t[t.length-1].start,l={title:t[0].chr+":"+(s===o?s:s+"-"+o)};if(a)if(1===t.length)n=i(t),l["Average value"]=n.avg,l["Min value"]=n.min,l["Max value"]=n.max;else{l=[l];var h,c=this.prop("datasets");if(c.length)for(h=c.reduce(function(e,t){return e[t.name]=[],e},{}),r=0;r<t.length;r++)h[t[r].dataset].push(t[r]);else c=[{name:""}],h={"":t};for(r=0;r<c.length;r++)n=i(h[c[r].name]),l.push(e.extend({Average:n.avg,Min:n.min,Max:n.max},c[r].name?{title:c[r].name}:{}))}else if(1===t.length)l.Value=t[0].height;else for(r=0;r<t.length;r++)l[t[r].dataset]=t[r].height;return l}},Genoverse.Track.Model.Graph.Bar=Genoverse.Track.Model.Graph.extend({insertFeature:function(e){var t=this.prop("datasets");return t.length&&(e.legend=e.dataset,e.color=(t.filter(function(t){return t.name===e.dataset})[0]||{color:this.color}).color),e.id=e.id||[e.chr,e.start,e.end,e.dataset||""].join(":"),this.base.apply(this,arguments)}}),Genoverse.Track.View.Graph.Bar=Genoverse.Track.View.Graph.extend({scaleFeatures:function(e,t){var i=this.track.getYScale(),n=this.prop("marginTop")-this.prop("range")[0]*i;e=this.base(e,t);for(var r=0;r<e.length;r++)e[r].position[t].height=e[r].height*i,e[r].position[t].y=n;return e},draw:function(t,i,n,r){for(var s,o,a,l,h,c,u,f,d=this.featureDataSets(t),p=this.prop("margin"),g=r<1?Math.ceil(1/r):0,v={color:this.color,globalAlpha:this.prop("globalAlpha")},m=0;m<d.list.length;m++)if(s=e.extend({},v,d.list[m]),o=d.list[m].name,a=e.extend(!0,[],d.features[o]||[]),a.length){if(g){for(h=[],l=0;l<a.length;){for(c=a[l].start,u=[];a[l]&&a[l].start-c<g;)u.push(a[l++]);f=e.extend(!0,{},u[0],{height:u.reduce(function(e,t){return e+t.height},0)/u.length,end:u[u.length-1].end}),["H","W","height","width"].forEach(function(e){f.position[r][e]=u.reduce(function(t,i){return t+i.position[r][e]},0)/u.length}),h.push(f)}a=h}for(l=0;l<a.length;l++)a[l].color=s.color;i.globalAlpha=s.globalAlpha,this.base(a,i,n,r)}i.clearRect(0,0,this.width,this.prop("marginTop")-1),i.clearRect(0,this.prop("height")-p,this.width,p)}}),Genoverse.Track.Graph.Bar=Genoverse.Track.Graph.extend({type:"Bar",model:Genoverse.Track.Model.Graph.Bar,view:Genoverse.Track.View.Graph.Bar,threshold:5e5,1e4:e.extend(Object.keys(Genoverse.Track.Graph.Line.prototype).reduce(function(e,t){return Genoverse.Track.Graph.Line.prototype.hasOwnProperty(t)&&!Base.prototype[t]&&(e[t]=Genoverse.Track.Graph.Line.prototype[t]),e},{}),{fill:!0,model:Genoverse.Track.Model.Graph.Line.extend({parseData:function(e,t,i,n){for(var r,s=[],o=0;o<e.length;o++)for(r=e[o].start;r<e[o].end;r++)s.push([r,e[o].height]);return this.base([{chr:t,start:i,end:n,coords:s}],t,i,n)}})}),5e4:e.extend(Object.keys(Genoverse.Track.Graph.Line.prototype).reduce(function(e,t){return Genoverse.Track.Graph.Line.prototype.hasOwnProperty(t)&&!Base.prototype[t]&&(e[t]=Genoverse.Track.Graph.Line.prototype[t]),e},{}),{fill:!0,model:Genoverse.Track.Model.Graph.Line.extend({parseData:function(e,t,i,n){return this.base([{chr:t,start:i,end:n,coords:e.map(function(e){return[e.start,e.height]})}],t,i,n)}})})})}).call(t,i(0))},function(e,t){Genoverse.Track.Controller.Sequence=Genoverse.Track.Controller.extend({getClickedFeatures:function(e,t){var i=this.base(e,t)[0];return!!i&&this.makeSeqFeatureMenu(i,Math.floor(e/this.scale))},makeSeqFeatureMenu:function(e,t){return e.featureMenus=e.featureMenus||{},e.featureMenus[t]=e.featureMenus[t]||{title:e.sequence.charAt(t-e.start),Location:e.chr+":"+t},e.featureMenus[t].title?e.featureMenus[t]:void 0}})},function(e,t){Genoverse.Track.Model.Sequence=Genoverse.Track.Model.extend({threshold:1e5,chunkSize:1e3,buffer:0,dataType:"text",setChrProps:function(){var e=this.browser.chr;this.base(),this.chunksByChr=this.chunksByChr||{},this.chunksByChr[e]=this.chunksByChr[e]||{}},getData:function(e,t,i){return t=t-t%this.chunkSize+1,i=i+this.chunkSize-i%this.chunkSize,this.base(e,t,i)},parseData:function(e,t,i,n){e=e.replace(/\n/g,""),this.prop("lowerCase")&&(e=e.toLowerCase());for(var r=0;r<e.length;r+=this.chunkSize)if(!this.chunksByChr[t][i+r]){var s={id:t+":"+i+r,chr:t,start:i+r,end:i+r+this.chunkSize,sequence:e.substr(r,this.chunkSize),sort:i+r};this.chunksByChr[t][s.start]=s,this.insertFeature(s)}}})},function(e,t,i){(function(e){Genoverse.Track.Model.Sequence.Fasta=Genoverse.Track.Model.Sequence.extend({url:"http://genoverse.org/data/Homo_sapiens.GRCh37.72.dna.chromosome.1.fa",startByte:void 0,lineLength:void 0,getData:function(t,i,n){var r=e.Deferred();return e.when(this.getStartByte()).done(function(){i=i-i%this.chunkSize+1,n=n+this.chunkSize-n%this.chunkSize;var s=i-1+Math.floor((i-1)/this.lineLength)+this.startByte,o=n-1+Math.floor((n-1)/this.lineLength)+this.startByte;e.ajax({url:this.parseURL(),dataType:this.dataType,context:this,headers:{Range:"bytes="+s+"-"+o},xhrFields:this.xhrFields,success:function(e){this.receiveData(e,t,i,n)},error:this.track.controller.showError}).done(function(){r.resolveWith(this)}).fail(function(){r.rejectWith(this)})}).fail(function(){r.rejectWith(this)}),r},getStartByte:function(){return this.startByteRequest?this.startByteRequest:void 0===this.startByte||void 0===this.lineLength?(this.startByteRequest=e.ajax({url:this.parseURL(),dataType:"text",context:this,headers:{Range:"bytes=0-300"},xhrFields:this.xhrFields,success:function(e){0===e.indexOf(">")?this.startByte=e.indexOf("\n")+1:this.startByte=0,this.lineLength=e.indexOf("\n",this.startByte)-this.startByte}}),this.startByteRequest):void 0}})}).call(t,i(0))},function(e,t){Genoverse.Track.Model.Sequence.Ensembl=Genoverse.Track.Model.Sequence.extend({url:"//rest.ensembl.org/sequence/region/human/__CHR__:__START__-__END__?content-type=text/plain",dataRequestLimit:1e7})},function(e,t){Genoverse.Track.View.Sequence=Genoverse.Track.View.extend({featureMargin:{top:0,right:0,bottom:0,left:0},colors:{default:"#CCCCCC",A:"#73E973",T:"#DE4C61",G:"#FFFF77",C:"#688EC0"},labelColors:{default:"#000000",T:"#FFFFFF",C:"#FFFFFF"},labels:"overlay",setDefaults:function(){this.base.apply(this,arguments);var e=this.prop("lowerCase");if(this.labelYOffset="number"==typeof this.labelYOffset?this.labelYOffset:(this.featureHeight+1)/2,this.widestLabel="string"==typeof this.widestLabel?this.widestLabel:e?"g":"G",this.labelWidth={},this.labelWidth[this.widestLabel]=Math.ceil(this.context.measureText(this.widestLabel).width)+1,e){for(var t in this.colors)this.colors[t.toLowerCase()]=this.colors[t];for(t in this.labelColors)this.labelColors[t.toLowerCase()]=this.labelColors[t]}},draw:function(e,t,i,n){t.textBaseline="middle",t.textAlign="left";for(var r=Math.max(n,this.minScaledWidth),s=0;s<e.length;s++)this.drawSequence(e[s],t,n,r)},drawSequence:function(e,t,i,n){for(var r,s,o=this.labelWidth[this.widestLabel]<n-1,a=0;a<e.sequence.length;a++)(r=e.position[i].X+a*i)<-i||r>t.canvas.width||(s=e.sequence.charAt(a),t.fillStyle=this.colors[s]||this.colors.default,t.fillRect(r,e.position[i].Y,n,this.featureHeight),this.labelWidth[s]||(this.labelWidth[s]=Math.ceil(t.measureText(s).width)+1),o&&(t.fillStyle=this.labelColors[s]||this.labelColors.default,t.fillText(s,r+(n-this.labelWidth[s])/2,e.position[i].Y+this.labelYOffset)))}})},function(e,t){Genoverse.Track.View.SequenceVariation=Genoverse.Track.View.Sequence.extend({featureHeight:15,featureMargin:{top:0,right:0,bottom:4,left:0},bump:!0,showLegend:!1,positionFeature:function(e,t){var i=e.position[t.scale];e.alt_allele&&(i.positioned||(i.reference={end:i.start+e.ref_allele.length*t.scale}),i.reference.x=i.reference.end-t.scaledStart),this.base(e,t)},bumpFeature:function(e,t){t.alt_allele&&this.base.apply(this,arguments)},draw:function(e,t,i,n){for(var r={seq:[],snv:[]},s=0;s<e.length;s++)r[e[s].alt_allele?"snv":"seq"].push(e[s]);this.base(r.seq,t,i,n),this.highlightSNVs(r.snv,t,n),this.base(r.snv,t,i,n),this.outlineSNVs(r.snv,t,n)},highlightSNVs:function(e,t,i){for(var n,r,s,o=0;o<e.length;o++)n=e[o].position[i],r=[n.X,n.reference.x,n.X+n.width],r[2]<0||r[0]>this.width||((r[0]<0||r[2]>this.width)&&this.truncateForDrawing(r),s=[0,n.Y-this.featureMargin.bottom/2,n.Y,n.Y+this.featureHeight],e[o].highlightColor||this.setHighlightColor(e[o]),t.strokeStyle=t.fillStyle=e[o].highlightColor,t.lineWidth=2,t.beginPath(),t.moveTo(r[0],s[0]),t.lineTo(r[1],s[0]),t.lineTo(r[1],s[1]),t.lineTo(r[2],s[2]),t.lineTo(r[2],s[3]),t.lineTo(r[0],s[3]),t.closePath(),t.stroke(),t.lineWidth=1,t.globalAlpha=.5,t.fill(),t.globalAlpha=1)},outlineSNVs:function(e,t,i){for(var n,r,s,o=0;o<e.length;o++)n=e[o].position[i],r=[n.X,n.X+n.width],s=[n.Y,n.Y+this.featureHeight],t.strokeStyle=e[o].highlightColor,t.lineWidth=2,t.beginPath(),t.moveTo(r[1],s[0]),t.lineTo(r[1],s[1]),t.lineTo(r[0],s[1]),t.lineTo(r[0],s[0]),t.stroke(),t.lineWidth=1},truncateForDrawing:function(e){for(var t in e)e[t]=Math.min(Math.max(e[t],-1),this.width+1)},setHighlightColor:function(e){e.highlightColor="-"===e.alt_allele||e.alt_allele.length<e.ref_allele.length?"#D31D00":"#1DD300"}})},function(e,t,i){(function(e){Genoverse.Track.Model.SequenceVariation=Genoverse.Track.Model.extend({seqModel:Genoverse.Track.Model.Sequence.Ensembl,getSeqModel:function(){var e=this.prop("models");return e.seq=e.seq||this.track.newMVC(this.seqModel)},getData:function(t,i,n){var r=e.Deferred(),s=this.getSeqModel().checkDataRange(t,i,n);return this.base(t,i,n).done(function(){s?r.resolve():this.getSeqModel().getData(t,i,n).done(r.resolve)}),r},insertFeature:function(t){return this.base(e.extend(t,{end:t.start+t.alt_allele.length-1,length:t.alt_allele.length,sequence:t.alt_allele}))},checkDataRange:function(e,t,i){return this.base(e,t,i)&&this.getSeqModel().checkDataRange(e,t,i)},findFeatures:function(e,t,i){return this.getSeqModel().findFeatures(e,t,i).concat(this.base(e,t,i))}})}).call(t,i(0))},function(e,t){Genoverse.Track.Model.Gene=Genoverse.Track.Model.extend({})},function(e,t){Genoverse.Track.Model.Gene.Ensembl=Genoverse.Track.Model.Gene.extend({url:"//rest.ensembl.org/overlap/region/human/__CHR__:__START__-__END__?feature=gene;content-type=application/json",dataRequestLimit:5e6,parseData:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];"gene"!==n.feature_type||this.featuresById[n.id]||(n.chr=n.chr||t,n.label=1===parseInt(n.strand,10)?(n.external_name||n.id)+" >":"< "+(n.external_name||n.id),n.transcripts=[],this.insertFeature(n))}}})},function(e,t){Genoverse.Track.Model.Gene.HGNCEnsembl=Genoverse.Track.Model.Gene.extend({url:"https://pace.genenames.org/cgi-bin/genoverse/ajax/genes-by-coord?chr=__CHR__&start=__START__&end=__END__&source=Ensembl",dataRequestLimit:5e6,parseData:function(e){for(var t=0;t<e.length;t++){var i=e[t];"gene"!==i.feature_type||this.featuresById[i.id]||(i.symbol?i.label=1===parseInt(i.strand,10)?i.symbol+": "+i.id+" >":"< "+i.symbol+": "+i.id:i.label=1===parseInt(i.strand,10)?i.id+" >":"< "+i.id,i.transcripts=[],this.insertFeature(i))}}})},function(e,t){Genoverse.Track.Model.Gene.HGNCNCBIGene=Genoverse.Track.Model.Gene.extend({url:"https://pace.genenames.org/cgi-bin/genoverse/ajax/genes-by-coord?chr=__CHR__&start=__START__&end=__END__&source=NCBI",dataRequestLimit:5e6,parseData:function(e){for(var t=0;t<e.length;t++){var i=e[t];"gene"!==i.feature_type||this.featuresById[i.id]||(i.symbol?i.label=1===parseInt(i.strand,10)?i.symbol+": "+i.id+" >":"< "+i.symbol+": "+i.id:i.label=1===parseInt(i.strand,10)?i.id+" >":"< "+i.id,i.transcripts=[],this.insertFeature(i))}}})},function(e,t){Genoverse.Track.Model.Gene.HGNCVega=Genoverse.Track.Model.Gene.extend({url:"https://pace.genenames.org/cgi-bin/genoverse/ajax/genes-by-coord?chr=__CHR__&start=__START__&end=__END__&source=VEGA",dataRequestLimit:5e6,parseData:function(e){for(var t=0;t<e.length;t++){var i=e[t];"gene"!==i.feature_type||this.featuresById[i.id]||(i.symbol?i.label=1===parseInt(i.strand,10)?i.symbol+": "+i.id+" >":"< "+i.symbol+": "+i.id:i.label=1===parseInt(i.strand,10)?i.id+" >":"< "+i.id,i.transcripts=[],this.insertFeature(i))}}})},function(e,t){Genoverse.Track.Model.Gene.HGNCPseudogeneOrg=Genoverse.Track.Model.Gene.extend({url:"https://pace.genenames.org/cgi-bin/genoverse/ajax/genes-by-coord?chr=__CHR__&start=__START__&end=__END__&source=Pseudogene.org",dataRequestLimit:5e6,parseData:function(e){for(var t=0;t<e.length;t++){var i=e[t];"gene"!==i.feature_type||this.featuresById[i.id]||(i.label=1===parseInt(i.strand,10)?i.id+" >":"< "+i.id,i.transcripts=[],this.insertFeature(i))}}})},function(e,t){Genoverse.Track.View.Gene=Genoverse.Track.View.extend({featureHeight:5,labels:!0,repeatLabels:!0,bump:!0})},function(e,t){Genoverse.Track.View.Gene.Ensembl=Genoverse.Track.View.Gene.extend({setFeatureColor:function(e){var t={sense_intronic:1,sense_overlapping:1,processed_transcript:1,nonsense_mediated_decay:1,non_stop_decay:1,antisense:1,retained_intron:1,tec:1,non_coding:1,ambiguous_orf:1,disrupted_domain:1,"3prime_overlapping_ncrna":1};e.color="#000000",0===e.logic_name.indexOf("ensembl_havana")?(e.color="#CD9B1D",e.legend="Merged Ensembl/Havana"):t[e.biotype]?(e.color="#0000FF",e.legend="Processed transcript"):"protein_coding"===e.biotype?(e.color="#A00000",e.legend="Protein coding"):e.biotype.indexOf("pseudogene")>-1?(e.color="#666666",e.legend="Pseudogene"):/rna/i.test(e.biotype)?(e.color="#8B668B",e.legend="RNA gene"):/^tr_.+_gene$/i.test(e.biotype)?(e.color="#CD6600",e.legend="TR gene"):/^ig_.+_gene$/i.test(e.biotype)&&(e.color="#8B4500",e.legend="IG gene"),e.labelColor=e.color}})},function(e,t){Genoverse.Track.View.Gene.HGNCEnsembl=Genoverse.Track.View.Gene.extend({setFeatureColor:function(e){e.color="#A00000",e.legend="Ensembl gene",e.labelColor=e.color}})},function(e,t){Genoverse.Track.View.Gene.HGNCNCBIGene=Genoverse.Track.View.Gene.extend({setFeatureColor:function(e){e.color="#000",e.legend="NCBI gene",e.labelColor=e.color}})},function(e,t){Genoverse.Track.View.Gene.HGNCVega=Genoverse.Track.View.Gene.extend({setFeatureColor:function(e){e.color="#7B94CE",e.legend="Vega gene",e.labelColor=e.color}})},function(e,t){Genoverse.Track.View.Gene.HGNCPseudogeneOrg=Genoverse.Track.View.Gene.extend({setFeatureColor:function(e){e.color="#FC6707",e.legend="Pseudogene.org",e.labelColor=e.color}})},function(e,t){Genoverse.Track.Model.Transcript=Genoverse.Track.Model.extend({})},function(e,t,i){(function(e){Genoverse.Track.Model.Transcript.Ensembl=Genoverse.Track.Model.Transcript.extend({url:"//rest.ensembl.org/overlap/region/human/__CHR__:__START__-__END__?feature=transcript;feature=exon;feature=cds;content-type=application/json",dataRequestLimit:5e6,setDefaults:function(){this.geneIds={},this.seenGenes=0,this.base.apply(this,arguments)},parseData:function(t,i){var n=this,r=this.featuresById,s=[];t.filter(function(e){return"transcript"===e.feature_type}).forEach(function(e,t){r[e.id]||(n.geneIds[e.Parent]=n.geneIds[e.Parent]||++n.seenGenes,e.chr=e.chr||i,e.label=1===parseInt(e.strand,10)?(e.external_name||e.id)+" >":"< "+(e.external_name||e.id),e.sort=1e10*n.geneIds[e.Parent]+(0===e.logic_name.indexOf("ensembl_havana")?0:2e9)+("protein_coding"===e.biotype?0:1e9)+e.start+t,e.cdsStart=1/0,e.cdsEnd=-1/0,e.exons={},e.subFeatures=[],n.insertFeature(e)),s.push(e.id)}),t.filter(function(e){return"cds"===e.feature_type&&r[e.Parent]}).forEach(function(e){r[e.Parent].cdsStart=Math.min(r[e.Parent].cdsStart,e.start),r[e.Parent].cdsEnd=Math.max(r[e.Parent].cdsEnd,e.end)}),t.filter(function(e){return"exon"===e.feature_type&&r[e.Parent]&&!r[e.Parent].exons[e.id]}).forEach(function(t){t.end<r[t.Parent].cdsStart||t.start>r[t.Parent].cdsEnd?t.utr=!0:t.start<r[t.Parent].cdsStart?(r[t.Parent].subFeatures.push(e.extend({utr:!0},t,{end:r[t.Parent].cdsStart})),t.start=r[t.Parent].cdsStart):t.end>r[t.Parent].cdsEnd&&(r[t.Parent].subFeatures.push(e.extend({utr:!0},t,{start:r[t.Parent].cdsEnd})),t.end=r[t.Parent].cdsEnd),r[t.Parent].subFeatures.push(t),r[t.Parent].exons[t.id]=t}),s.forEach(function(e){r[e].subFeatures.sort(function(e,t){return e.start-t.start})})}})}).call(t,i(0))},function(e,t){Genoverse.Track.View.Transcript=Genoverse.Track.View.extend({featureHeight:10,utrHeight:7,labels:!0,repeatLabels:!0,bump:!0,subFeatureJoinStyle:"curve",scaleFeatures:function(e,t){for(var i,n,r=0;r<e.length;r++)if(i=e[r].subFeatures||[],i.length){for(n=0;n<i.length;n++)i[n].utr&&(i[n].height=this.utrHeight);e[r].height=Math.max.apply(Math,i.map(function(e){return e.fake?0:e.height||0}).concat(this.featureHeight))}return this.base(e,t)}})},function(e,t){Genoverse.Track.View.Transcript.Ensembl=Genoverse.Track.View.Transcript.extend({setFeatureColor:function(e){Genoverse.Track.View.Gene.Ensembl.prototype.setFeatureColor(e);for(var t=0;t<(e.subFeatures||[]).length;t++)e.subFeatures[t].utr&&(e.subFeatures[t].color=!1,e.subFeatures[t].borderColor=e.color)}})},function(e,t,i){(function(e){Genoverse.Track.Model.File=Genoverse.Track.Model.extend({dataType:"text",init:function(){this.isLocal&&(this.url=!1),this.largeFile||this.indexFile||(this.allData=!0),this.base.apply(this,arguments)},getData:function(t){var i=this;if(this.isLocal&&this.dataFile){var n=new FileReader,r=e.Deferred();return n.onload=function(e){r.done(function(){this.receiveData(e.target.result,t,1,this.browser.getChromosomeSize(t))}).resolveWith(i)},n.readAsText(this.dataFile),r}return this.base.apply(this,arguments)}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Model.File.BAM=Genoverse.Track.Model.File.extend({getData:function(t,i,n){var r=this,s=e.Deferred();if(!this.bamFile)if(this.url)this.bamFile=new dallianceLib.URLFetchable(this.url),this.baiFile=new dallianceLib.URLFetchable(this.url+this.prop("indexExt"));else{if(!this.dataFile||!this.indexFile)return s.rejectWith(r,["BAM files must be accompanied by a .bai index file"]);this.bamFile=new dallianceLib.BlobFetchable(this.dataFile),this.baiFile=new dallianceLib.BlobFetchable(this.indexFile)}return dallianceLib.makeBam(this.bamFile,this.baiFile,null,function(e,o){o?console.log(o):e.fetch(t,i,n,function(e,o){o?console.log(o):(r.receiveData(e,t,i,n),s.resolveWith(r))})}),s},insertFeature:function(e){return e.id=e.chr+":"+e.readName+":"+e.pos,e.start=e.pos+1,e.end=e.start+e.seq.length,e.sequence=e.seq,this.base(e)}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Model.File.BED=Genoverse.Track.Model.File.extend({parseData:function(t,i){function n(e){return!isNaN(e)}for(var r,s,o,a,l,h,c,u,f,d,p,g,v="string"==typeof t?t.split("\n"):t,m=this.prop("thinHeight"),b=this.prop("thickHeight"),y=0;y<v.length;y++)if(r=v[y].split("\t").filter(function(e){return e}),!(r.length<3||"track"==r[0]||"browser"==r[0])&&(s=r.length,r[0]==i||r[0].toLowerCase()=="chr"+i||r[0].match("[^1-9]"+i+"$"))){if(o={chr:i,start:parseInt(r[1],10),end:parseInt(r[2],10),name:r[3],color:"#000000",originalFeature:r},s>3&&(o.score=parseFloat(r[4],10)),s>5&&(o.strand=r[5]),s>7&&(o.thickStart=r[6],o.thickEnd=r[7],o.drawThick=o.thickStart!==o.thickEnd),r[8]?o.color="rgb("+r[8]+")":o.color=this.scoreColor(isNaN(o.score)?1e3:o.score),12==s){for(o.blockCount=parseInt(r[9],10),a=[],h=r[10].split(",").filter(n),c=r[11].split(",").filter(n),u=0;u<h.length;u++)l={start:o.start+parseInt(c[u],10),height:m},l.end=l.start+parseInt(h[u],10),o.drawThick&&l.start<=o.thickEnd&&l.end>=o.thickStart?l.start>o.thickStart&&l.end<o.thickEnd?(l.height=b,a.push(l)):l.start<o.thickStart&&l.end<=o.thickEnd?(f=e.extend({},l,{end:o.thickStart}),g=e.extend({},l,{start:o.thickStart,height:b}),a=a.concat([f,g])):l.start>=o.thickStart&&l.end>o.thickEnd?(f=e.extend({},l,{start:o.thickEnd}),g=e.extend({},l,{end:o.thickEnd,height:b}),a=a.concat([g,f])):(d=e.extend({},l,{end:o.thickStart}),p=e.extend({},l,{start:o.thickEnd}),g={start:o.thickStart,end:o.thickEnd,height:b},a=a.concat([d,g,p])):a.push(l);a.length&&(o.subFeatures=a)}this.insertFeature(o)}},scoreColor:function(e){return e<=166?"rgb(219,219,219)":e<=277?"rgb(186,186,186)":e<=388?"rgb(154,154,154)":e<=499?"rgb(122,122,122)":e<=611?"rgb(94,94,94)":e<=722?"rgb(67,67,67)":e<=833?"rgb(42,42,42)":e<=944?"rgb(21,21,21)":"#000000"}})}).call(t,i(0))},function(e,t){Genoverse.Track.Model.File.GFF=Genoverse.Track.Model.File.extend({parseData:function(e,t){for(var i=e.split("\n"),n=0;n<i.length;n++)if(i[n].length&&0!==i[n].indexOf("#")){var r=i[n].split("\t");if(!(r.length<5)){var s=r[0].toLowerCase();(s==t||s=="chr"+t||s.match("[^1-9]"+t+"$")||s.match("^"+t+"\\b"))&&this.insertFeature({id:r.slice(0,5).join("|"),chr:t,start:parseInt(r[3],10),end:parseInt(r[4],10),source:r[1],type:r[2],score:r[5],strand:"-"===r[6]?-1:1,label:r[1]+" "+r[2]+" "+r[3]+"-"+r[4]})}}}}),Genoverse.Track.Model.File.GTF=Genoverse.Track.Model.File.GFF},function(e,t,i){(function(e){Genoverse.Track.Model.File.VCF=Genoverse.Track.Model.File.extend({getData:function(t,i,n){var r=e.Deferred(),s=this;if(!this.prop("gz"))return this.base.apply(this,arguments);if(!this.vcfFile)if(this.url)this.vcfFile=new dallianceLib.URLFetchable(this.url),this.tbiFile=new dallianceLib.URLFetchable(this.url+this.prop("indexExt"));else{if(!this.dataFile||!this.indexFile)return r.rejectWith(s,["GZipped VCF files must be accompanied by a .tbi index file"]);this.vcfFile=new dallianceLib.BlobFetchable(this.dataFile),this.tbiFile=new dallianceLib.BlobFetchable(this.indexFile)}return this.makeVCF(this.vcfFile,this.tbiFile).then(function(e){s.cachedVCF=e,e.getRecords(t,i,n,function(e){s.receiveData(e,t,i,n),r.resolveWith(s)})}),r},makeVCF:function(t,i){var n=e.Deferred();if(this.cachedVCF)n.resolve(this.cachedVCF);else{var r=new VCFReader(t,i);r.readTabix(function(e){r.tabix=e,n.resolve(r)})}return n},parseData:function(e,t){for(var i=e.split("\n"),n=!!this.allData&&(this.prop("maxQual")||0),r=0;r<i.length;r++)if(i[r].length&&0!==i[r].indexOf("#")){var s=i[r].split("\t");if(!(s.length<5||s[0]!=t&&s[0]!="chr"+t)){var o=s.slice(0,3).join("|"),a=parseInt(s[1],10),l=s[4].split(",");l.unshift(s[3]);for(var h=0;h<l.length;h++){var c=a+l[h].length-1;this.insertFeature({id:o+"|"+l[h],sort:h,chr:t,start:a,end:c,width:c-a,allele:0===h?"REF":"ALT",sequence:l[h],label:l[h],labelColor:"#FFFFFF",originalFeature:s})}!1!==n&&(n=Math.max(n,s[5]))}}n&&this.prop("maxQual",n)}})}).call(t,i(0))},function(e,t){Genoverse.Track.Model.File.WIG=Genoverse.Track.Model.Graph.Bar.extend({dataType:"text",getData:function(){return this.url?this.base.apply(this,arguments):(this.isLocal=!0,this.dataFile=this.track.dataFile,Genoverse.Track.Model.File.prototype.getData.apply(this,arguments))},parseData:function(e,t,i,n){for(var r,s,o,a,l,h,c,u,f=e.split("\n"),d=[];f.length&&(h=f.shift())&&(-1!=h.indexOf("#")||-1!=h.indexOf("browser")||-1!=h.indexOf("track")););if(h)if(r=h.split(/\s+/),s=parseInt(r[1].split("=")[1].replace("chr","")),"fixedStep"==r[0])for(o=parseInt(r[2].split("=")[1]),a=parseInt(r[3].split("=")[1]),l=r[4]?parseInt(r[4].split("=")[1]):1,u=0;u<f.length;u++)d.push({chr:s,start:o,end:o+l,height:parseFloat(f[u])}),o+=a;else if("variableStep"==r[0])for(l=r[2]?parseInt(r[2].split("=")[1]):1,u=0;u<f.length;u++)r=f[u].split(/\s+/),c={chr:s,start:parseInt(r[0],10),height:parseFloat(r[1])},c.end=c.start+l,d.push(c);return this.base.call(this,d,t,i,n)}})},function(e,t,i){(function(e){Genoverse.Track.Chromosome=Genoverse.Track.extend({id:"chromosome",margin:1,featureMargin:{top:0,right:0,bottom:0,left:0},labels:"overlay",url:!1,allData:!0,colors:{acen:"#708090",gneg:"#FFFFFF",gpos:"#000000",gpos100:"#000000",gpos25:"#D9D9D9",gpos33:"#BFBFBF",gpos50:"#999999",gpos66:"#7F7F7F",gpos75:"#666666",gvar:"#E0E0E0",stalk:"#708090"},labelColors:{gneg:"#000000",gvar:"#000000",gpos25:"#000000",gpos33:"#000000"},getData:function(t,i,n){return this.receiveData(e.extend(!0,[],this.browser.genome[t].bands),t,i,n),e.Deferred().resolveWith(this)},insertFeature:function(e){e.label="acen"!==e.type&&"stalk"!==e.type&&e.id,e.menuTitle=e.id?e.chr+e.id:e.chr+":"+e.start+"-"+e.end,e.color=this.prop("colors")[e.type]||"#FFFFFF",e.labelColor=this.prop("labelColors")[e.type]||"#FFFFFF",e.id&&(e.id=e.chr+e.id),this.base(e)},drawFeature:function(e,t,i,n){if(t.fillStyle=e.color,t.strokeStyle="#000000","acen"===e.type)t.beginPath(),this.drawnAcen?(t.moveTo(e.x+e.width,.5),t.lineTo(e.x,(e.height+.5)/2),t.lineTo(e.x+e.width,e.height+.5)):(t.moveTo(e.x,.5),t.lineTo(e.x+e.width,(e.height+.5)/2),t.lineTo(e.x,e.height+.5),this.drawnAcen=!0),t.fill(),t.stroke();else if("stalk"===e.type)for(var r=0;r<2;r++)t.beginPath(),t.moveTo(e.x,.5),t.lineTo(e.x+.25*e.width,.25*e.height+.5),t.lineTo(e.x+.75*e.width,.25*e.height+.5),t.lineTo(e.x+e.width,.5),t[r?"moveTo":"lineTo"](e.x+e.width,e.height+.5),t.lineTo(e.x+.75*e.width,.75*e.height-.5),t.lineTo(e.x+.25*e.width,.75*e.height-.5),t.lineTo(e.x,e.height+.5),t[r?"stroke":"fill"]();else{this.base(e,t,i,n),t.beginPath();var s=this.browser.getChromosomeSize(e.chr);if(1===e.start||e.end===s){if(1===e.start){var o=e.x+e.width-(e.end===s?5:0);t.clearRect(0,0,5,e.height+.5),t.fillStyle=e.color,t.moveTo(5,.5),t.lineTo(o,.5),t.moveTo(5,e.height+.5),t.lineTo(o,e.height+.5),t.moveTo(5,.5),t.bezierCurveTo(-1,.5,-1,e.height+.5,5,e.height+.5),t.fill()}e.end===s&&(t.clearRect(e.x+e.width-5,0,5,e.height+.5),1!==e.start&&(t.fillStyle=e.color,t.moveTo(e.x,.5),t.lineTo(e.x+e.width-5,.5),t.moveTo(e.x,e.height+.5),t.lineTo(e.x+e.width-5,e.height+.5)),t.moveTo(e.x+e.width-5,.5),t.bezierCurveTo(this.width+1,.5,this.width+1,e.height+.5,e.x+e.width-5,e.height+.5),t.fill())}else t.moveTo(e.x,.5),t.lineTo(e.x+e.width,.5),t.moveTo(e.x,e.height+.5),t.lineTo(e.x+e.width,e.height+.5);t.stroke()}},drawLabel:function(e){(1===e.start||e.end===this.browser.getChromosomeSize(e.chr))&&e.labelWidth>=Math.floor(e.width-5)||this.base.apply(this,arguments)},populateMenu:function(e){return{title:e.menuTitle,Position:e.chr+":"+e.start+"-"+e.end}}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.dbSNP=Genoverse.Track.extend({id:"dbSNP",name:"dbSNP",info:"All sequence variants from the database of Single Nucleotide Polymorphisms (dbSNP)",url:"//rest.ensembl.org/overlap/region/human/__CHR__:__START__-__END__?feature=variation;content-type=application/json",dataRequestLimit:5e6,threshold:1e5,labels:!1,legend:!0,autoHeight:!0,colorMap:{transcript_ablation:"#ff0000",splice_acceptor_variant:"#FF581A",splice_donor_variant:"#FF581A",stop_gained:"#ff0000",frameshift_variant:"#9400D3",stop_lost:"#ff0000",start_lost:"#ffd700",transcript_amplification:"#ff69b4",inframe_insertion:"#ff69b4",inframe_deletion:"#ff69b4",missense_variant:"#ffd700",protein_altering_variant:"#FF0080",splice_region_variant:"#ff7f50",incomplete_terminal_codon_variant:"#ff00ff",stop_retained_variant:"#76ee00",synonymous_variant:"#76ee00",coding_sequence_variant:"#458b00",mature_miRNA_variant:"#458b00","5_prime_UTR_variant":"#7ac5cd","3_prime_UTR_variant":"#7ac5cd",non_coding_transcript_exon_variant:"#32cd32",intron_variant:"#02599c",NMD_transcript_variant:"#ff4500",non_coding_transcript_variant:"#32cd32",upstream_gene_variant:"#a2b5cd",downstream_gene_variant:"#a2b5cd",TFBS_ablation:"#a52a2a",TFBS_amplification:"#a52a2a",TF_binding_site_variant:"#a52a2a",regulatory_region_ablation:"#a52a2a",regulatory_region_amplification:"#a52a2a",feature_elongation:"#7f7f7f",regulatory_region_variant:"#a52a2a",feature_truncation:"#7f7f7f",intergenic_variant:"#636363"},insertFeature:function(e){e.color=this.prop("colorMap")[e.consequence_type],e.legend=e.consequence_type,e.start>e.end&&(e.decorations=!0),this.base(e)},decorateFeature:function(e,t,i){t.fillStyle=e.color,t.beginPath(),t.moveTo(e.position[i].X-3,e.position[i].Y+this.featureHeight),t.lineTo(e.position[i].X,e.position[i].Y+this.featureHeight-4),t.lineTo(e.position[i].X+3,e.position[i].Y+this.featureHeight),t.fill(),i>1&&t.fillRect(e.position[i].X-.5,e.position[i].Y,1.5,e.position[i].height)},populateMenu:function(t){var i=e.Deferred(),n=[{title:'<a href="http://www.ensembl.org/Homo_sapiens/Variation/Summary?v='+t.id+'" target="_blank">'+t.id+"</a>",Location:t.chr+":"+t.start+"-"+t.end,Consequence:t.consequence_type,Alleles:t.alleles.join(", ")}];return e.ajax({url:"//rest.ensembl.org/variation/human/"+t.id+"?population_genotypes=1;content-type=application/json",dataType:"json",success:function(r){var s,o,a,l=e.grep(r.population_genotypes,function(e){return/1000GENOMES.+ALL/.test(e.population)}),h={};if(l.length){for(o=0;o<l.length;o++)s=l[o],s.frequency=parseFloat(s.frequency,10),s.count=parseInt(s.count,10),h[s.population]=h[s.population]||[],h[s.population].push(s);for(o in h){h[o].sort(function(e,t){return e.count<t.count}),s={title:o+" population genotypes",Genotype:["Frequency","Count"],start:!1,end:!1};for(a in h[o])s[h[o][a].genotype]=[(100*h[o][a].frequency).toFixed(2)+"%",h[o][a].count];n.push(s)}s={start:!1,end:!1},s['<a href="http://www.ensembl.org/Homo_sapiens/Variation/Population?v='+t.id+'" target="_blank">See all population genotypes</a>']="",n.push(s)}i.resolve(n)}}),i},5e3:{bump:!1},1:{bump:!0}})}).call(t,i(0))},function(e,t){Genoverse.Track.File=Genoverse.Track.extend({setInterface:function(){this.base(),this._interface.isLocal="model",this._interface.dataFile="model",this._interface.indexFile="model",this._interface.largeFile="model"}})},function(e,t,i){(function(e){Genoverse.Track.File.BAM=Genoverse.Track.File.extend({name:"BAM",indexExt:".bai",threshold:1e5,largeFile:!0,model:Genoverse.Track.Model.File.BAM,view:Genoverse.Track.View.Sequence.extend({bump:!0,autoHeight:!0}),click:function(){var e=this.base.apply(this,arguments);return e&&e.addClass("gv-wrap-values"),e},populateMenu:function(t){var i=e.extend({title:t.readName},t);return delete i.sequence,delete i.id,this.base(i)}})}).call(t,i(0))},function(e,t){Genoverse.Track.File.BED=Genoverse.Track.File.extend({name:"BED",model:Genoverse.Track.Model.File.BED,bump:!0,featureHeight:10,thickHeight:10,thinHeight:7,subFeatureJoinStyle:"curve",populateMenu:function(e){var t=[!1,!1,!1,"name","score","strand","thickStart","thickEnd","itemRgb","blockCount","blockSizes","blockStarts"];return e.originalFeature.reduce(function(e,i,n){return t[n]&&(e[t[n]]=i),e},{title:'<a target="_blank" href="https://genome.ucsc.edu/FAQ/FAQformat.html#format1">BED feature details</a>',Location:e.chr+":"+e.start+"-"+e.end})}})},function(e,t,i){(function(e){Genoverse.Track.File.BIGBED=Genoverse.Track.File.BED.extend({name:"bigbed",model:Genoverse.Track.Model.File.BED.extend({getData:function(t,i,n){var r=this,s=e.Deferred();this.bigbedFile||(this.bigbedFile=this.bigbedFile||(this.url?new dallianceLib.URLFetchable(this.url):new dallianceLib.BlobFetchable(this.track.dataFile)));var o=e.Deferred().done(function(){r.bwReader.getValues(t,i,n,function(e,o){o||(e.sort(function(e,t){return e.start-t.start}),e.length?r.receiveData(e,t,e[0].start,e[e.length-1].end):r.receiveData(e,t,i,n)),s.resolveWith(r)})});return this.bwReader?o.resolve():new BWReader(this.bigbedFile,function(e){if(!e)return r.receiveData([],t,i,n),s.resolveWith(r);r.bwReader=e,o.resolve()}),s}})}),Genoverse.Track.File.BB=Genoverse.Track.File.BIGBED}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.File.BIGWIG=Genoverse.Track.Graph.Bar.extend({name:"bigwig",height:100,setDefaults:function(){this.bwReader=null,this.base.apply(this,arguments)},getData:function(t,i,n){var r=this,s=e.Deferred();this.bigwigFile||(this.bigwigFile=this.bigwigFile||(this.url?new dallianceLib.URLFetchable(this.url):new dallianceLib.BlobFetchable(this.track.dataFile)));var o=e.Deferred().done(function(){r.prop("bwReader").getValues(t,i,n,function(e,o){o||(e.sort(function(e,t){return e.start-t.start}),e.length?r.receiveData(e,t,e[0].start,e[e.length-1].end):r.receiveData(e,t,i,n)),s.resolveWith(r)})});return this.prop("bwReader")?o.resolve():new BWReader(this.bigwigFile,function(e){if(!e)return r.receiveData([],t,i,n),s.resolveWith(r);r.prop("bwReader",e),o.resolve()}),s}}),Genoverse.Track.File.BW=Genoverse.Track.File.BIGWIG}).call(t,i(0))},function(e,t){Genoverse.Track.File.GFF=Genoverse.Track.File.extend({name:"GFF",model:Genoverse.Track.Model.File.GFF,bump:!0,height:100,featureHeight:5}),Genoverse.Track.File.GTF=Genoverse.Track.File.GFF},function(e,t){Genoverse.Track.File.VCF=Genoverse.Track.File.extend({name:"VCF",indexExt:".tbi",model:Genoverse.Track.Model.File.VCF,autoHeight:!1,maxQual:void 0,afterSetMVC:function(){this.prop("gz")&&this.prop("threshold",1e5)},populateMenu:function(e){return{title:'<a target="_blank" href="http://www.1000genomes.org/node/101">VCF feature details</a>',CHROM:e.originalFeature[0],POS:e.originalFeature[1],ID:e.originalFeature[2],REF:e.originalFeature[3],ALT:e.originalFeature[4],QUAL:e.originalFeature[5],FILTER:e.originalFeature[6],INFO:e.originalFeature[7].split(";").join("<br />")}},1:{view:Genoverse.Track.View.Sequence.extend({bump:!0,labels:!1,featureMargin:{top:0,right:0,bottom:0,left:0},draw:function(e,t,i,n){this.base.apply(this,arguments),this.highlightRef(e,t,n)},highlightRef:function(e,t,i){t.strokeStyle="black";for(var n=0;n<e.length;n++)"REF"===e[n].allele&&t.strokeRect(e[n].position[i].X,e[n].position[i].Y,e[n].position[i].width,e[n].position[i].height)}})},1e3:{view:Genoverse.Track.View.extend({bump:!1,labels:!1,drawFeature:function(e){var t=this.prop("maxQual");if(t&&!e.color){var i=Math.min(255,Math.floor(255*(e.originalFeature[5]||0)/t))-127,n=i>0?255:127+i,r=i<0?255:127-i;e.color="rgb("+n+","+r+",0)"}this.base.apply(this,arguments)}})}})},function(e,t){Genoverse.Track.File.WIG=Genoverse.Track.Graph.Bar.extend({model:Genoverse.Track.Model.File.WIG,name:"wig",height:100})},function(e,t){Genoverse.Track.Ensembl=Genoverse.Track.extend({id:"ensembl",name:"Ensembl",height:200,legend:!0,populateMenu:function(e){var t="http://www.ensembl.org/Homo_sapiens/"+("transcript"===e.feature_type?"Transcript":"Gene")+"/Summary?"+("transcript"===e.feature_type?"t":"g")+"="+e.id,i={title:'<a target="_blank" href="'+t+'">'+(e.external_name?e.external_name+" ("+e.id+")":e.id)+"</a>",Location:e.chr+":"+e.start+"-"+e.end,Source:e.source,Biotype:e.biotype};return"transcript"===e.feature_type&&(i.Gene='<a target="_blank" href="http://www.ensembl.org/Homo_sapiens/Gene/Summary?g='+e.Parent+'">'+e.Parent+"</a>"),i},2e6:{labels:!1},1e5:{labels:!0,model:Genoverse.Track.Model.Gene.Ensembl,view:Genoverse.Track.View.Gene.Ensembl},1:{labels:!0,model:Genoverse.Track.Model.Transcript.Ensembl,view:Genoverse.Track.View.Transcript.Ensembl}})},function(e,t){Genoverse.Track.HGNCEnsembl=Genoverse.Track.extend({id:"hgncEnsembl",name:"HGNC Ensembl genes",height:100,legend:!1,resizable:!0,populateMenu:function(e){var t="http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+e.id,i="Ensembl gene: ",n={title:'<a target="_blank" href="'+t+'">'+(e.external_name?e.external_name+" ("+e.id+")":e.id)+"</a>",Location:e.chr+":"+e.start+"-"+e.end,Source:e.source};return e.symbol&&(i=e.symbol+": ",n.title='<a target="_blank" href="'+t+'">'+i+e.id+"</a>",n.Symbol=e.symbol),e.biotype&&(n.Biotype=e.biotype),n["Rerun as"]='<a href="/update/mapping.html#/GRCh38/'+e.id+'">'+e.id+"</a>",n},2e6:{labels:!1},1e5:{labels:!0},1:{labels:!0,model:Genoverse.Track.Model.Gene.HGNCEnsembl,view:Genoverse.Track.View.Gene.HGNCEnsembl}})},function(e,t){Genoverse.Track.HGNCNCBIGene=Genoverse.Track.extend({id:"hgncNcbiGene",name:"HGNC NCBI genes",height:100,legend:!1,resizable:!0,populateMenu:function(e){var t="http://www.ncbi.nlm.nih.gov/gene/"+e.id,i="NCBI gene: ",n={title:'<a target="_blank" href="'+t+'">'+i+e.id+"</a>",Location:e.chr+":"+e.start+"-"+e.end,Source:e.source};return e.symbol&&(i=e.symbol+": ",n.title='<a target="_blank" href="'+t+'">'+i+e.id+"</a>",n.Symbol=e.symbol),e.biotype&&(n.Biotype=e.biotype),n["Rerun as"]='<a href="/update/mapping.html#/GRCh38/'+e.id+'">'+e.id+"</a>",n},2e6:{labels:!1},1e5:{labels:!0},1:{labels:!0,model:Genoverse.Track.Model.Gene.HGNCNCBIGene,view:Genoverse.Track.View.Gene.HGNCNCBIGene}})},function(e,t){Genoverse.Track.HGNCVega=Genoverse.Track.extend({id:"hgncVega",name:"HGNC Vega genes",height:100,legend:!1,resizable:!0,populateMenu:function(e){var t="http://vega.sanger.ac.uk/Homo_sapiens/Gene/Summary?db=core;g="+e.id,i="Vega gene: ",n={title:'<a target="_blank" href="'+t+'">'+i+e.id+"</a>",Location:e.chr+":"+e.start+"-"+e.end,Source:e.source};return e.symbol&&(i=e.symbol+": ",n.title='<a target="_blank" href="'+t+'">'+i+e.id+"</a>",n.Symbol=e.symbol),e.biotype&&(n.Biotype=e.biotype),n["Rerun as"]='<a href="/update/mapping.html#/GRCh38/'+e.id+'">'+e.id+"</a>",n},2e6:{labels:!1},1e5:{labels:!0},1:{labels:!0,model:Genoverse.Track.Model.Gene.HGNCVega,view:Genoverse.Track.View.Gene.HGNCVega}})},function(e,t){Genoverse.Track.HGNCPseudogeneOrg=Genoverse.Track.extend({id:"hgncPseudogeneOrg",name:"HGNC Pseudogene.org genes",height:100,legend:!1,resizable:!0,populateMenu:function(e){var t="http://tables.pseudogene.org/"+e.id,i={title:'<a target="_blank" href="'+t+'">Pseudogene.org: '+e.id+"</a>",Location:e.chr+":"+e.start+"-"+e.end,Source:e.source};if(e.parent_gene){var n="http://www.ensembl.org/Homo_sapiens/Gene/Summary?g="+e.parent_gene;i["Parent gene"]='<a target="_blank" href="'+n+'">'+e.parent_gene+"</a>",i["E-value"]=e.evalue,i.Identity=e.identity,i.Class=e.class}return i["Rerun as"]='<a href="/update/mapping.html#/GRCh38/'+e.id+'">'+e.id+"</a>",i},2e6:{labels:!1},1e5:{labels:!0},1:{labels:!0,model:Genoverse.Track.Model.Gene.HGNCPseudogeneOrg,view:Genoverse.Track.View.Gene.HGNCPseudogeneOrg}})},function(e,t,i){(function(e){Genoverse.Track.HighlightRegion=Genoverse.Track.extend({id:"highlights",unsortable:!0,fixedOrder:!0,repeatLabels:!0,resizable:!1,border:!1,alwaysReposition:!0,height:15,featureHeight:2,order:-1,orderReverse:9e99,controls:"off",colors:["#777777","#F08080","#3CB371","#6495ED","#FFA500","#9370DB"],labels:"separate",depth:1,featureMargin:{top:13,right:0,bottom:0,left:0},margin:0,constructor:function(){return this.colorIndex=0,this.base.apply(this,arguments)},addHighlights:function(t){for(var i=0;i<t.length;i++)this.model.insertFeature(e.extend({label:t[i].start+"-"+t[i].end},t[i]));this.reset()},removeHighlights:function(t){var i,n,r,s=this.prop("featuresByChr"),o=this.prop("featuresById");t=t||e.map(o,function(e){return e});for(var a=0;a<t.length;a++)!1!==t[a].removable&&(i=s[t[a].chr],n={x:t[a].start,y:0,w:t[a].end-t[a].start+1,h:1},r=e.grep(i.search(n),function(e){return e.id===t[a].id}),r.length&&i.remove(n,r[0]),delete o[t[a].id]);1===this.prop("strand")&&this.prop("reverseTrack").removeHighlights(t),this.reset()},controller:Genoverse.Track.Controller.Stranded.extend({setDefaults:function(){-1===this.prop("strand")&&(this.prop("labels",!1),this.prop("border",!1),this.prop("height",2),this.prop("featureMargin").top=0),this.base()},setName:function(e){-1===this.prop("strand")?(this.base(""),this.minLabelHeight=0,this.label.height(0)):this.base(e)},makeImage:function(e){1===this.prop("strand")&&(e.background="gv-full-height");var t=this.base(e);return e.container.addClass(e.background),t},render:function(e,t){this.base(e,t),t.siblings(".gv-labels").css("top",this.prop("featureHeight")-this.prop("featureMargin").top)},renderBackground:function(e,t){this.base(e,t),t.height(this.browser.wrapper.outerHeight(!0))},populateMenu:function(e){var t,i,n=[];e.length>1&&n.push({title:"Highlights"});for(var r=0;r<e.length;r++)t=e[r].start+"-"+e[r].end,i={title:e[r].label?e[r].label[0]:t,start:!1},i[i.title===t?"title":"Location"]=e[r].chr+":"+t,i['<a class="gv-focus-highlight" href="#" data-chr="'+e[r].chr+'" data-start="'+e[r].start+'" data-end="'+e[r].end+'">Focus here</a>']="",!1!==e[r].removable&&(i['<a class="gv-remove-highlight"  href="#" data-id="'+e[r].id+'">Remove this highlight</a>']="",i['<a class="gv-remove-highlights" href="#">Remove all highlights</a>']=""),n.push(i);return n},click:function(){if(1===this.prop("strand")){var t=this.base.apply(this,arguments);if(t&&!t.data("highlightEvents")){var i=this.track;t.find(".gv-remove-highlight").on("click",function(){var n=e(this).data("id");return i.removeHighlights(e.grep(t.data("feature"),function(e){return e.id===n})),!1}),t.find(".gv-remove-highlights").on("click",function(){return i.removeHighlights(),!1}),t.find(".gv-focus-highlight").on("click",function(){var t=e(this).data(),n=t.end-t.start+1,r=Math.max(Math.round(n/4),25);return i.browser.moveTo(t.chr,t.start-r,t.end+r,!0),!1}),t.data("highlightEvents",!0)}}},getClickedFeatures:function(t,i,n){var r={},s=this.scale,o=e.grep(this.featurePositions.search({x:t,y:i,w:1,h:1}).concat(e.grep(this.labelPositions.search({x:t,y:i,w:1,h:1}),function(e){return!1!==e.position[s].label.visible})),function(e){var t=!r[e.id];return r[e.id]=!0,t});return!!o.length&&[this.model.sortFeatures(o)]}}),model:Genoverse.Track.Model.Stranded.extend({url:!1,insertFeature:function(e){if(e.id=e.chr+":"+e.start+"-"+e.end,e.sort=e.start,!e.color){var t=this.prop("colors"),i=this.prop("colorIndex");e.color=t[i++],this.prop("colorIndex",t[i]?i:0)}this.featuresById[e.id]||this.base(e)},findFeatures:function(){return Genoverse.Track.Model.prototype.findFeatures.apply(this,arguments)}}),view:Genoverse.Track.View.extend({positionFeatures:function(e,t){var i=this.base.apply(this,arguments);return t.featureHeight=Math.max(t.featureHeight-this.featureMargin.top,0),i},draw:function(e,t,i,n){1===this.prop("strand")&&(t.fillStyle="#FFF",t.fillRect(0,0,t.canvas.width,t.canvas.height)),this.base(e,t,i,n)},drawBackground:function(t,i,n){if(-1!==this.prop("strand"))for(var r=0;r<t.length;r++)i.fillStyle=t[r].color,this.drawFeature(e.extend(!0,{},t[r],{x:t[r].position[n.scale].X,y:0,width:t[r].position[n.scale].width,height:i.canvas.height,color:this.shadeColor(i.fillStyle,.8),border:t[r].color,label:!1,decorations:!0}),i,!1,n.scale)},decorateFeature:function(e,t,i){var n=e.x+.5,r=n+e.width,s=!1;t.strokeStyle=e.border,t.lineWidth=2,t.beginPath(),n>=0&&n<=this.width&&(t.moveTo(n,e.y),t.lineTo(n,e.y+e.height),s=!0),r>=0&&r<=this.width&&(t.moveTo(r,e.y),t.lineTo(r,e.y+e.height),s=!0),s&&t.stroke(),t.lineWidth=1}})})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Controller.Legend=Genoverse.Track.Controller.Static.extend({init:function(){this.base(),this.container.addClass("gv-track-container-legend"),this.browser.legends[this.track.id]=this.track,this.track.setTracks()},destroy:function(){delete this.browser.legends[this.prop("id")],this.base()}}),Genoverse.Track.Model.Legend=Genoverse.Track.Model.Static.extend({findFeatures:function(){var t={x:this.browser.scaledStart,y:0,w:this.width},i={};return e.each(e.map(this.track.tracks,function(e){var i=e.prop("featurePositions");return t.h=e.prop("height"),i?i.search(t).concat(e.prop("labelPositions").search(t)):[]}),function(){this.legend&&(i[this.legend]=this.legendColor||this.color)}),this.sortFeatures(e.map(i,function(e,t){return[[t,e]]}))},sortFeatures:function(e){return e.sort(function(e,t){var i=e[0].toLowerCase(),n=t[0].toLowerCase();return i<n?-1:i>n?1:0})}}),Genoverse.Track.View.Legend=Genoverse.Track.View.Static.extend({textColor:"#000000",labels:"overlay",featureHeight:12,positionFeatures:function(e,t){if(t.positioned)return e;for(var i,n,r,s=0,o=0,a=this.width/2,l=this.fontHeight+5,h=[],c=t.xOffset||0,u=0;u<e.length;u++)i=s*a+5,n=o*l+5,r=this.context.measureText(e[u][0]).width,h.push({x:i+c,y:n,width:20,height:this.featureHeight,color:e[u][1]},{x:i+c+5+20,y:n,width:r+1,height:this.featureHeight,color:!1,labelColor:this.textColor,labelWidth:r,label:e[u][0]}),2==++s&&(s=0,o++);return t.height=this.prop("height",e.length?(o+(s?1:0))*l+5:0),t.width=this.width,t.positioned=!0,this.base(h,t)}}),Genoverse.Track.Legend=Genoverse.Track.Static.extend({unsortable:!0,lockToTrack:!0,removable:!1,controller:Genoverse.Track.Controller.Legend,model:Genoverse.Track.Model.Legend,view:Genoverse.Track.View.Legend,setDefaults:function(){this.order=void 0!==this.order?this.order:9e99,this.id=this.id||"legend",this.type=this.type||"legend",this.base()},setEvents:function(){this.browser.on({"afterAddTracks afterRemoveTracks":function(e){for(var t in this.legends)this.legends[t].setTracks();this.sortTracks()},afterRemoveTracks:function(e){for(var t in e)e[t].legendTrack&&0===e[t].legendTrack.tracks.length&&e[t].legendTrack.remove();for(var t in this.legends)this.legends[t].controller.makeImage({})},afterUpdateTrackOrder:function(e,t){var i=t.item.data("track"),n=this.legends[i.id]||i.legendTrack;n&&n.lockToTrack&&!1===n.unsortable&&(n.lockToTrack=!1);for(var r in this.legends)this.legends[r].updateOrder();this.sortTracks()}}),this.browser.on({afterPositionFeatures:function(e,t){var i=this.prop("legendTrack");i&&setTimeout(function(){i.controller.makeImage(t)},1)},afterResize:function(e,t){var i=this.prop("legendTrack");i&&!0===t&&i.controller.makeImage({})},afterCheckHeight:function(){var e=this.prop("legendTrack");e&&e.controller.makeImage({})},afterSetMVC:function(){var e=this.prop("legendTrack");e&&e.tracks.length&&(e.disable(),!1!==this.legend&&e.enable())}},this)},setTracks:function(){var t=this,i=this.type;this.tracks=e.map(this.browser.tracks.filter(function(e){if(e.legendType===i)return e.legendTrack=e.legendTrack||t,!0}),function(e){return[e].concat(e.prop("childTracks"),e.prop("parentTrack")).filter(function(e){return e&&e!==t&&!e.prop("disabled")})}),this.updateOrder(),"object"==typeof this.controller?this[this.tracks.length?"enable":"disable"]():this.disabled=!this.tracks.length},updateOrder:function(){if(this.lockToTrack){var e=this.tracks.filter(function(e){return!e.prop("parentTrack")});e.length&&(this.order=e[e.length-1].order+.1)}},enable:function(){this.base(),this.controller.makeImage({})},disable:function(){delete this.controller.stringified,this.base()}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Scaleline=Genoverse.Track.Static.extend({strand:1,color:"#000000",height:12,labels:"overlay",unsortable:!0,fixedOrder:!0,resize:e.noop,makeFirstImage:function(){this.prop("scaleline",!1),this.base.apply(this,arguments)},render:function(e,t){this.base(e,t),this.prop("drawnScale",t.data("scale"))},positionFeatures:function(e,t){var i=this.prop("scaleline");if(t.scale===this.drawnScale)return!1;if(i)return i;var n,r,s=this.prop("strand"),o=this.prop("height"),a=this.formatLabel(this.browser.length),l=1===s?"Forward strand":"Reverse strand",h=this.context.measureText(a).width,c=this.context.measureText(l).width;return 1===s?(n=0,r=this.width-c-40):(n=25,r=30),i=[{x:n,y:o/2,width:this.width-25,height:1,decorations:!0},{x:(this.width-h-10)/2,y:0,width:h+10,height:o,clear:!0,color:!1,labelColor:this.color,labelWidth:h,label:a},{x:r,y:0,width:c+10,height:o,clear:!0,color:!1,labelColor:this.color,labelWidth:c,label:l}],this.base(this.prop("scaleline",i),t)},decorateFeature:function(e,t){var i=this.prop("strand"),n=this.prop("height"),r=1===i?this.width-25:25;t.strokeStyle=this.color,t.beginPath(),t.moveTo(r,.25*n),t.lineTo(r+20*i,.5*n),t.lineTo(r,.75*n),t.closePath(),t.stroke(),t.fill()}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Track.Scalebar=Genoverse.Track.extend({unsortable:!0,fixedOrder:!0,order:0,orderReverse:1e5,featureStrand:1,controls:"off",height:20,featureHeight:3,featureMargin:{top:0,right:0,bottom:2,left:0},margin:0,minPixPerMajor:100,color:"#000000",autoHeight:!1,labels:!0,bump:!1,resizable:!1,click:e.noop,colors:{majorGuideLine:"#CCCCCC",minorGuideLine:"#E5E5E5"},setEvents:function(){function t(){e(".gv-bg.gv-full-height",i.container).height(function(){return i.wrapper.outerHeight(!0)-e(this).parents(".gv-track-container").position().top})}var i=this.browser;i.on("afterAddTracks",t),i.on("afterResize",this,t)},setScale:function(){var t,i,n=this.prop("width")/this.prop("minPixPerMajor"),r=5,s=-1,o=(""+this.browser.start).split(""),a=(""+this.browser.end).split(""),l={};for(i=o.length;i<a.length;i++)o.unshift("0");for(i=a.length;i<o.length;i++)a.unshift("0");for(i=0;i<o.length;i++)if((t=parseInt(a.slice(0,o.length-i).join(""),10)-parseInt(o.slice(0,o.length-i).join(""),10))&&t<=n){s=parseInt("1"+e.map(new Array(i),function(){return"0"}).join(""),10);break}-1===s?(s=1===this.browser.length?1:parseInt("1"+e.map(new Array(o.length),function(){return"0"}).join(""),10),r=1):5*t<=n?(s/=5,r=2):4*t<=n?(s/=4,r=1):2*t<=n&&(s/=2),s=Math.max(s,1),l[this.browser.chr]=new RTree,this.prop("minorUnit",Math.max(s/r,1)),this.prop("majorUnit",s),this.prop("featuresByChr",l),this.prop("featuresById",{}),this.prop("seen",{}),this.base()},setFeatures:function(e,t,i){var n=this.prop("minorUnit"),r=this.prop("majorUnit"),s=this.prop("seen");t=Math.max(t-t%n-r,0);for(var o,a,l,h=t/n%2?1:-1,c=t;c<i+n;c+=n)h*=-1,s[c]||(s[c]=1,o={id:e+":"+c,chr:e,strand:1,sort:c},a=c&&c%r==0,1===h&&(o.start=c,o.end=c+n-1),a&&(l=this.view.formatLabel(c),l!==this.lastLabel&&(o.label=l,o.end||(o.start=c,o.end=c-1)),this.lastLabel=l),o.end&&this.model.insertFeature(o))},makeFirstImage:function(e){return-1===this.prop("strand")&&(e=this.track.forwardTrack.prop("scrollStart")),this.base(e)},makeImage:function(e){e.background="gv-guidelines gv-full-height",e.featureHeight=this.prop("height"),this.track.setFeatures(e.chr,e.start,e.end);var t=this.base(e);return e.container.addClass("gv-full-height"),t},makeReverseImage:function(e){this.imgContainers.push(e.container.clone().html(e.container.children(".gv-data").clone(!0).css({opacity:1,background:this.browser.wrapper.css("backgroundColor")}))[0]),this.scrollContainer.append(this.imgContainers)},renderBackground:function(e,t){this.base(e,t),t.height(this.browser.wrapper.outerHeight(!0))},draw:function(t,i,n,r){var s,o,a,l=t.length,h=this.prop("minorUnit"),c=Math.ceil(h*r);for(i.textBaseline="top",i.fillStyle=this.color,this.guideLines={major:{}};l--;)s=t[l],o=Math.round(s.position[r].X),a=o+c-1,this.drawFeature(e.extend({},s,{x:o,y:0,width:Math.ceil(s.position[r].width),height:this.featureHeight}),i,n,r),s.label&&(o>-1&&i.fillRect(o,this.featureHeight,1,this.featureHeight),this.guideLines.major[s.start]=!0),s.end<s.start&&(o--,a++),this.guideLines[s.start]=o,this.guideLines[s.start+h]=a;i.fillRect(0,0,i.canvas.width,1),i.fillRect(0,this.featureHeight,i.canvas.width,1)},drawBackground:function(e,t){for(var i in this.guideLines)this.guideLines[i]>=0&&this.guideLines[i]<=this.width&&(t.fillStyle=this.track.colors[this.guideLines.major[i]?"majorGuideLine":"minorGuideLine"],t.fillRect(this.guideLines[i],0,1,t.canvas.height))},formatLabel:function(e){return this.prop("minorUnit")<1e3?e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):this.base(e)}})}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Plugins.controlPanel=function(){this.controls=[{name:"Scroll left and right by pressing and holding these buttons",buttons:[{name:"Scroll left",icon:'<i class="fa fa-chevron-left"></i>',class:"gv-scroll-left"},{name:"Scroll right",icon:'<i class="fa fa-chevron-right"></i>',class:"gv-scroll-right"}],init:function(t){var i=e(this);i.find(".gv-scroll-left, .gv-scroll-right").on({mousedown:function(){t.startDragScroll()},mouseup:function(){t.stopDragScroll()}}),i.find(".gv-scroll-left").mousehold(50,function(){t.move(t.scrollDelta)}),i.find(".gv-scroll-right").mousehold(50,function(){t.move(-t.scrollDelta)})}},{name:"Zoom-in and zoom-out",buttons:[{name:"Zoom in",icon:'<i class="fa fa-search-plus"></i>',class:"gv-zoom-in",action:function(e){e.zoomIn()}},{name:"Zoom out",icon:'<i class="fa fa-search-minus"></i>',class:"gv-zoom-out",action:function(e){e.zoomOut()}}]},{name:"Toggle your mouse drag action between scroll left/right and select region",buttons:[{name:"Mouse drag action to scroll the browser left or right",icon:'<i class="fa fa-arrows-h"></i>',class:"gv-drag-scroll",action:function(t){t.setDragAction("scroll"),e(this).addClass("gv-active").siblings().removeClass("gv-active")}},{name:"Mouse drag action to select a region",icon:"<i></i>",class:"gv-drag-select",action:function(t){t.setDragAction("select"),e(this).addClass("gv-active").siblings().removeClass("gv-active")}}],init:function(t){e(this).find(".gv-drag-"+t.dragAction).addClass("gv-active").siblings().removeClass("gv-active")}},{name:"Toggle your mouse wheel action between zoom in/out and default page scroll",buttons:[{name:"Mouse wheel action to scroll the page up and down",icon:'<i class="fa fa-arrows-v"></i>',class:"gv-wheel-off",action:function(t){t.setWheelAction("off"),e(this).addClass("gv-active").siblings().removeClass("gv-active")}},{name:"Mouse wheel to zoom in and out",icon:"&#177;",class:"gv-wheel-zoom",action:function(t){t.setWheelAction("zoom"),e(this).addClass("gv-active").siblings().removeClass("gv-active")}}],init:function(t){e(this).find(".gv-wheel-"+t.wheelAction).addClass("gv-active").siblings().removeClass("gv-active")}}],this.saveable&&this.controls.push({icon:'<i class="fa fa-undo"></i>',name:"Reset tracks and configuration",action:function(e){e.resetConfig()}}),this.on({beforeInit:function(){var t=this;this.tracksLibrary||(this.tracksLibrary=e.grep(this.tracks,function(e){return e.prototype.name}));var i=e('<table cellspacing=0 cellpadding=0 class="gv">  <tr>    <td class="gv-panel gv-panel-left"></td>    <td class="gv-canvas-container"></td>    <td class="gv-panel gv-panel-right"></td>  </tr></table>').appendTo(this.container).find(".gv-panel-right");this.controlPanel=i,this.superContainer=this.container,this.container=e(".gv-canvas-container",this.container);for(var n=0;n<t.controls.length;n++)!function(i){var n=e('<div class="gv-button-set">').attr("title",i.name).appendTo(t.superContainer.find(".gv-panel-right")),r=i.buttons||[i];e.each(r,function(r,s){var o=e("<button>"+s.icon+"</button>").addClass(s.class).attr("title",s.name).appendTo(n);s.action&&o.on("click",function(){s.action.call(this,t)}),s.init&&s!==i&&s.init.call(o[0],t)}),i.init&&i.init.call(n,t)}(t.controls[n]);this.superContainer.width(this.width),this.width-=i.width(),e(document).on("keydown",function(t){27===t.keyCode&&(i.find("button.gv-drag-select").hasClass("gv-active")&&i.find("button.gv-drag-scroll").trigger("click"),e(".gv-menu .gv-close").trigger("click"))})},afterInit:function(){var t=this,i=e('<button title="Tracks menu"><i class="fa fa-navicon"></i> Tracks</button>').on("click",function(){function i(e,t){return e.constructor&&e.constructor.ancestor&&e.constructor.ancestor.prototype&&(t=i(e.constructor.ancestor.prototype,t.concat(e.constructor.ancestor.prototype.tags||[]))),t}var n=this;if(e(this).hasClass("gv-active"))e(".gv-menu.gv-tracks-menu .gv-close").trigger("click"),e(this).removeClass("gv-active");else{var r=e(this).data("menu");if(r)r.show();else{r=t.makeMenu({"Currently enabled tracks:":"Available tracks:",'<div class="gv-current-tracks"></div>':'<input placeholder="Search"><div class="gv-available-tracks"></div>'}).addClass("gv-tracks-menu"),r.css({marginLeft:r.width()/-2}),e("input[placeholder=Search]",r).on("keyup",function(){var t=this.value.toLowerCase();e(".gv-tracks-library-item",r).each(function(){var n=e(this).data("track"),r=!1;if(n.name&&n.name.toLowerCase().indexOf(t)>=0)r=!0;else for(var s=i(n,[]).concat(n.tags||[]),o=0;o<s.length;o++)if(s[o].toLowerCase().indexOf(t)>=0){r=!0;break}e(this)[r?"show":"hide"]()})}),e(".gv-close",r).on("click",function(){e(n).removeClass("gv-active")});var s=e(".gv-available-tracks",r),o=e(".gv-current-tracks",r).data({reload:function(){e(this).empty().data("listTracks")()},listTracks:function(){for(var i=0;i<t.tracks.length;i++)t.tracks[i].name&&!1!==t.tracks[i].removable&&!t.tracks[i].parentTrack&&function(t){e("<div>").append(e('<i class="gv-remove-track gv-menu-button fa fa-times-circle">').on("click",function(){t.remove()})).append("<span>"+t.name+"</span>").appendTo(o).data("track",t).addClass(t.unsortable?"gv-unsortable":"")}(t.tracks[i])}}).sortable({items:"div:not(.gv-unsortable)",cursor:"move",axis:"y",handle:"span",update:e.proxy(t.updateTrackOrder,t)});if(o.data("listTracks")(),t.tracksLibrary&&t.tracksLibrary.length)for(var a=e.map(t.tracksLibrary,function(e){return e.prototype.name&&!1!==e.prototype.removable?[[e.prototype.name.toLowerCase(),e]]:void 0}).sort(function(e,t){return e[0]>t[0]?1:-1}),l=0;l<a.length;l++)!function(i){e('<div class="gv-tracks-library-item">').append(e('<i class="gv-add-track gv-menu-button fa fa-plus-circle"> ').on("click",function(){t.tracks.filter(function(e){return!(e.fixedOrder||e.unsortable)});t.trackIds=t.trackIds||{},t.trackIds[i.prototype.id]=t.trackIds[i.prototype.id]||1,t.addTrack(i.extend({id:i.prototype.id+(t.tracksById[i.prototype.id]?t.trackIds[i.prototype.id]++:"")}))})).append("<span>"+i.prototype.name+"</span>").appendTo(s).data("track",i.prototype)}(a[l][1]);e(this).data("menu",r)}e(this).addClass("gv-active")}});this.labelContainer.prepend(e('<li class="gv-unsortable">').append(e('<div class="gv-button-set" title="Tracks menu">').append(i)))},afterAddDomElements:function(){this.wrapper.after('<div class="gv-powered-by">Powered by <a target="_blank" href="http://genoverse.org">Genoverse</a></div>'),this.superContainer.find(".gv-panel-left").append(this.labelContainer)},"afterAddTracks afterRemoveTracks":function(){var e=this.superContainer.find(".gv-tracks-menu .gv-current-tracks");e.length&&e.data("reload").call(e)}})},Genoverse.Plugins.controlPanel.requires="karyotype"}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Plugins.fileDrop=function(){this.on("afterInit",function(){var t=this,i=this.wrapper;e(window).on("dragenter",function(n){var r=n.originalEvent.dataTransfer;if(r&&r.types&&("Files"===r.types[0]||"Files"===r.types[1]||"Files"===r.types[2])&&!e(".gv-file-drop-total-overlay").length){var s=e('<div class="gv-file-drop">').appendTo(i),o=e('<div class="gv-file-drop-total-overlay">').prependTo("body"),a=function(){s.remove(),o.remove()};o.on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}),o.on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),o.on("dragleave",a),o.on("drop",function(i){a(),i.preventDefault(),i.stopPropagation();for(var n=e.map(i.originalEvent.dataTransfer.files,function(e){return e}).sort(function(e,t){return e.name<t.name?-1:1}),r=0;r<n.length;r++){var s,o=n[r],l=o.name.split(".").reverse(),h="gz"===l[0],c=l[h?1:0],u=Genoverse.Track.File[c.toUpperCase()];if(void 0===u)return;u.prototype.indexExt&&(n[r+1]||{}).name===o.name+u.prototype.indexExt&&(s=n[++r]),u=u.extend({name:o.name,info:"Local file `"+o.name+"`, size: "+o.size+" bytes",isLocal:!0,dataFile:o,indexFile:s,gz:h}),t.addTrack(u,t.tracks.length-1)}return!1})}})})}}).call(t,i(0))},function(e,t){Genoverse.Plugins.focusRegion=function(){this.controls.push({icon:'<i class="fa fa-map-marker"></i>',class:"gv-button-large",name:"Reset focus to "+(this.focusRegion&&this.focusRegion.name?this.focusRegion.name:this.chr+":"+this.start+"-"+this.end),action:function(e){e.moveTo(e.focusRegion.chr,e.focusRegion.start,e.focusRegion.end,!0)},init:function(e){e.focusRegion=e.focusRegion||{chr:e.chr,start:e.start,end:e.end}}})},Genoverse.Plugins.focusRegion.requires="controlPanel",Genoverse.Plugins.focusRegion.noCSS=!0},function(e,t){Genoverse.Plugins.fullscreen=function(){var e=this,t=!0,i="fullscreenchange",n="fullscreenElement",r="requestFullscreen",s="exitFullscreen";document.onmsfullscreenchange||null===document.onmsfullscreenchange?(i="MSFullscreenChange",n="msFullscreenElement",s="msExitFullscreen",r="msRequestFullscreen"):document.body.mozRequestFullScreen?(i="mozfullscreenchange",n="mozFullScreenElement",s="mozCancelFullScreen",r="mozRequestFullScreen"):document.body.webkitRequestFullscreen?(i="webkitfullscreenchange",n="webkitFullscreenElement",s="webkitCancelFullScreen",r="webkitRequestFullscreen"):document.onfullscreenchange||(t=!1),e.fullscreenVars={eventName:i,elemName:n,cancelName:s,requestName:r,enterEvent:function(e){e.preFullscreenWidth=e.superContainer.width(),e.superContainer.addClass("gv-fullscreen"),e.setWidth(window.innerWidth),e.controlPanel.find(".gv-fullscreen-button .fa").removeClass("fa-expand").addClass("fa-compress")},exitEvent:function(e){e.superContainer.hasClass("gv-fullscreen")&&(e.superContainer.removeClass("gv-fullscreen"),e.setWidth(e.preFullscreenWidth),e.controlPanel.find(".gv-fullscreen-button .fa").removeClass("fa-compress").addClass("fa-expand"))},eventListener:function(){e.superContainer.is(document[e.fullscreenVars.elemName])||(e.fullscreenVars.exitEvent(e),document.removeEventListener(e.fullscreenVars.eventName,e.fullscreenVars.eventListener))}},t&&e.controls.push({icon:'<i class="fa fa-expand"></i>',class:"gv-fullscreen-button",name:"Toggle fullscreen view",action:function(e){e.superContainer.hasClass("gv-fullscreen")?document[e.fullscreenVars.cancelName]():(document.addEventListener(e.fullscreenVars.eventName,e.fullscreenVars.eventListener),e.superContainer[0][e.fullscreenVars.requestName](),e.fullscreenVars.enterEvent(e))}})},Genoverse.Plugins.fullscreen.requires="controlPanel"},function(e,t,i){(function(e){Genoverse.Plugins.karyotype=function(){function t(){var t=e('<div class="gv-chromosome">'),i=e('<div class="gv-karyotype-container">').html(t).insertBefore(this.wrapper);this.karyotype=new Genoverse({parent:this,container:t,width:t.width(),genome:this.genome,chr:this.chr,start:1,end:this.chromosomeSize,isStatic:!0,tracks:[Genoverse.Track.Chromosome.extend({name:"Chr "+this.chr,height:20,featureHeight:20,border:!1,legend:!1,unsortable:!0,click:function(t){var i=this.container.parent().offset().left,n=t.pageX-i,r=this.featurePositions.search({x:n,y:1,w:1,h:1})[0];if(r)if("mouseup"===t.type)this.browser.parent.isStatic||this.browser.parent.moveTo(r.chr,r.start,r.end,!0);else if(this.hoverFeature!==r&&!this.browser.hideTooltip){if(this.container.tipsy("hide"),r.label){var s=i+r.position[this.scale].start+r.position[this.scale].width/2;this.container.attr("title",r.label[0]).tipsy({trigger:"manual",container:"body"}).tipsy("show").data("tipsy").$tip.css("left",function(){return s-e(this).width()/2})}this.hoverFeature=r}},addUserEventHandlers:function(){var e=this;this.base(),this.container.on({mousemove:function(t){e.click(t)},mouseout:function(t){if(e.browser.viewPoint.is(t.relatedTarget)||e.browser.viewPoint.find(t.relatedTarget).length)return!0;e.container.tipsy("hide"),e.hoverFeature=!1}},".gv-image-container"),this.container.on("mousewheel",".gv-image-container, .gv-selector",function(e){e.stopPropagation()})},afterSetName:function(){this.label.css("lineHeight",this.label.height()+"px")}})],addUserEventHandlers:e.noop,afterInit:function(){this.updatePosition(),this.viewPoint.fadeIn()},afterAddTracks:function(){this.track=this.tracks[0]},afterAddDomElements:function(){function t(){r.hideTooltip=!0,r.track.prop("container").tipsy("hide")}function n(t,i){if(r.hideTooltip=!1,"resizestop"===t.type){var n=e(this).data("ui-resizable").axis;if("e"===n&&s.end===r.chromosomeSize||"w"===n&&1===s.start)return}var o=r.chromosomeSize/r.width,a=Math.max(Math.floor(i.position.left*o),1),l="dragstop"===t.type?a+s.length-1:Math.floor(i.helper.outerWidth(!0)*o)+a;s.moveTo(r.chr,a,l,!0,"dragstop"===t.type)}var r=this,s=this.parent;!1===s.karyotypeLabel&&(this.labelContainer.remove(),this.labelContainer=e(),i.addClass("gv-no-label")),this.viewPoint=e('<div class="gv-karyotype-viewpoint-wrapper"><div class="gv-karyotype-viewpoint"></div></div>').appendTo(i).children().on({mousemove:function(e){r.track.controller.click(e)},mouseout:function(t){var i=e(t.relatedTarget);if(r.viewPoint.is(i)||r.viewPoint.find(i).length||"IMG"===i.prop("nodeName")&&i.parent().is(r.track.prop("imgContainers")[0]))return!0;r.track.prop("container").tipsy("hide"),r.track.prop("hoverFeature",!1)}}),s.isStatic||this.viewPoint.draggable({axis:"x",containment:this.wrapper,start:t,stop:n}).resizable({handles:"e, w",containment:"parent",start:t,stop:n,resize:function(e,t){t.element.css("left",Math.max(0,t.position.left)),t.position.left>0?t.element.width(Math.min(t.size.width,t.element.parent().width()-t.position.left)):t.element.width(t.size.width+t.position.left)}})},updatePosition:function(){var e=this.parent.start*this.scale,t=this.parent.end*this.scale-e;this.viewPoint.css({left:e,width:t})}}),this.loadedPlugins.controlPanel||e('<li class="gv-unsortable">').height(function(e,t){return t+i.height()}).prependTo(this.labelContainer)}function i(){var e=this.karyotype.container.parent();this.karyotype.destroy(),e.remove(),t.call(this)}this.on({afterInit:t,afterSetRange:function(){this.karyotype&&this.karyotype.updatePosition()},afterSetWidth:i,afterMoveTo:function(e){this.karyotype&&this.karyotype.chr!==e&&i.call(this)}})}}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Plugins.resizer=function(){this.on("afterSetMVC","tracks",function(){if(!0===this.prop("resizable")){var t=this,i=this.controller,n=this.prop("resizer"),r=this.prop("height");n||(n=this.prop("resizer",e('<div class="gv-resizer gv-static"><div class="gv-handle"></div></div>').appendTo(t.prop("container")).draggable({axis:"y",start:function(){e("body").addClass("gv-dragging")},stop:function(n,r){e("body").removeClass("gv-dragging"),i.resize(t.prop("height")+r.position.top-r.originalPosition.top,!0),e(this).css({top:"auto",bottom:0})}}).on("click",function(){var e=t.prop("fullVisibleHeight");e&&i.resize(e,!0)}))),n.css({width:this.width,left:0})[this.prop("autoHeight")?"hide":"show"](),this.prop("autoHeight")||r-this.prop("margin")!==this.prop("featureHeight")||(i.resize(r+n.height()),this.prop("initialHeight",this.prop("height")))}}),this.on("afterToggleExpander","tracks",function(){var e=this.prop("resizer");e&&e[this.expander&&this.expander.is(":visible")?"addClass":"removeClass"]("gv-resizer-expander")})}}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Plugins.tooltips=function(){function t(t,i,n){var r=t.superContainer.offset();i=i||t.superContainer.find(".gv-tooltip"),n=n||e(this).toggleClass("gv-active").hasClass("gv-active")?"show":"hide",i.each(function(){e(this).tipsy(n).data("tipsy").$tip.appendTo(t.superContainer).css({marginTop:-r.top,marginLeft:-r.left})})}function i(){var i=e();return e.each([[n.labelContainer.find(".gv-handle"),{gravity:"w",fade:!0,trigger:"manual",fallback:"Reorder tracks by dragging this handle"}],[n.container.find(".gv-resizer"),{gravity:"n",fade:!0,trigger:"manual",fallback:"Resize track by dragging this handle"}]],function(){var e=this[0].first();e.hasClass("gv-tooltip")||(this[0].filter(".gv-tooltip").removeClass("gv-tooltip").tipsy("hide").removeData("tipsy"),e.tipsy(this[1]).addClass("gv-tooltip")),i=i.add(e)}),n.controlPanel.find(".gv-tooltips").hasClass("gv-active")&&t(n,i,"show"),i}var n=this;this.controls.push({icon:'<i class="fa fa-info-circle"></i>',class:"gv-tooltips",name:"Tooltips",action:t}),this.on("afterInit",function(){this.superContainer.find(".gv-panel-left  .gv-button-set[title]").tipsy({gravity:"w",fade:!0,trigger:"manual"}).addClass("gv-tooltip"),this.superContainer.find(".gv-panel-right .gv-button-set[title]").tipsy({gravity:"e",fade:!0,trigger:"manual"}).addClass("gv-tooltip"),e('<i class="gv-wrapper-tooltip">').prependTo(this.wrapper).tipsy({gravity:"s",fade:!0,trigger:"manual",fallback:"Scroll left and right by dragging with your mouse, click on any feature in any track for more info"}).addClass("gv-tooltip"),i()}),this.on("beforeSetWidth",function(){this.controlPanel.find(".gv-tooltips.gv-active").trigger("click")}),this.on("afterSortTracks",function(){i()}),this.on("afterResize","tracks",function(){i()})},Genoverse.Plugins.tooltips.requires="controlPanel"}).call(t,i(0))},function(e,t,i){(function(e){Genoverse.Plugins.trackControls=function(){var t=[e('<a title="More info" class="fa fa-info-circle">').on("click",function(){var t=e(this).data("track"),i=t.prop("menus").filter(".gv-track-info");i.length||(i={title:t.name},i[t.prop("info")||""]="",i=t.prop("menus",t.prop("menus").add(t.browser.makeMenu(i).addClass("gv-track-info")))),i.show().position({of:t.prop("container"),at:"center top",my:"center top",collision:"none"})}),e(['<a class="gv-height-toggle">','<i class="fa fa-sort"></i>','<i class="fa fa-sort-desc"></i>','<i class="fa fa-sort-asc"></i>',"</a>"].join("")).on({click:function(){var t,i=e(this).data("track");i.prop("autoHeight",!i.prop("autoHeight"))?(i.prop("heightBeforeToggle",i.prop("height")),t=i.prop("fullVisibleHeight")):t=i.prop("heightBeforeToggle")||i.prop("initialHeight"),e(this).trigger("toggleState"),i.controller.resize(t,!0)},toggleState:function(){var t=e(this).data("track"),i=t.prop("autoHeight"),n=t.prop("resizer");this.title=i?"Set track to fixed height":"Set track to auto-adjust height",e(this)[i?"addClass":"removeClass"]("gv-auto-height"),n&&n[i?"hide":"show"]()}})],i=e('<a title="Remove track" class="fa fa-trash">').on("click",function(){e(this).data("track").remove()}),n=e(['<a class="gv-track-controls-toggle">','<span><i class="fa fa-angle-double-left"></i><i class="fa fa-cog"></i></span>','<span><i class="fa fa-angle-double-right"></i></span>',"</a>"].join("")).on("click",function(){e(this).parent().toggleClass("gv-maximized")});this.on({afterAddDomElements:function(){var r=this.prop("controls");if("off"!==r){var s,o,a,l=this.prop("defaultConfig"),h=this.browser.savedConfig?this.browser.savedConfig[this.prop("id")]||{}:{};r=(r||[]).concat(t,!1===this.prop("removable")?[]:i),this.trackControls=e('<div class="gv-track-controls">').prependTo(this.container);for(var c=e('<div class="gv-track-controls-container">').appendTo(this.trackControls),u=0;u<r.length;u++){if(e.isPlainObject(r[u])&&r[u].type){if(o=e("<"+r[u].type+">").data("control",r[u].name),r[u].options)for(a=0;a<r[u].options.length;a++)o.append('<option value="'+r[u].options[a].value+'">'+r[u].options[a].text+"</option>")}else"string"==typeof r[u]?o=e(r[u]):"object"==typeof r[u]&&r[u].constructor&&r[u]instanceof e&&(o=r[u].clone(!0));o.data("track",this.track).appendTo(c),o.is("select")&&(s=o.data("control"),o.find("option[value="+(h[s]||l[s]||"all")+"]").attr("selected",!0).end().change(function(){e(this).data("track").setConfig(e(this).data("control"),this.value)}))}this.prop("heightToggler",c.children(".gv-height-toggle").trigger("toggleState"));var f=n.clone(!0).data("track",this.track).appendTo(this.trackControls);f.trigger("click"),this.minLabelHeight=Math.max(this.minLabelHeight,this.trackControls.outerHeight(!0)+this.prop("margin")),f.trigger("click")}},afterResize:function(){this.trackControls&&this.trackControls[this.prop("height")<this.trackControls.outerHeight(!0)?"hide":"show"]()},afterResetHeight:function(){var e=this.prop("heightToggler");!0===this.prop("resizable")&&e&&(e[this.prop("autoHeight")?"addClass":"removeClass"]("gv-auto-height"),e.trigger("toggleState"))},afterSetMVC:function(){var e=this.prop("heightToggler");e&&e.trigger("toggleState")[!0===this.prop("resizable")?"removeClass":"addClass"]("gv-hide")}},"tracks")}}).call(t,i(0))}]);